!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@deck.gl/core")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@luma.gl/constants")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("@deck.gl/layers")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){},function(e,t){e.exports=require("zarr")},function(e,t){e.exports=require("@babel/runtime/helpers/get")},function(e,t){e.exports=require("@luma.gl/core")},function(e,t){e.exports=require("quickselect")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("threads")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("@deck.gl/geo-layers")},function(e,t){e.exports=require("buffer")},function(e,t){e.exports=require("@deck.gl/react")},function(e,t){e.exports=require("txml")},function(e,t){e.exports=require("pako/lib/inflate")},function(e,t,n){var r=n(14),o=n(21),i=e.exports;for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);function a(e){if("string"==typeof e&&(e=o.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}i.request=function(e,t){return e=a(e),r.request.call(this,e,t)},i.get=function(e,t){return e=a(e),r.get.call(this,e,t)}},function(e,t,n){e.exports=function(){return n(31)('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=71)}([function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a}));const r=Symbol("thread.errors"),i=Symbol("thread.events"),o=Symbol("thread.terminate"),s=Symbol("thread.transferable"),a=Symbol("thread.worker")},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function b(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(r){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(63)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(2))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));const r={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})};let i={deserialize(e){return(t=e)&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker?r.deserialize(e):e;var t},serialize:e=>e instanceof Error?r.serialize(e):e};function o(e){return i.deserialize(e)}function s(e){return i.serialize(e)}},function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return\'The value "\'+t+\'" is invalid for option "\'+e+\'"\'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,s,a,u;if("string"==typeof t&&function(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be",s=e,a=" argument",(void 0===u||u>s.length)&&(u=s.length),s.substring(u-a.length,u)===a)i="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";i=\'The "\'.concat(e,\'" \').concat(c," ").concat(r," ").concat(o(t,"type"))}return i+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},function(e,t,n){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n(18),o=n(23);n(7)(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n(2))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";const r=()=>"function"==typeof Symbol,i=e=>r()&&Boolean(Symbol[e]),o=e=>i(e)?Symbol[e]:"@@"+e;i("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const s=o("iterator"),a=o("observable"),u=o("species");function c(e,t){const n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function l(e){let t=e.constructor;return void 0!==t&&(t=t[u],null===t&&(t=void 0)),void 0!==t?t:v}function f(e){f.log?f.log(e):setTimeout(()=>{throw e},0)}function h(e){Promise.resolve().then(()=>{try{e()}catch(e){f(e)}})}function d(e){const t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{const e=c(t,"unsubscribe");e&&e.call(t)}}catch(e){f(e)}}function p(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function b(e,t,n){e._state="running";const r=e._observer;try{const i=r?c(r,t):void 0;switch(t){case"next":i&&i.call(r,n);break;case"error":if(p(e),!i)throw n;i.call(r,n);break;case"complete":p(e),i&&i.call(r)}}catch(e){f(e)}"closed"===e._state?d(e):"running"===e._state&&(e._state="ready")}function m(e,t,n){if("closed"!==e._state)return"buffering"===e._state?(e._queue=e._queue||[],void e._queue.push({type:t,value:n})):"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void h(()=>function(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const n of t)if(b(e,n.type,n.value),"closed"===e._state)break}}(e))):void b(e,t,n)}class g{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const n=new y(this);try{this._cleanup=t.call(void 0,n)}catch(e){n.error(e)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(p(this),d(this))}}class y{constructor(e){this._subscription=e}get closed(){return"closed"===this._subscription._state}next(e){m(this._subscription,"next",e)}error(e){m(this._subscription,"error",e)}complete(){m(this._subscription,"complete")}}class v{constructor(e){if(!(this instanceof v))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,t,n){return"object"==typeof e&&null!==e||(e={next:e,error:t,complete:n}),new g(e,this._subscriber)}pipe(e,...t){let n=this;for(const r of[e,...t])n=r(n);return n}tap(e,t,n){const r="object"!=typeof e||null===e?{next:e,error:t,complete:n}:e;return new v(e=>this.subscribe({next(t){r.next&&r.next(t),e.next(t)},error(t){r.error&&r.error(t),e.error(t)},complete(){r.complete&&r.complete(),e.complete()},start(e){r.start&&r.start(e)}}))}forEach(e){return new Promise((t,n)=>{if("function"!=typeof e)return void n(new TypeError(e+" is not a function"));function r(){i.unsubscribe(),t()}const i=this.subscribe({next(t){try{e(t,r)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t})})}map(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(l(this))(t=>this.subscribe({next(n){let r=n;try{r=e(n)}catch(e){return t.error(e)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}}))}filter(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(l(this))(t=>this.subscribe({next(n){try{if(!e(n))return}catch(e){return t.error(e)}t.next(n)},error(e){t.error(e)},complete(){t.complete()}}))}reduce(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");const n=l(this),r=arguments.length>1;let i=!1,o=t;return new n(t=>this.subscribe({next(n){const s=!i;if(i=!0,!s||r)try{o=e(o,n)}catch(e){return t.error(e)}else o=n},error(e){t.error(e)},complete(){if(!i&&!r)return t.error(new TypeError("Cannot reduce an empty sequence"));t.next(o),t.complete()}}))}concat(...e){const t=l(this);return new t(n=>{let r,i=0;return function o(s){r=s.subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){i===e.length?(r=void 0,n.complete()):o(t.from(e[i++]))}})}(this),()=>{r&&(r.unsubscribe(),r=void 0)}})}flatMap(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");const t=l(this);return new t(n=>{const r=[],i=this.subscribe({next(i){let s;if(e)try{s=e(i)}catch(e){return n.error(e)}else s=i;const a=t.from(s).subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){const e=r.indexOf(a);e>=0&&r.splice(e,1),o()}});r.push(a)},error(e){n.error(e)},complete(){o()}});function o(){i.closed&&0===r.length&&n.complete()}return()=>{r.forEach(e=>e.unsubscribe()),i.unsubscribe()}})}[a](){return this}static from(e){const t="function"==typeof this?this:v;if(null==e)throw new TypeError(e+" is not an object");const n=c(e,a);if(n){const r=n.call(e);if(Object(r)!==r)throw new TypeError(r+" is not an object");return function(e){return e instanceof v}(r)&&r.constructor===t?r:new t(e=>r.subscribe(e))}if(i("iterator")){const n=c(e,s);if(n)return new t(t=>{h(()=>{if(!t.closed){for(const r of n.call(e))if(t.next(r),t.closed)return;t.complete()}})})}if(Array.isArray(e))return new t(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){return new("function"==typeof this?this:v)(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})})}static get[u](){return this}}r()&&Object.defineProperty(v,Symbol("extensions"),{value:{symbol:a,hostReportError:f},configurable:!0});t.a=v},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.internalError="internalError",e.message="message",e.termination="termination"}(r||(r={}))},function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.run="run"}(r||(r={})),function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"}(i||(i={}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},s={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(r)},,function(e,t,n){"use strict";var r=n(5).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},b=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?b():t.on("request",b)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",b),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},function(e,t,n){"use strict";var r=n(65),i=n(67);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=v(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,c=["{","}","|","\\\\","^","`"].concat(["<",">",\'"\',"`"," ","\\r","\\n","\\t"]),l=["\'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(68);function v(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter \'url\' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\\\/g,"/");var v=e=c.join(a);if(v=v.trim(),!n&&1===e.split("#").length){var w=u.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=s.exec(v);if(_){var k=(_=_[0]).toLowerCase();this.protocol=k,v=v.substr(_.length)}if(n||_||v.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var S="//"===v.substr(0,2);!S||_&&m[_]||(v=v.substr(2),this.slashes=!0)}if(!m[_]&&(S||_&&!g[_])){for(var x,C,E=-1,O=0;O<h.length;O++){-1!==(T=v.indexOf(h[O]))&&(-1===E||T<E)&&(E=T)}-1!==(C=-1===E?v.lastIndexOf("@"):v.lastIndexOf("@",E))&&(x=v.slice(0,C),v=v.slice(C+1),this.auth=decodeURIComponent(x)),E=-1;for(O=0;O<f.length;O++){var T;-1!==(T=v.indexOf(f[O]))&&(-1===E||T<E)&&(E=T)}-1===E&&(E=v.length),this.host=v.slice(0,E),v=v.slice(E),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var R=this.hostname.split(/\\./),A=(O=0,R.length);O<A;O++){var P=R[O];if(P&&!P.match(d)){for(var L="",M=0,F=P.length;M<F;M++)P.charCodeAt(M)>127?L+="x":L+=P[M];if(!L.match(d)){var N=R.slice(0,O),D=R.slice(O+1),I=P.match(p);I&&(N.push(I[1]),D.unshift(I[2])),D.length&&(v="/"+D.join(".")+v),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+U,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!b[k])for(O=0,A=l.length;O<A;O++){var G=l[O];if(-1!==v.indexOf(G)){var z=encodeURIComponent(G);z===G&&(z=escape(G)),v=v.split(G).join(z)}}var q=v.indexOf("#");-1!==q&&(this.hash=v.substr(q),v=v.slice(0,q));var K=v.indexOf("?");if(-1!==K?(this.search=v.substr(K),this.query=v.substr(K+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,K)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var b=n.pathname||"",y=n.search||"";n.path=b+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=w||v||n.host&&e.pathname,k=_,S=n.pathname&&n.pathname.split("/")||[],x=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(""===p[0]||""===S[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=p;else if(p.length)S||(S=[]),S.pop(),S=S.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(x)n.hostname=n.host=S.shift(),(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=S.slice(-1)[0],E=(n.host||e.host||S.length>1)&&("."===C||".."===C)||""===C,O=0,T=S.length;T>=0;T--)"."===(C=S[T])?S.splice(T,1):".."===C?(S.splice(T,1),O++):O&&(S.splice(T,1),O--);if(!_&&!k)for(;O--;O)S.unshift("..");!_||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),E&&"/"!==S.join("/").substr(-1)&&S.push("");var j,R=""===S[0]||S[0]&&"/"===S[0].charAt(0);x&&(n.hostname=n.host=R?"":S.length?S.shift():"",(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift()));return(_=_||n.host&&S.length)&&!R&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v}));var r=n(3),i=n.n(r),o=n(8),s=n(73),a=n(4);const u=()=>{},c=e=>e,l=e=>Promise.resolve().then(e);function f(e){throw e}class h extends o.a{constructor(e){super(t=>{const n=this,r=Object.assign(Object.assign({},t),{complete(){t.complete(),n.onCompletion()},error(e){t.error(e),n.onError(e)},next(e){t.next(e),n.onNext(e)}});try{return this.initHasRun=!0,e(r)}catch(e){r.error(e)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(e){this.firstValueSet||(this.firstValue=e,this.firstValueSet=!0)}onError(e){this.state="rejected",this.rejection=e;for(const t of this.rejectionCallbacks)l(()=>t(e))}onCompletion(){this.state="fulfilled";for(const e of this.fulfillmentCallbacks)l(()=>e(this.firstValue))}then(e,t){const n=e||c,r=t||f;let i=!1;return new Promise((e,t)=>{const o=n=>{if(!i){i=!0;try{e(r(n))}catch(e){t(e)}}};return this.initHasRun||this.subscribe({error:o}),"fulfilled"===this.state?e(n(this.firstValue)):"rejected"===this.state?(i=!0,e(r(this.rejection))):(this.fulfillmentCallbacks.push(t=>{try{e(n(t))}catch(e){o(e)}}),void this.rejectionCallbacks.push(o))})}catch(e){return this.then(void 0,e)}finally(e){const t=e||u;return this.then(e=>(t(),e),()=>t())}static from(e){return function(e){return e&&"function"==typeof e.then}(e)?new h(t=>{e.then(e=>{t.next(e),t.complete()},e=>{t.error(e)})}):super.from(e)}}var d=n(33),p=n(10);const b=i()("threads:master:messages");let m=1;function g(e,t){return new o.a(n=>{let r;const i=o=>{var s;if(b("Message from worker:",o.data),o.data&&o.data.uid===t)if((s=o.data)&&s.type===p.b.running)r=o.data.resultType;else if((e=>e&&e.type===p.b.result)(o.data))"promise"===r?(void 0!==o.data.payload&&n.next(Object(a.a)(o.data.payload)),n.complete(),e.removeEventListener("message",i)):(o.data.payload&&n.next(Object(a.a)(o.data.payload)),o.data.complete&&(n.complete(),e.removeEventListener("message",i)));else if((e=>e&&e.type===p.b.error)(o.data)){const t=Object(a.a)(o.data.error);n.error(t),e.removeEventListener("message",i)}};return e.addEventListener("message",i),()=>e.removeEventListener("message",i)})}function y(e,t){return(...n)=>{const r=m++,{args:i,transferables:o}=function(e){if(0===e.length)return{args:[],transferables:[]};const t=[],n=[];for(const r of e)Object(d.a)(r)?(t.push(Object(a.b)(r.send)),n.push(...r.transferables)):t.push(Object(a.b)(r));return{args:t,transferables:0===n.length?n:(r=n,Array.from(new Set(r)))};var r}(n),u={type:p.a.run,uid:r,method:t,args:i};b("Sending command to run function to worker:",u);try{e.postMessage(u,o)}catch(e){return h.from(Promise.reject(e))}return h.from(Object(s.a)(g(e,r)))}}function v(e,t){const n={};for(const r of t)n[r]=y(e,r);return n}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t,n){"use strict";(function(t,r){var i;e.exports=C,C.ReadableState=x;n(19).EventEmitter;var o=function(e,t){return e.listeners(t).length},s=n(20),a=n(0).Buffer,u=t.Uint8Array||function(){};var c,l=n(41);c=l&&l.debuglog?l.debuglog("stream"):function(){};var f,h,d,p=n(42),b=n(21),m=n(22).getHighWaterMark,g=n(5).codes,y=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(7)(C,s);var k=b.errorOrDestroy,S=["error","close","destroy","pause","resume"];function x(e,t,r){i=i||n(6),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(24).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function C(e){if(i=i||n(6),!(this instanceof C))return new C(e);var t=this instanceof i;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function E(e,t,n,r,i){c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?j(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,s);else if(i||(o=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(s,t)),o)k(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)s.endEmitted?k(e,new _):O(e,s,t,!0);else if(s.ended)k(e,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?O(e,s,t,!1):A(e,s)):O(e,s,t,!1)}else r||(s.reading=!1,A(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function O(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&j(e)),A(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=b.destroy,C.prototype._undestroy=b.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},C.prototype.unshift=function(e){return E(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){f||(f=n(24).StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function j(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function A(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){c("readable nexttick read 0"),e.read(0)}function F(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function I(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):j(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&I(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit("data",r),r},C.prototype._read=function(e){k(this,new w("_read()"))},C.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:m;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",b),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",m),n.removeListener("data",h),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",l);var f=!1;function h(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==B(i.pipes,e))&&!f&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(t){c("onerror",t),m(),e.removeListener("error",d),0===o(e,"error")&&k(e,t)}function p(){e.removeListener("finish",b),m()}function b(){c("onfinish"),e.removeListener("close",p),m()}function m(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",b),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?j(this):i.reading||r.nextTick(M,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(L,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(L,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(F,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(46)),h(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=D,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===d&&(d=n(47)),d(C,e,t)})}).call(this,n(11),n(2))},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError(\'The "listener" argument must be of type Function. Received type \'+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function b(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError(\'The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received \'+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError(\'The value of "n" is out of range. It must be a non-negative number. Received \'+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=m(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},a.prototype.listenerCount=b,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){e.exports=n(19).EventEmitter},function(e,t,n){"use strict";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n(2))},function(e,t,n){"use strict";var r=n(5).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=C,C.WritableState=x;var s={deprecate:n(44)},a=n(20),u=n(0).Buffer,c=t.Uint8Array||function(){};var l,f=n(21),h=n(22).getHighWaterMark,d=n(5).codes,p=d.ERR_INVALID_ARG_TYPE,b=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,k=f.errorOrDestroy;function S(){}function x(e,t,s){o=o||n(6),e=e||{},"boolean"!=typeof s&&(s=t instanceof o),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(A,e,t),e._writableState.errorEmitted=!0,k(e,i)):(o(i),e._writableState.errorEmitted=!0,k(e,i),A(e,t))}(e,n,i,t,o);else{var s=j(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(O,e,n,s,o):O(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function C(e){var t=this instanceof(o=o||n(6));if(!t&&!l.call(C,this))return new C(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function E(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,E(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(E(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function j(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(n){t.pendingcb--,n&&k(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=j(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(7)(C,a),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===C&&(e&&e._writableState instanceof x)}})):l=function(e){return e instanceof this},C.prototype.pipe=function(){k(this,new g)},C.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=S),o.ending?function(e,t){var n=new w;k(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new v:"string"==typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(k(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,a,r,i,o);return c}(this,o,a,e,t,n)),s},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new b("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=f.destroy,C.prototype._undestroy=f.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this,n(11),n(2))},function(e,t,n){"use strict";var r=n(45).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=l;var r=n(5).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(6);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(7)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n(3),i=n.n(r),o=n(8),s=n(4),a=n(32),u=n(1),c=n(9),l=n(16),f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const h=i()("threads:master:messages"),d=i()("threads:master:spawn"),p=i()("threads:master:thread-utils"),b=void 0!==e&&e.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(e.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function m(e,t,n,r){const i=n.filter(e=>e.type===c.a.internalError).map(e=>e.error);return Object.assign(e,{[u.a]:i,[u.b]:n,[u.c]:r,[u.e]:t})}function g(e,t){return f(this,void 0,void 0,(function*(){d("Initializing new thread");const n=(yield function(e,t,n){return f(this,void 0,void 0,(function*(){let r;const i=new Promise((e,i)=>{r=setTimeout(()=>i(Error(n)),t)}),o=yield Promise.race([e,i]);return clearTimeout(r),o}))}(function(e){return new Promise((t,n)=>{const r=i=>{var o;h("Message from worker before finishing initialization:",i.data),(o=i.data)&&"init"===o.type?(e.removeEventListener("message",r),t(i.data)):(e=>e&&"uncaughtError"===e.type)(i.data)&&(e.removeEventListener("message",r),n(Object(s.a)(i.data.error)))};e.addEventListener("message",r)})}(e),t&&t.timeout?t.timeout:b,`Timeout: Did not receive an init message from worker after ${b}ms. Make sure the worker calls expose().`)).exposed,{termination:r,terminate:i}=function(e){const[t,n]=Object(a.a)();return{terminate:()=>f(this,void 0,void 0,(function*(){p("Terminating worker"),yield e.terminate(),n()})),termination:t}}(e),u=function(e,t){return new o.a(n=>{const r=e=>{const t={type:c.a.message,data:e.data};n.next(t)},i=e=>{p("Unhandled promise rejection event in thread:",e);const t={type:c.a.internalError,error:Error(e.reason)};n.next(t)};e.addEventListener("message",r),e.addEventListener("unhandledrejection",i),t.then(()=>{const t={type:c.a.termination};e.removeEventListener("message",r),e.removeEventListener("unhandledrejection",i),n.next(t),n.complete()})})}(e,r);if("function"===n.type){return m(Object(l.a)(e),e,u,i)}if("module"===n.type){return m(Object(l.b)(e,n.methods),e,u,i)}{const e=n.type;throw Error(`Worker init message states unexpected type of expose(): ${e}`)}}))}}).call(this,n(2))},function(e,t,n){var r=n(35),i=n(17),o=n(36);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t,n){var r=n(37),i=n(17),o=n(38);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t,n){function r(e,t){"use strict";var n=(t=t||{}).pos||0,i="<".charCodeAt(0),o=">".charCodeAt(0),s="-".charCodeAt(0),a="/".charCodeAt(0),u="!".charCodeAt(0),c="\'".charCodeAt(0),l=\'"\'.charCodeAt(0);function f(){for(var t=[];e[n];)if(e.charCodeAt(n)==i){if(e.charCodeAt(n+1)===a)return(n=e.indexOf(">",n))+1&&(n+=1),t;if(e.charCodeAt(n+1)===u){if(e.charCodeAt(n+2)==s){for(;-1!==n&&(e.charCodeAt(n)!==o||e.charCodeAt(n-1)!=s||e.charCodeAt(n-2)!=s||-1==n);)n=e.indexOf(">",n+1);-1===n&&(n=e.length)}else for(n+=2;e.charCodeAt(n)!==o&&e[n];)n++;n++;continue}var r=b();t.push(r)}else{var c=h();c.trim().length>0&&t.push(c),n++}return t}function h(){var t=n;return-2===(n=e.indexOf("<",n)-1)&&(n=e.length),e.slice(t,n+1)}function d(){for(var t=n;-1==="\\n\\t>/= ".indexOf(e[n])&&e[n];)n++;return e.slice(t,n)}var p=t.noChildNodes||["img","br","input","meta","link"];function b(){n++;const t=d(),r={};let i=[];for(;e.charCodeAt(n)!==o&&e[n];){var s=e.charCodeAt(n);if(s>64&&s<91||s>96&&s<123){for(var u=d(),h=e.charCodeAt(n);h&&h!==c&&h!==l&&!(h>64&&h<91||h>96&&h<123)&&h!==o;)n++,h=e.charCodeAt(n);if(h===c||h===l){var b=m();if(-1===n)return{tagName:t,attributes:r,children:i}}else b=null,n--;r[u]=b}n++}if(e.charCodeAt(n-1)!==a)if("script"==t){var g=n+1;n=e.indexOf("<\\/script>",n),i=[e.slice(g,n-1)],n+=9}else if("style"==t){g=n+1;n=e.indexOf("</style>",n),i=[e.slice(g,n-1)],n+=8}else-1==p.indexOf(t)&&(n++,i=f());else n++;return{tagName:t,attributes:r,children:i}}function m(){var t=e[n],r=++n;return n=e.indexOf(t,r),e.slice(r,n)}var g,y=null;if(void 0!==t.attrValue){t.attrName=t.attrName||"id";for(y=[];-1!==(g=void 0,g=new RegExp("\\\\s"+t.attrName+"\\\\s*=[\'\\"]"+t.attrValue+"[\'\\"]").exec(e),n=g?g.index:-1);)-1!==(n=e.lastIndexOf("<",n))&&y.push(b()),e=e.substr(n),n=0}else y=t.parseNode?b():f();return t.filter&&(y=r.filter(y,t.filter)),t.setPos&&(y.pos=n),y}r.simplify=function(e){var t={};if(!e.length)return"";if(1===e.length&&"string"==typeof e[0])return e[0];for(var n in e.forEach((function(e){if("object"==typeof e){t[e.tagName]||(t[e.tagName]=[]);var n=r.simplify(e.children||[]);t[e.tagName].push(n),e.attributes&&(n._attributes=e.attributes)}})),t)1==t[n].length&&(t[n]=t[n][0]);return t},r.filter=function(e,t){var n=[];return e.forEach((function(e){if("object"==typeof e&&t(e)&&n.push(e),e.children){var i=r.filter(e.children,t);n=n.concat(i)}})),n},r.stringify=function(e){var t="";function n(e){if(e)for(var n=0;n<e.length;n++)"string"==typeof e[n]?t+=e[n].trim():r(e[n])}function r(e){for(var r in t+="<"+e.tagName,e.attributes)null===e.attributes[r]?t+=" "+r:-1===e.attributes[r].indexOf(\'"\')?t+=" "+r+\'="\'+e.attributes[r].trim()+\'"\':t+=" "+r+"=\'"+e.attributes[r].trim()+"\'";t+=">",n(e.children),t+="</"+e.tagName+">"}return n(e),t},r.toContentString=function(e){if(Array.isArray(e)){var t="";return e.forEach((function(e){t=(t+=" "+r.toContentString(e)).trim()})),t}return"object"==typeof e?r.toContentString(e.children):" "+e},r.getElementById=function(e,t,n){var i=r(e,{attrValue:t});return n?r.simplify(i):i[0]},r.getElementsByClassName=function(e,t,n){const i=r(e,{attrName:"class",attrValue:"[a-zA-Z0-9-s ]*"+t+"[a-zA-Z0-9-s ]*"});return n?r.simplify(i):i},r.parseStream=function(e,t){if("string"==typeof t&&(t=t.length+2),"string"==typeof e){var i=n(0);e=i.createReadStream(e,{start:t}),t=0}var o=t,s="";return e.on("data",(function(t){s+=t;for(var n=0;;){if(!(o=s.indexOf("<",o)+1))return void(o=n);if("/"!==s[o+1]){var i=r(s,{pos:o-1,parseNode:!0,setPos:!0});if((o=i.pos)>s.length-1||o<n)return s=s.slice(n),o=0,void(n=0);e.emit("xml",i),n=o}else o+=1,n=pos}})),e.on("end",(function(){console.log("end")})),e},r.transformStream=function(e){const t=n(39);"string"==typeof e&&(e=e.length+2);var i=e||0,o="";return t({readableObjectMode:!0},(function(e,t,n){o+=e;for(var s=0;;){if(!(i=o.indexOf("<",i)+1))return i=s,n();if("/"!==o[i+1]){var a=r(o,{pos:i-1,parseNode:!0,setPos:!0});if((i=a.pos)>o.length-1||i<s)return o=o.slice(s),i=0,s=0,n();this.push(a),s=i}else i+=1,s=pos}n()}))},e.exports=r,r.xml=r},function(e,t,n){"use strict";var r=n(53),i=n(12),o=n(58),s=n(59),a=n(60),u=n(61),c=n(62),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==s.Z_OK))throw new Error(a[n])}function h(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}f.prototype.push=function(e,t){var n,a,u,c,f,h=this.strm,d=this.options.chunkSize,p=this.options.dictionary,b=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(n=r.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===s.Z_BUF_ERROR&&!0===b&&(n=s.Z_OK,b=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),c=h.next_out-u,f=o.buf2string(h.output,u),h.next_out=c,h.avail_out=d-c,c&&i.arraySet(h.output,h.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(b=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),h.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,n){"use strict";var r=n(8);class i extends r.a{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const t of this._observers)t.next(e)}error(e){for(const t of this._observers)t.error(e)}complete(){for(const e of this._observers)e.complete()}}t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const r=()=>{};function i(){let e,t=!1,n=r;return[new Promise(r=>{t?r(e):n=r}),r=>{t=!0,e=r,n()}]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);function i(e){return e&&"object"==typeof e&&e[r.d]}},function(e,t,n){var r=n(0),i=n(15),o=e.exports;for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);function a(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error(\'Protocol "\'+e.protocol+\'" not supported. Expected "https:"\');return e}o.request=function(e,t){return e=a(e),r.request.call(this,e,t)},o.get=function(e,t){return e=a(e),r.get.call(this,e,t)}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){(function(t){var r=n(40).Transform,i=n(50).inherits;function o(e){r.call(this,e),this._destroyed=!1}function s(e,t,n){n(null,e)}function a(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=s),"function"!=typeof r&&(r=null),e(t,n,r)}}i(o,r),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var n=this;t.nextTick((function(){e&&n.emit("error",e),n.emit("close")}))}},e.exports=a((function(e,t,n){var r=new o(e);return r._transform=t,n&&(r._flush=n),r})),e.exports.ctor=a((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=Object.assign({},e,t),o.call(this,this.options)}return i(r,o),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),e.exports.obj=a((function(e,t,n){var r=new o(Object.assign({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this,n(2))},function(e,t,n){(t=e.exports=n(18)).Stream=t,t.Readable=t,t.Writable=n(23),t.Duplex=n(6),t.Transform=n(25),t.PassThrough=n(48),t.finished=n(14),t.pipeline=n(49)},function(e,t){},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(0).Buffer,a=n(43).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),c&&o(t,c),e}()},function(e,t){},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(11))},function(e,t,n){var r=n(0),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(14),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(d(n,!1)))}}function b(e){t.nextTick(p,e)}var m=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise((function(n,r){t.nextTick((function(){e[u]?r(e[u]):n(d(void 0,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(void 0,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[f])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(void 0,!0))}))}))})),r),m);e.exports=function(e){var t,n=Object.create(g,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[s]=null,n[a]=null,e(d(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(d(void 0,!0))),n[c]=!0})),e.on("readable",b.bind(null,n)),n}}).call(this,n(2))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,n){"use strict";e.exports=i;var r=n(25);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(7)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r;var i=n(5).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(14)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(l)}},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),u=r[n];n<o;u=r[++n])b(u)||!w(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return g(i)||(i=l(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var n="\'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/\'/g,"\\\\\'").replace(/\\\\"/g,\'"\')+"\'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),k(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return f(n)}var c,w="",x=!1,C=["{","}"];(d(n)&&(x=!0,C=["[","]"]),S(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(w=" "+RegExp.prototype.toString.call(n)),_(n)&&(w=" "+Date.prototype.toUTCString.call(n)),k(n)&&(w=" "+f(n)),0!==s.length||x&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=x?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)T(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,a,s):s.map((function(t){return h(e,n,r,a,t,x)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\\n")>=0&&0,e+t.replace(/\\u001b\\[\\d\\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\\n ")+" "+e.join(",\\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,w,C)):C[0]+w+C[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),T(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=b(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\\n")>-1&&(a=o?a.split("\\n").map((function(e){return"  "+e})).join("\\n").substr(2):"\\n"+a.split("\\n").map((function(e){return"   "+e})).join("\\n")):a=e.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/\'/g,"\\\\\'").replace(/\\\\"/g,\'"\').replace(/(^"|"$)/g,"\'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function b(e){return null===e}function m(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return w(e)&&"[object RegExp]"===x(e)}function w(e){return"object"==typeof e&&null!==e}function _(e){return w(e)&&"[object Date]"===x(e)}function k(e){return w(e)&&("[object Error]"===x(e)||e instanceof Error)}function S(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\\\b"+n+"\\\\b","i").test(o)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=b,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=w,t.isDate=_,t.isError=k,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(51);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=n(52),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var j="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError(\'The "original" argument must be of type Function\');if(j&&e[j]){var t;if("function"!=typeof(t=e[j]))throw new TypeError(\'The "util.promisify.custom" argument must be of type Function\');return Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),j&&Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=j,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError(\'The "original" argument must be of type Function\');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(R,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(2))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=n(12),i=n(54),o=n(55),s=n(56),a=n(57);function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,l(e)):-2}function h(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,f(e))):-2}function d(e,t){var n,r;return e?(r=new c,e.state=r,r.window=null,0!==(n=h(e,t))&&(e.state=null),n):-2}var p,b,m=!0;function g(e){if(m){var t;for(p=new r.Buf32(512),b=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,b,0,e.work,{bits:5}),m=!1}e.lencode=p,e.lenbits=9,e.distcode=b,e.distbits=5}function y(e,t,n,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>i&&(o=i),r.arraySet(s.window,t,n-i,o,s.wnext),(i-=o)?(r.arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}t.inflateReset=f,t.inflateReset2=h,t.inflateResetKeep=l,t.inflateInit=function(e){return d(e,15)},t.inflateInit2=d,t.inflate=function(e,t){var n,c,l,f,h,d,p,b,m,v,w,_,k,S,x,C,E,O,T,j,R,A,P,L,M=0,F=new r.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,b=n.hold,m=n.bits,v=d,w=p,A=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(2&n.wrap&&35615===b){n.check=0,F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0),b=0,m=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){e.msg="unknown compression method",n.mode=30;break}if(m-=4,R=8+(15&(b>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<R,e.adler=n.check=1,n.mode=512&b?10:12,b=0,m=0;break;case 2:for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0)),b=0,m=0,n.mode=3;case 3:for(;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.head&&(n.head.time=b),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,F[2]=b>>>16&255,F[3]=b>>>24&255,n.check=o(n.check,F,4,0)),b=0,m=0,n.mode=4;case 4:for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0)),b=0,m=0,n.mode=5;case 5:if(1024&n.flags){for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0)),b=0,m=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((_=n.length)>d&&(_=d),_&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,f,_,R)),512&n.flags&&(n.check=o(n.check,c,_,f)),d-=_,f+=_,n.length-=_),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===d)break e;_=0;do{R=c[f+_++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R))}while(R&&_<d);if(512&n.flags&&(n.check=o(n.check,c,_,f)),d-=_,f+=_,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===d)break e;_=0;do{R=c[f+_++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R))}while(R&&_<d);if(512&n.flags&&(n.check=o(n.check,c,_,f)),d-=_,f+=_,R)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}e.adler=n.check=u(b),b=0,m=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=b,n.bits=m,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&m,m-=7&m,n.mode=27;break}for(;m<3;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}switch(n.last=1&b,m-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(g(n),n.mode=20,6===t){b>>>=2,m-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}b>>>=2,m-=2;break;case 14:for(b>>>=7&m,m-=7&m;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,b=0,m=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(_=n.length){if(_>d&&(_=d),_>p&&(_=p),0===_)break e;r.arraySet(l,c,f,_,h),d-=_,f+=_,p-=_,h+=_,n.length-=_;break}n.mode=12;break;case 17:for(;m<14;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(n.nlen=257+(31&b),b>>>=5,m-=5,n.ndist=1+(31&b),b>>>=5,m-=5,n.ncode=4+(15&b),b>>>=4,m-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;m<3;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.lens[N[n.have++]]=7&b,b>>>=3,m-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},A=a(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,A){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;C=(M=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,E=65535&M,!((x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(E<16)b>>>=x,m-=x,n.lens[n.have++]=E;else{if(16===E){for(L=x+2;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(b>>>=x,m-=x,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}R=n.lens[n.have-1],_=3+(3&b),b>>>=2,m-=2}else if(17===E){for(L=x+3;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}m-=x,R=0,_=3+(7&(b>>>=x)),b>>>=3,m-=3}else{for(L=x+7;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}m-=x,R=0,_=11+(127&(b>>>=x)),b>>>=7,m-=7}if(n.have+_>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;_--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},A=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,A){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},A=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,A){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(d>=6&&p>=258){e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=b,n.bits=m,s(e,w),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,b=n.hold,m=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;C=(M=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,E=65535&M,!((x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(C&&0==(240&C)){for(O=x,T=C,j=E;C=(M=n.lencode[j+((b&(1<<O+T)-1)>>O)])>>>16&255,E=65535&M,!(O+(x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}b>>>=O,m-=O,n.back+=O}if(b>>>=x,m-=x,n.back+=x,n.length=E,0===C){n.mode=26;break}if(32&C){n.back=-1,n.mode=12;break}if(64&C){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&C,n.mode=22;case 22:if(n.extra){for(L=n.extra;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;C=(M=n.distcode[b&(1<<n.distbits)-1])>>>16&255,E=65535&M,!((x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(0==(240&C)){for(O=x,T=C,j=E;C=(M=n.distcode[j+((b&(1<<O+T)-1)>>O)])>>>16&255,E=65535&M,!(O+(x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}b>>>=O,m-=O,n.back+=O}if(b>>>=x,m-=x,n.back+=x,64&C){e.msg="invalid distance code",n.mode=30;break}n.offset=E,n.extra=15&C,n.mode=24;case 24:if(n.extra){for(L=n.extra;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break e;if(_=w-p,n.offset>_){if((_=n.offset-_)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}_>n.wnext?(_-=n.wnext,k=n.wsize-_):k=n.wnext-_,_>n.length&&(_=n.length),S=n.window}else S=l,k=h-n.offset,_=n.length;_>p&&(_=p),p-=_,n.length-=_;do{l[h++]=S[k++]}while(--_);0===n.length&&(n.mode=21);break;case 26:if(0===p)break e;l[h++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;m<32;){if(0===d)break e;d--,b|=c[f++]<<m,m+=8}if(w-=p,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?o(n.check,l,w,h-w):i(n.check,l,w,h-w)),w=p,(n.flags?b:u(b))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=0,m=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=0,m=0}n.mode=29;case 29:A=1;break e;case 30:A=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=b,n.bits=m,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&y(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(v-=e.avail_in,w-=e.avail_out,e.total_in+=v,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?o(n.check,l,w,e.next_out-w):i(n.check,l,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===v&&0===w||4===t)&&0===A&&(A=-5),A)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:y(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var o=r,s=i+n;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,s,a,u,c,l,f,h,d,p,b,m,g,y,v,w,_,k,S,x,C,E;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),o=e.next_out,E=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,b=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(d+=C[r++]<<p,p+=8,d+=C[r++]<<p,p+=8),v=b[d&g];t:for(;;){if(d>>>=w=v>>>24,p-=w,0===(w=v>>>16&255))E[o++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=b[(65535&v)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&v,(w&=15)&&(p<w&&(d+=C[r++]<<p,p+=8),_+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=C[r++]<<p,p+=8,d+=C[r++]<<p,p+=8),v=m[d&y];n:for(;;){if(d>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=m[(65535&v)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&v,p<(w&=15)&&(d+=C[r++]<<p,(p+=8)<w&&(d+=C[r++]<<p,p+=8)),(k+=d&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,p-=w,k>(w=o-s)){if((w=k-w)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,x=h,0===f){if(S+=c-w,w<_){_-=w;do{E[o++]=h[S++]}while(--w);S=o-k,x=E}}else if(f<w){if(S+=c+f-w,(w-=f)<_){_-=w;do{E[o++]=h[S++]}while(--w);if(S=0,f<_){_-=w=f;do{E[o++]=h[S++]}while(--w);S=o-k,x=E}}}else if(S+=f-w,w<_){_-=w;do{E[o++]=h[S++]}while(--w);S=o-k,x=E}for(;_>2;)E[o++]=x[S++],E[o++]=x[S++],E[o++]=x[S++],_-=3;_&&(E[o++]=x[S++],_>1&&(E[o++]=x[S++]))}else{S=o-k;do{E[o++]=E[S++],E[o++]=E[S++],E[o++]=E[S++],_-=3}while(_>2);_&&(E[o++]=E[S++],_>1&&(E[o++]=E[S++]))}break}}break}}while(r<i&&o<a);r-=_=p>>3,d&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=d,n.bits=p}},function(e,t,n){"use strict";var r=n(12),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,c,l,f,h){var d,p,b,m,g,y,v,w,_,k=h.bits,S=0,x=0,C=0,E=0,O=0,T=0,j=0,R=0,A=0,P=0,L=null,M=0,F=new r.Buf16(16),N=new r.Buf16(16),D=null,I=0;for(S=0;S<=15;S++)F[S]=0;for(x=0;x<u;x++)F[t[n+x]]++;for(O=k,E=15;E>=1&&0===F[E];E--);if(O>E&&(O=E),0===E)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(C=1;C<E&&0===F[C];C++);for(O<C&&(O=C),R=1,S=1;S<=15;S++)if(R<<=1,(R-=F[S])<0)return-1;if(R>0&&(0===e||1!==E))return-1;for(N[1]=0,S=1;S<15;S++)N[S+1]=N[S]+F[S];for(x=0;x<u;x++)0!==t[n+x]&&(f[N[t[n+x]]++]=x);if(0===e?(L=D=f,y=19):1===e?(L=i,M-=257,D=o,I-=257,y=256):(L=s,D=a,y=-1),P=0,x=0,S=C,g=l,T=O,j=0,b=-1,m=(A=1<<O)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){v=S-j,f[x]<y?(w=0,_=f[x]):f[x]>y?(w=D[I+f[x]],_=L[M+f[x]]):(w=96,_=0),d=1<<S-j,C=p=1<<T;do{c[g+(P>>j)+(p-=d)]=v<<24|w<<16|_|0}while(0!==p);for(d=1<<S-1;P&d;)d>>=1;if(0!==d?(P&=d-1,P+=d):P=0,x++,0==--F[S]){if(S===E)break;S=t[n+f[x]]}if(S>O&&(P&m)!==b){for(0===j&&(j=O),g+=C,R=1<<(T=S-j);T+j<E&&!((R-=F[T+j])<=0);)T++,R<<=1;if(A+=1<<T,1===e&&A>852||2===e&&A>592)return 1;c[b=P&m]=O<<24|T<<16|g-l|0}}return 0!==P&&(c[g+P]=S-j<<24|64<<16|0),h.bits=O,0}},function(e,t,n){"use strict";var r=n(12),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function u(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,t.string2buf=function(e){var t,n,i,o,s,a=e.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),s=0,o=0;s<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,o,a=t||e.length,c=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if((o=s[i])>4)c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function s(...e){if(!s.enabled)return;const t=s,i=Number(new Date),o=i-(n||i);t.diff=o,t.prev=n,t.curr=i,n=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=i,s.extend=o,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function i(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\\.\\*\\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(s),...r.skips.map(s).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(64),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return s(e,t,o,"day");if(t>=i)return s(e,t,i,"hour");if(t>=r)return s(e,t,r,"minute");if(t>=n)return s(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,l=/[^\\x20-\\x7E]/,f=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function b(e){throw new RangeError(h[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function g(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function v(e){return m(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;r+=36)e=d(e/35);return d(r+36*e/(e+38))}function k(e){var t,n,r,i,o,s,a,c,l,f,h,p=[],m=e.length,g=0,y=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&b("not-basic"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=g,s=1,a=36;i>=m&&b("invalid-input"),((c=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>d((u-g)/s))&&b("overflow"),g+=c*s,!(c<(l=a<=w?1:a>=w+26?26:a-w));a+=36)s>d(u/(f=36-l))&&b("overflow"),s*=f;w=_(g-o,t=p.length+1,0==o),d(g/t)>u-y&&b("overflow"),y+=d(g/t),g%=t,p.splice(g++,0,y)}return v(p)}function S(e){var t,n,r,i,o,s,a,c,l,f,h,m,g,v,k,S=[];for(m=(e=y(e)).length,t=128,n=0,o=72,s=0;s<m;++s)(h=e[s])<128&&S.push(p(h));for(r=i=S.length,i&&S.push("-");r<m;){for(a=u,s=0;s<m;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>d((u-n)/(g=r+1))&&b("overflow"),n+=(a-t)*g,t=a,s=0;s<m;++s)if((h=e[s])<t&&++n>u&&b("overflow"),h==t){for(c=n,l=36;!(c<(f=l<=o?1:l>=o+26?26:l-o));l+=36)k=c-f,v=36-f,S.push(p(w(f+k%v,0))),c=d(k/v);S.push(p(w(c,0))),o=_(n,g,r==i),n=0,++r}++n,++t}return S.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:v},decode:k,encode:S,toASCII:function(e){return g(e,(function(e){return l.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return g(e,(function(e){return c.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(66)(e),n(11))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(69),t.encode=t.stringify=n(70)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,b=e[l].replace(a,"%20"),m=b.indexOf(n);m>=0?(f=b.substr(0,m),h=b.substr(m+1)):(f=b,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";n.r(t);var r=n(27),i=n.n(r),o=n(28),s=n.n(o);n(29);const a={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},u={};for(const e in a)a.hasOwnProperty(e)&&(u[a[e]]=parseInt(e,10));u.BitsPerSample,u.ExtraSamples,u.SampleFormat,u.StripByteCounts,u.StripOffsets,u.StripRowCounts,u.TileByteCounts,u.TileOffsets;const c={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},l={};for(const e in c)c.hasOwnProperty(e)&&(l[c[e]]=parseInt(e,10));const f={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},h={};for(const e in f)f.hasOwnProperty(e)&&(h[f[e]]=parseInt(e,10));function d(e,t){let n=e.length-t,r=0;do{for(let n=t;n>0;n--)e[r+t]+=e[r],r++;n-=t}while(n>0)}function p(e,t,n){let r=0,i=e.length;const o=i/n;for(;i>t;){for(let n=t;n>0;--n)e[r+t]+=e[r],++r;i-=t}const s=e.slice();for(let t=0;t<o;++t)for(let r=0;r<n;++r)e[n*t+r]=s[(n-r-1)*o+t]}class b{decode(e,t){const n=this.decodeBlock(t),r=e.Predictor||1;if(1!==r){const t=!e.StripOffsets;return function(e,t,n,r,i,o){if(!t||1===t)return e;for(let e=0;e<i.length;++e){if(i[e]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[e]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const s=i[0]/8,a=2===o?1:i.length;for(let o=0;o<r&&!(o*a*n*s>=e.byteLength);++o){let r;if(2===t){switch(i[0]){case 8:r=new Uint8Array(e,o*a*n*s,a*n*s);break;case 16:r=new Uint16Array(e,o*a*n*s,a*n*s/2);break;case 32:r=new Uint32Array(e,o*a*n*s,a*n*s/4);break;default:throw new Error(`Predictor 2 not allowed with ${i[0]} bits per sample.`)}d(r,a)}else 3===t&&(r=new Uint8Array(e,o*a*n*s,a*n*s),p(r,a,s))}return e}(n,r,t?e.TileWidth:e.ImageWidth,t?e.TileLength:e.RowsPerStrip||e.ImageLength,e.BitsPerSample,e.PlanarConfiguration)}return n}}class m extends b{decodeBlock(e){return e}}function g(e,t){for(let n=t.length-1;n>=0;n--)e.push(t[n]);return e}function y(e){const t=new Uint16Array(4093),n=new Uint8Array(4093);for(let e=0;e<=257;e++)t[e]=4096,n[e]=e;let r=258,i=9,o=0;function s(){r=258,i=9}function a(e){const t=function(e,t,n){const r=t%8,i=Math.floor(t/8),o=8-r,s=t+n-8*(i+1);let a=8*(i+2)-(t+n);const u=8*(i+2)-t;if(a=Math.max(0,a),i>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;let c=e[i]&2**(8-r)-1;c<<=n-o;let l=c;if(i+1<e.length){let t=e[i+1]>>>a;t<<=Math.max(0,n-u),l+=t}if(s>8&&i+2<e.length){const r=8*(i+3)-(t+n);l+=e[i+2]>>>r}return l}(e,o,i);return o+=i,t}function u(e,i){return n[r]=i,t[r]=e,r++,r-1}function c(e){const r=[];for(let i=e;4096!==i;i=t[i])r.push(n[i]);return r}const l=[];s();const f=new Uint8Array(e);let h,d=a(f);for(;257!==d;){if(256===d){for(s(),d=a(f);256===d;)d=a(f);if(257===d)break;if(d>256)throw new Error(`corrupted code at scanline ${d}`);g(l,c(d)),h=d}else if(d<r){const e=c(d);g(l,e),u(h,e[e.length-1]),h=d}else{const e=c(h);if(!e)throw new Error(`Bogus entry. Not in dictionary, ${h} / ${r}, position: ${o}`);g(l,e),l.push(e[e.length-1]),u(h,e[e.length-1]),h=d}r+1>=2**i&&(12===i?h=void 0:i++),d=a(f)}return new Uint8Array(l)}class v extends b{decodeBlock(e){return y(e).buffer}}const w=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function _(e,t){let n=0;const r=[];let i=16;for(;i>0&&!e[i-1];)--i;r.push({children:[],index:0});let o,s=r[0];for(let a=0;a<i;a++){for(let i=0;i<e[a];i++){for(s=r.pop(),s.children[s.index]=t[n];s.index>0;)s=r.pop();for(s.index++,r.push(s);r.length<=a;)r.push(o={children:[],index:0}),s.children[s.index]=o.children,s=o;n++}a+1<i&&(r.push(o={children:[],index:0}),s.children[s.index]=o.children,s=o)}return r[0].children}function k(e,t,n,r,i,o,s,a,u){const{mcusPerLine:c,progressive:l}=n,f=t;let h=t,d=0,p=0;function b(){if(p>0)return p--,d>>p&1;if(d=e[h++],255===d){const t=e[h++];if(t)throw new Error(`unexpected marker: ${(d<<8|t).toString(16)}`)}return p=7,d>>>7}function m(e){let t,n=e;for(;null!==(t=b());){if(n=n[t],"number"==typeof n)return n;if("object"!=typeof n)throw new Error("invalid huffman sequence")}return null}function g(e){let t=e,n=0;for(;t>0;){const e=b();if(null===e)return;n=n<<1|e,--t}return n}function y(e){const t=g(e);return t>=1<<e-1?t:t+(-1<<e)+1}let v=0;let _,k=0;function S(e,t,n,r,i){const o=n%c,s=(n/c|0)*e.v+r,a=o*e.h+i;t(e,e.blocks[s][a])}function x(e,t,n){const r=n/e.blocksPerLine|0,i=n%e.blocksPerLine;t(e,e.blocks[r][i])}const C=r.length;let E,O,T,j,R,A;A=l?0===o?0===a?function(e,t){const n=m(e.huffmanTableDC),r=0===n?0:y(n)<<u;e.pred+=r,t[0]=e.pred}:function(e,t){t[0]|=b()<<u}:0===a?function(e,t){if(v>0)return void v--;let n=o;const r=s;for(;n<=r;){const r=m(e.huffmanTableAC),i=15&r,o=r>>4;if(0===i){if(o<15){v=g(o)+(1<<o)-1;break}n+=16}else{n+=o,t[w[n]]=y(i)*(1<<u),n++}}}:function(e,t){let n=o;const r=s;let i=0;for(;n<=r;){const r=w[n],o=t[r]<0?-1:1;switch(k){case 0:{const t=m(e.huffmanTableAC),n=15&t;if(i=t>>4,0===n)i<15?(v=g(i)+(1<<i),k=4):(i=16,k=1);else{if(1!==n)throw new Error("invalid ACn encoding");_=y(n),k=i?2:3}continue}case 1:case 2:t[r]?t[r]+=(b()<<u)*o:(i--,0===i&&(k=2===k?3:0));break;case 3:t[r]?t[r]+=(b()<<u)*o:(t[r]=_<<u,k=0);break;case 4:t[r]&&(t[r]+=(b()<<u)*o)}n++}4===k&&(v--,0===v&&(k=0))}:function(e,t){const n=m(e.huffmanTableDC),r=0===n?0:y(n);e.pred+=r,t[0]=e.pred;let i=1;for(;i<64;){const n=m(e.huffmanTableAC),r=15&n,o=n>>4;if(0===r){if(o<15)break;i+=16}else{i+=o,t[w[i]]=y(r),i++}}};let P,L,M=0;L=1===C?r[0].blocksPerLine*r[0].blocksPerColumn:c*n.mcusPerColumn;const F=i||L;for(;M<L;){for(O=0;O<C;O++)r[O].pred=0;if(v=0,1===C)for(E=r[0],R=0;R<F;R++)x(E,A,M),M++;else for(R=0;R<F;R++){for(O=0;O<C;O++){E=r[O];const{h:e,v:t}=E;for(T=0;T<t;T++)for(j=0;j<e;j++)S(E,A,M,T,j)}if(M++,M===L)break}if(p=0,P=e[h]<<8|e[h+1],P<65280)throw new Error("marker was not found");if(!(P>=65488&&P<=65495))break;h+=2}return h-f}function S(e,t){const n=[],{blocksPerLine:r,blocksPerColumn:i}=t,o=r<<3,s=new Int32Array(64),a=new Uint8Array(64);function u(e,n,r){const i=t.quantizationTable;let o,s,a,u,c,l,f,h,d;const p=r;let b;for(b=0;b<64;b++)p[b]=e[b]*i[b];for(b=0;b<8;++b){const e=8*b;0!==p[1+e]||0!==p[2+e]||0!==p[3+e]||0!==p[4+e]||0!==p[5+e]||0!==p[6+e]||0!==p[7+e]?(o=5793*p[0+e]+128>>8,s=5793*p[4+e]+128>>8,a=p[2+e],u=p[6+e],c=2896*(p[1+e]-p[7+e])+128>>8,h=2896*(p[1+e]+p[7+e])+128>>8,l=p[3+e]<<4,f=p[5+e]<<4,d=o-s+1>>1,o=o+s+1>>1,s=d,d=3784*a+1567*u+128>>8,a=1567*a-3784*u+128>>8,u=d,d=c-f+1>>1,c=c+f+1>>1,f=d,d=h+l+1>>1,l=h-l+1>>1,h=d,d=o-u+1>>1,o=o+u+1>>1,u=d,d=s-a+1>>1,s=s+a+1>>1,a=d,d=2276*c+3406*h+2048>>12,c=3406*c-2276*h+2048>>12,h=d,d=799*l+4017*f+2048>>12,l=4017*l-799*f+2048>>12,f=d,p[0+e]=o+h,p[7+e]=o-h,p[1+e]=s+f,p[6+e]=s-f,p[2+e]=a+l,p[5+e]=a-l,p[3+e]=u+c,p[4+e]=u-c):(d=5793*p[0+e]+512>>10,p[0+e]=d,p[1+e]=d,p[2+e]=d,p[3+e]=d,p[4+e]=d,p[5+e]=d,p[6+e]=d,p[7+e]=d)}for(b=0;b<8;++b){const e=b;0!==p[8+e]||0!==p[16+e]||0!==p[24+e]||0!==p[32+e]||0!==p[40+e]||0!==p[48+e]||0!==p[56+e]?(o=5793*p[0+e]+2048>>12,s=5793*p[32+e]+2048>>12,a=p[16+e],u=p[48+e],c=2896*(p[8+e]-p[56+e])+2048>>12,h=2896*(p[8+e]+p[56+e])+2048>>12,l=p[24+e],f=p[40+e],d=o-s+1>>1,o=o+s+1>>1,s=d,d=3784*a+1567*u+2048>>12,a=1567*a-3784*u+2048>>12,u=d,d=c-f+1>>1,c=c+f+1>>1,f=d,d=h+l+1>>1,l=h-l+1>>1,h=d,d=o-u+1>>1,o=o+u+1>>1,u=d,d=s-a+1>>1,s=s+a+1>>1,a=d,d=2276*c+3406*h+2048>>12,c=3406*c-2276*h+2048>>12,h=d,d=799*l+4017*f+2048>>12,l=4017*l-799*f+2048>>12,f=d,p[0+e]=o+h,p[56+e]=o-h,p[8+e]=s+f,p[48+e]=s-f,p[16+e]=a+l,p[40+e]=a-l,p[24+e]=u+c,p[32+e]=u-c):(d=5793*r[b+0]+8192>>14,p[0+e]=d,p[8+e]=d,p[16+e]=d,p[24+e]=d,p[32+e]=d,p[40+e]=d,p[48+e]=d,p[56+e]=d)}for(b=0;b<64;++b){const e=128+(p[b]+8>>4);n[b]=e<0?0:e>255?255:e}}for(let e=0;e<i;e++){const i=e<<3;for(let e=0;e<8;e++)n.push(new Uint8Array(o));for(let o=0;o<r;o++){u(t.blocks[e][o],a,s);let r=0;const c=o<<3;for(let e=0;e<8;e++){const t=n[i+e];for(let e=0;e<8;e++)t[c+e]=a[r++]}}}return n}class x{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(e){let t=0;function n(){const n=e[t]<<8|e[t+1];return t+=2,n}function r(){const r=n(),i=e.subarray(t,t+r-2);return t+=i.length,i}function i(e){let t,n,r=0,i=0;for(n in e.components)e.components.hasOwnProperty(n)&&(t=e.components[n],r<t.h&&(r=t.h),i<t.v&&(i=t.v));const o=Math.ceil(e.samplesPerLine/8/r),s=Math.ceil(e.scanLines/8/i);for(n in e.components)if(e.components.hasOwnProperty(n)){t=e.components[n];const a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/r),u=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),c=o*t.h,l=s*t.v,f=[];for(let e=0;e<l;e++){const e=[];for(let t=0;t<c;t++)e.push(new Int32Array(64));f.push(e)}t.blocksPerLine=a,t.blocksPerColumn=u,t.blocks=f}e.maxH=r,e.maxV=i,e.mcusPerLine=o,e.mcusPerColumn=s}let o=n();if(65496!==o)throw new Error("SOI not found");for(o=n();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const e=r();65504===o&&74===e[0]&&70===e[1]&&73===e[2]&&70===e[3]&&0===e[4]&&(this.jfif={version:{major:e[5],minor:e[6]},densityUnits:e[7],xDensity:e[8]<<8|e[9],yDensity:e[10]<<8|e[11],thumbWidth:e[12],thumbHeight:e[13],thumbData:e.subarray(14,14+3*e[12]*e[13])}),65518===o&&65===e[0]&&100===e[1]&&111===e[2]&&98===e[3]&&101===e[4]&&0===e[5]&&(this.adobe={version:e[6],flags0:e[7]<<8|e[8],flags1:e[9]<<8|e[10],transformCode:e[11]});break}case 65499:{const r=n()+t-2;for(;t<r;){const r=e[t++],i=new Int32Array(64);if(r>>4==0)for(let n=0;n<64;n++){i[w[n]]=e[t++]}else{if(r>>4!=1)throw new Error("DQT: invalid table spec");for(let e=0;e<64;e++){i[w[e]]=n()}}this.quantizationTables[15&r]=i}break}case 65472:case 65473:case 65474:{n();const r={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:n(),samplesPerLine:n(),components:{},componentsOrder:[]},s=e[t++];let a;for(let n=0;n<s;n++){a=e[t];const n=e[t+1]>>4,i=15&e[t+1],o=e[t+2];r.componentsOrder.push(a),r.components[a]={h:n,v:i,quantizationIdx:o},t+=3}i(r),this.frames.push(r);break}case 65476:{const r=n();for(let n=2;n<r;){const r=e[t++],i=new Uint8Array(16);let o=0;for(let n=0;n<16;n++,t++)i[n]=e[t],o+=i[n];const s=new Uint8Array(o);for(let n=0;n<o;n++,t++)s[n]=e[t];n+=17+o,r>>4==0?this.huffmanTablesDC[15&r]=_(i,s):this.huffmanTablesAC[15&r]=_(i,s)}break}case 65501:n(),this.resetInterval=n();break;case 65498:{n();const r=e[t++],i=[],o=this.frames[0];for(let n=0;n<r;n++){const n=o.components[e[t++]],r=e[t++];n.huffmanTableDC=this.huffmanTablesDC[r>>4],n.huffmanTableAC=this.huffmanTablesAC[15&r],i.push(n)}const s=e[t++],a=e[t++],u=e[t++],c=k(e,t,o,i,this.resetInterval,s,a,u>>4,15&u);t+=c;break}case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error(`unknown JPEG marker ${o.toString(16)}`)}o=n()}}getResult(){const{frames:e}=this;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let e=0;e<this.frames.length;e++){const t=this.frames[e].components;for(const e of Object.keys(t))t[e].quantizationTable=this.quantizationTables[t[e].quantizationIdx],delete t[e].quantizationIdx}const t=e[0],{components:n,componentsOrder:r}=t,i=[],o=t.samplesPerLine,s=t.scanLines;for(let e=0;e<r.length;e++){const o=n[r[e]];i.push({lines:S(0,o),scaleX:o.h/t.maxH,scaleY:o.v/t.maxV})}const a=new Uint8Array(o*s*i.length);let u=0;for(let e=0;e<s;++e)for(let t=0;t<o;++t)for(let n=0;n<i.length;++n){const r=i[n];a[u]=r.lines[0|e*r.scaleY][0|t*r.scaleX],++u}return a}}class C extends b{constructor(e){super(),this.reader=new x,e.JPEGTables&&this.reader.parse(e.JPEGTables)}decodeBlock(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}var E=n(30);class O extends b{decodeBlock(e){return Object(E.inflate)(new Uint8Array(e)).buffer}}class T extends b{decodeBlock(e){const t=new DataView(e),n=[];for(let r=0;r<e.byteLength;++r){let e=t.getInt8(r);if(e<0){const i=t.getUint8(r+1);e=-e;for(let t=0;t<=e;++t)n.push(i);r+=1}else{for(let i=0;i<=e;++i)n.push(t.getUint8(r+i+1));r+=e+1}}return new Uint8Array(n).buffer}}function j(e){switch(e.Compression){case void 0:case 1:return new m;case 5:return new v;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new C(e);case 8:case 32946:return new O;case 32773:return new T;default:throw new Error(`Unknown compression method identifier: ${e.Compression}`)}}let R;function A(){return R||(R=function(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);if(t)return(""+t[0]).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/,"$1")+"/"}return"/"}()),R}const P="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,L=e=>/^(file|https?:)?\\/\\//i.test(e);function M(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}"undefined"==typeof Worker||Worker;var F,N=n(3),D=n.n(N),I=n(31),U=n(73),B=n(8);function G(e){return Promise.all(e.map(e=>{const t=e=>({status:"fulfilled",value:e}),n=e=>({status:"rejected",reason:e}),r=Promise.resolve(e);try{return r.then(t,n)}catch(e){return Promise.reject(e)}}))}!function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"}(F||(F={}));var z=n(1);function q(e){throw Error(e)}const K={errors:e=>e[z.a]||q("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:e=>e[z.b]||q("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:e=>e[z.c]()};var W=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};let H=1;class Z{constructor(e,t){this.eventSubject=new I.a,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const n="number"==typeof t?{size:t}:t||{},{size:r=P}=n;var i;this.debug=D()(`threads:pool:${i=n.name||String(H++),i.replace(/\\W/g," ").trim().replace(/\\s+/g,"-")}`),this.options=n,this.workers=function(e,t){return function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}(t).map(()=>({init:e(),runningTasks:[]}))}(e,r),this.eventObservable=Object(U.a)(B.a.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:F.initialized,size:this.workers.length}),e=>{this.debug("Error while initializing pool worker:",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){const{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return W(this,void 0,void 0,(function*(){const n=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${n}...`),this.eventSubject.next({type:F.taskStart,taskID:t.id,workerID:n});try{const r=yield t.run(yield e.init);this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:F.taskCompleted,returnValue:r,taskID:t.id,workerID:n})}catch(e){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:F.taskFailed,taskID:t.id,error:e,workerID:n})}}))}run(e,t){return W(this,void 0,void 0,(function*(){const n=(()=>W(this,void 0,void 0,(function*(){var r;yield(r=0,new Promise(e=>setTimeout(e,r)));try{yield this.runPoolTask(e,t)}finally{e.runningTasks=e.runningTasks.filter(e=>e!==n),this.isClosing||this.scheduleWork()}})))();e.runningTasks.push(n)}))}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const e=this.findIdlingWorker();if(!e)return;const t=this.taskQueue.shift();if(!t)return this.debug("Task queue is empty"),void this.eventSubject.next({type:F.taskQueueDrained});this.run(e,t)}taskCompletion(e){return new Promise((t,n)=>{const r=this.events().subscribe(i=>{i.type===F.taskCompleted&&i.taskID===e?(r.unsubscribe(),t(i.returnValue)):i.type===F.taskFailed&&i.taskID===e?(r.unsubscribe(),n(i.error)):i.type===F.terminated&&(r.unsubscribe(),n(Error("Pool has been terminated before task was run.")))})})}settled(e=!1){return W(this,void 0,void 0,(function*(){const t=()=>{return e=this.workers,t=e=>e.runningTasks,e.reduce((e,n)=>[...e,...t(n)],[]);var e,t},n=[],r=this.eventObservable.subscribe(e=>{e.type===F.taskFailed&&n.push(e.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):e&&0===this.taskQueue.length?(yield G(t()),n):(yield new Promise((e,t)=>{const n=this.eventObservable.subscribe({next(t){t.type===F.taskQueueDrained&&(n.unsubscribe(),e())},error:t})}),yield G(t()),r.unsubscribe(),n)}))}completed(e=!1){return W(this,void 0,void 0,(function*(){const t=this.settled(e),n=new Promise((e,n)=>{const r=this.eventObservable.subscribe({next(i){i.type===F.taskQueueDrained?(r.unsubscribe(),e(t)):i.type===F.taskFailed&&(r.unsubscribe(),n(i.error))},error:n})}),r=yield Promise.race([t,n]);if(r.length>0)throw r[0]}))}events(){return this.eventObservable}queue(e){const{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const n=()=>this.taskCompletion(i.id);let r;const i={id:this.nextTaskID++,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(e=>e!==i),this.eventSubject.next({type:F.taskCanceled,taskID:i.id}))},get then(){if(!r){const e=n();r=e.then.bind(e)}return r}};if(this.taskQueue.length>=t)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won\'t finish, thus blocking the pool.");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:F.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(e){return W(this,void 0,void 0,(function*(){this.isClosing=!0,e||(yield this.completed(!0)),this.eventSubject.next({type:F.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>W(this,void 0,void 0,(function*(){return K.terminate(yield e.init)}))))}))}}function V(e,t){return new Z(e,t)}Z.EventType=F,V.EventType=F;n(26);"undefined"!=typeof navigator&&navigator.hardwareConcurrency;n(0),n(34),n(15);function $(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function Y(e){const t={};for(const n in e)if(e.hasOwnProperty(n)){t[e[n]]=n}return t}function Q(e,t){const n=[];for(let r=0;r<e;r++)n.push(t(r));return n}const J=Y(a),X=Y(f),ee={};$(ee,J),$(ee,X);Y(c);const te={nextZero:(e,t)=>{let n=t;for(;0!==e[n];)n++;return n},readUshort:(e,t)=>e[t]<<8|e[t+1],readShort:(e,t)=>{const n=te.ui8;return n[0]=e[t+1],n[1]=e[t+0],te.i16[0]},readInt:(e,t)=>{const n=te.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],te.i32[0]},readUint:(e,t)=>{const n=te.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],te.ui32[0]},readASCII:(e,t,n)=>n.map(n=>String.fromCharCode(e[t+n])).join(""),readFloat:(e,t)=>{const n=te.ui8;return Q(4,r=>{n[r]=e[t+3-r]}),te.fl32[0]},readDouble:(e,t)=>{const n=te.ui8;return Q(8,r=>{n[r]=e[t+7-r]}),te.fl64[0]},writeUshort:(e,t,n)=>{e[t]=n>>8&255,e[t+1]=255&n},writeUint:(e,t,n)=>{e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=n>>0&255},writeASCII:(e,t,n)=>{Q(n.length,r=>{e[t+r]=n.charCodeAt(r)})},ui8:new Uint8Array(8)};te.fl64=new Float64Array(te.ui8.buffer),te.writeDouble=(e,t,n)=>{te.fl64[0]=n,Q(8,n=>{e[t+n]=te.ui8[7-n]})};Error;function ne(e,t,n){var r=function(e){return j(e)}(t).decode(t,n);e.postMessage([r],[r])}"undefined"!=typeof self&&self.addEventListener("message",(function(e){var t=s()(e.data),n=t[0],r=t.slice(1);switch(n){case"decode":ne.apply(void 0,[self].concat(i()(r)))}}))},,function(e,t,n){"use strict";var r=n(8),i=n(31);var o=function(e){"function"==typeof e?e():e&&"function"==typeof e.unsubscribe&&e.unsubscribe()};t.a=function(e){const t=new i.a;let n,s=0;return new r.a(r=>{n||(n=e.subscribe(t));const i=t.subscribe(r);return s++,()=>{s--,i.unsubscribe(),0===s&&(o(n),n=void 0)}})}}]);\n//# sourceMappingURL=cbf2dc001846ff1ba8e4.decoder.worker.js.map',null)}},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},function(e,t){e.exports=require("fast-xml-parser")},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"DTYPE_VALUES",(function(){return A})),n.d(t,"MAX_SLIDERS_AND_CHANNELS",(function(){return P})),n.d(t,"ScaleBarLayer",(function(){return pe})),n.d(t,"VivViewerLayer",(function(){return ie})),n.d(t,"VivViewer",(function(){return Se})),n.d(t,"VivView",(function(){return ke})),n.d(t,"OverviewView",(function(){return Ae})),n.d(t,"PictureInPictureViewer",(function(){return Le})),n.d(t,"SideBySideView",(function(){return je})),n.d(t,"getChannelStats",(function(){return $})),n.d(t,"SideBySideViewer",(function(){return Ne})),n.d(t,"DetailView",(function(){return Oe})),n.d(t,"StaticImageLayer",(function(){return ne})),n.d(t,"ZarrLoader",(function(){return rn})),n.d(t,"OMETiffLoader",(function(){return fn})),n.d(t,"createOMETiffLoader",(function(){return xn})),n.d(t,"createZarrLoader",(function(){return vn})),n.d(t,"OMEZarrReader",(function(){return dn}));var r=n(0),o=n.n(r),i=n(5),s=n.n(i),a=n(2),c=n.n(a),l=n(3),u=n.n(l),f=n(7),h=n.n(f),p=n(8),d=n.n(p),v=n(1),m=n.n(v),x=n(4),g=n(16),y=n.n(g),b=n(9),_=n.n(b),w=n(22),S=n(13),k=n.n(S),C=n(6),O=n.n(C),E=n(17),T=[0,0,0],P=6,A={"<u1":{format:O.a.R8UI,dataFormat:O.a.RED_INTEGER,type:O.a.UNSIGNED_BYTE,max:Math.pow(2,8)-1,TypedArray:Uint8Array},"<u2":{format:O.a.R16UI,dataFormat:O.a.RED_INTEGER,type:O.a.UNSIGNED_SHORT,max:Math.pow(2,16)-1,TypedArray:Uint16Array},"<u4":{format:O.a.R32UI,dataFormat:O.a.RED_INTEGER,type:O.a.UNSIGNED_INT,max:Math.pow(2,32)-1,TypedArray:Uint32Array},"<f4":{format:O.a.R32F,dataFormat:O.a.RED,type:O.a.FLOAT,max:Math.pow(2,31)-1,TypedArray:Float32Array}};function R(e){return k()(Array(e).keys())}function j(e,t,n){for(var r=0;r<n;r+=1)e.push(t);return e}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var M={pickable:!0,coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,channelData:{type:"array",value:{},async:!0},bounds:{type:"array",value:[0,0,1,1],compare:!0},colorValues:{type:"array",value:[],compare:!0},sliderValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},opacity:{type:"number",value:1,compare:!0},dtype:{type:"string",value:"<u2",compare:!0},colormap:{type:"string",value:"",compare:!0}},F=function(e){h()(n,e);var t=L(n);function n(){return c()(this,n),t.apply(this,arguments)}return u()(n,[{key:"getShaders",value:function(){var e=this.props,t=e.colormap,r=e.dtype,o=t?"#version 300 es\n#define SHADER_NAME xr-layer-fragment-shader\nprecision highp float;\nprecision highp int;\nprecision highp usampler2D;\n#define GLSLIFY 1\n\nvec4 jet (float x_17) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\n  const float e1 = 0.125;\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\n  const float e2 = 0.375;\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\n  const float e3 = 0.625;\n  const vec4 v3 = vec4(1,1,0,1);\n  const float e4 = 0.875;\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\n  const float e5 = 1.0;\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\n  float a0 = smoothstep(e0,e1,x_17);\n  float a1 = smoothstep(e1,e2,x_17);\n  float a2 = smoothstep(e2,e3,x_17);\n  float a3 = smoothstep(e3,e4,x_17);\n  float a4 = smoothstep(e4,e5,x_17);\n  return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),\n    max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),\n    max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),\n    max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)\n  ))));\n}\n\nvec4 hsv (float x_16) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(1,0,0,1);\n  const float e1 = 0.169;\n  const vec4 v1 = vec4(0.9921568627450981,1,0.00784313725490196,1);\n  const float e2 = 0.173;\n  const vec4 v2 = vec4(0.9686274509803922,1,0.00784313725490196,1);\n  const float e3 = 0.337;\n  const vec4 v3 = vec4(0,0.9882352941176471,0.01568627450980392,1);\n  const float e4 = 0.341;\n  const vec4 v4 = vec4(0,0.9882352941176471,0.0392156862745098,1);\n  const float e5 = 0.506;\n  const vec4 v5 = vec4(0.00392156862745098,0.9764705882352941,1,1);\n  const float e6 = 0.671;\n  const vec4 v6 = vec4(0.00784313725490196,0,0.9921568627450981,1);\n  const float e7 = 0.675;\n  const vec4 v7 = vec4(0.03137254901960784,0,0.9921568627450981,1);\n  const float e8 = 0.839;\n  const vec4 v8 = vec4(1,0,0.984313725490196,1);\n  const float e9 = 0.843;\n  const vec4 v9 = vec4(1,0,0.9607843137254902,1);\n  const float e10 = 1.0;\n  const vec4 v10 = vec4(1,0,0.023529411764705882,1);\n  float a0 = smoothstep(e0,e1,x_16);\n  float a1 = smoothstep(e1,e2,x_16);\n  float a2 = smoothstep(e2,e3,x_16);\n  float a3 = smoothstep(e3,e4,x_16);\n  float a4 = smoothstep(e4,e5,x_16);\n  float a5 = smoothstep(e5,e6,x_16);\n  float a6 = smoothstep(e6,e7,x_16);\n  float a7 = smoothstep(e7,e8,x_16);\n  float a8 = smoothstep(e8,e9,x_16);\n  float a9 = smoothstep(e9,e10,x_16);\n  return max(mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1),\n    max(mix(v1,v2,a1)*step(e1,x_16)*step(x_16,e2),\n    max(mix(v2,v3,a2)*step(e2,x_16)*step(x_16,e3),\n    max(mix(v3,v4,a3)*step(e3,x_16)*step(x_16,e4),\n    max(mix(v4,v5,a4)*step(e4,x_16)*step(x_16,e5),\n    max(mix(v5,v6,a5)*step(e5,x_16)*step(x_16,e6),\n    max(mix(v6,v7,a6)*step(e6,x_16)*step(x_16,e7),\n    max(mix(v7,v8,a7)*step(e7,x_16)*step(x_16,e8),\n    max(mix(v8,v9,a8)*step(e8,x_16)*step(x_16,e9),mix(v9,v10,a9)*step(e9,x_16)*step(x_16,e10)\n  )))))))));\n}\n\nvec4 hot (float x_13) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0,1);\n  const float e1 = 0.3;\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\n  const float e2 = 0.6;\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\n  const float e3 = 1.0;\n  const vec4 v3 = vec4(1,1,1,1);\n  float a0 = smoothstep(e0,e1,x_13);\n  float a1 = smoothstep(e1,e2,x_13);\n  float a2 = smoothstep(e2,e3,x_13);\n  return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),\n    max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)\n  ));\n}\n\nvec4 cool (float x_18) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\n  float a0 = smoothstep(e0,e1,x_18);\n  float a1 = smoothstep(e1,e2,x_18);\n  float a2 = smoothstep(e2,e3,x_18);\n  float a3 = smoothstep(e3,e4,x_18);\n  float a4 = smoothstep(e4,e5,x_18);\n  float a5 = smoothstep(e5,e6,x_18);\n  float a6 = smoothstep(e6,e7,x_18);\n  float a7 = smoothstep(e7,e8,x_18);\n  return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),\n    max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),\n    max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),\n    max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),\n    max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),\n    max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),\n    max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8)\n  )))))));\n}\n\nvec4 spring (float x_24) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(1,0,1,1);\n  const float e1 = 1.0;\n  const vec4 v1 = vec4(1,1,0,1);\n  float a0 = smoothstep(e0,e1,x_24);\n  return mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1);\n}\n\nvec4 summer (float x_5) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\n  const float e1 = 1.0;\n  const vec4 v1 = vec4(1,1,0.4,1);\n  float a0 = smoothstep(e0,e1,x_5);\n  return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);\n}\n\nvec4 autumn (float x_25) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(1,0,0,1);\n  const float e1 = 1.0;\n  const vec4 v1 = vec4(1,1,0,1);\n  float a0 = smoothstep(e0,e1,x_25);\n  return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);\n}\n\nvec4 winter (float x_12) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,1,1);\n  const float e1 = 1.0;\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\n  float a0 = smoothstep(e0,e1,x_12);\n  return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);\n}\n\nvec4 bone (float x_10) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0,1);\n  const float e1 = 0.376;\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\n  const float e2 = 0.753;\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\n  const float e3 = 1.0;\n  const vec4 v3 = vec4(1,1,1,1);\n  float a0 = smoothstep(e0,e1,x_10);\n  float a1 = smoothstep(e1,e2,x_10);\n  float a2 = smoothstep(e2,e3,x_10);\n  return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),\n    max(mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2),mix(v2,v3,a2)*step(e2,x_10)*step(x_10,e3)\n  ));\n}\n\nvec4 copper (float x_15) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0,1);\n  const float e1 = 0.804;\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\n  const float e2 = 1.0;\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\n  float a0 = smoothstep(e0,e1,x_15);\n  float a1 = smoothstep(e1,e2,x_15);\n  return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2)\n  );\n}\n\nvec4 greys (float x_4) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0,1);\n  const float e1 = 1.0;\n  const vec4 v1 = vec4(1,1,1,1);\n  float a0 = smoothstep(e0,e1,x_4);\n  return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);\n}\n\nvec4 yignbu (float x_32) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);\n  const float e1 = 0.125;\n  const vec4 v1 = vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);\n  const float e3 = 0.375;\n  const vec4 v3 = vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);\n  const float e5 = 0.625;\n  const vec4 v5 = vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);\n  const float e7 = 0.875;\n  const vec4 v7 = vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(1,1,0.8509803921568627,1);\n  float a0 = smoothstep(e0,e1,x_32);\n  float a1 = smoothstep(e1,e2,x_32);\n  float a2 = smoothstep(e2,e3,x_32);\n  float a3 = smoothstep(e3,e4,x_32);\n  float a4 = smoothstep(e4,e5,x_32);\n  float a5 = smoothstep(e5,e6,x_32);\n  float a6 = smoothstep(e6,e7,x_32);\n  float a7 = smoothstep(e7,e8,x_32);\n  return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),\n    max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),\n    max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),\n    max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),\n    max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),\n    max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),\n    max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8)\n  )))))));\n}\n\nvec4 greens (float x_41) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0.26666666666666666,0.10588235294117647,1);\n  const float e1 = 0.125;\n  const vec4 v1 = vec4(0,0.42745098039215684,0.17254901960784313,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);\n  const float e3 = 0.375;\n  const vec4 v3 = vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);\n  const float e5 = 0.625;\n  const vec4 v5 = vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);\n  const float e7 = 0.875;\n  const vec4 v7 = vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);\n  float a0 = smoothstep(e0,e1,x_41);\n  float a1 = smoothstep(e1,e2,x_41);\n  float a2 = smoothstep(e2,e3,x_41);\n  float a3 = smoothstep(e3,e4,x_41);\n  float a4 = smoothstep(e4,e5,x_41);\n  float a5 = smoothstep(e5,e6,x_41);\n  float a6 = smoothstep(e6,e7,x_41);\n  float a7 = smoothstep(e7,e8,x_41);\n  return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),\n    max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),\n    max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),\n    max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),\n    max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),\n    max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),\n    max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8)\n  )))))));\n}\n\nvec4 yiorrd (float x_23) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.5019607843137255,0,0.14901960784313725,1);\n  const float e1 = 0.125;\n  const vec4 v1 = vec4(0.7411764705882353,0,0.14901960784313725,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);\n  const float e3 = 0.375;\n  const vec4 v3 = vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);\n  const float e5 = 0.625;\n  const vec4 v5 = vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);\n  const float e7 = 0.875;\n  const vec4 v7 = vec4(1,0.9294117647058824,0.6274509803921569,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(1,1,0.8,1);\n  float a0 = smoothstep(e0,e1,x_23);\n  float a1 = smoothstep(e1,e2,x_23);\n  float a2 = smoothstep(e2,e3,x_23);\n  float a3 = smoothstep(e3,e4,x_23);\n  float a4 = smoothstep(e4,e5,x_23);\n  float a5 = smoothstep(e5,e6,x_23);\n  float a6 = smoothstep(e6,e7,x_23);\n  float a7 = smoothstep(e7,e8,x_23);\n  return max(mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1),\n    max(mix(v1,v2,a1)*step(e1,x_23)*step(x_23,e2),\n    max(mix(v2,v3,a2)*step(e2,x_23)*step(x_23,e3),\n    max(mix(v3,v4,a3)*step(e3,x_23)*step(x_23,e4),\n    max(mix(v4,v5,a4)*step(e4,x_23)*step(x_23,e5),\n    max(mix(v5,v6,a5)*step(e5,x_23)*step(x_23,e6),\n    max(mix(v6,v7,a6)*step(e6,x_23)*step(x_23,e7),mix(v7,v8,a7)*step(e7,x_23)*step(x_23,e8)\n  )))))));\n}\n\nvec4 bluered (float x_34) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,1,1);\n  const float e1 = 1.0;\n  const vec4 v1 = vec4(1,0,0,1);\n  float a0 = smoothstep(e0,e1,x_34);\n  return mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1);\n}\n\nvec4 rdbu (float x_1) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);\n  const float e1 = 0.35;\n  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);\n  const float e2 = 0.5;\n  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);\n  const float e3 = 0.6;\n  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);\n  const float e4 = 0.7;\n  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);\n  const float e5 = 1.0;\n  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);\n  float a0 = smoothstep(e0,e1,x_1);\n  float a1 = smoothstep(e1,e2,x_1);\n  float a2 = smoothstep(e2,e3,x_1);\n  float a3 = smoothstep(e3,e4,x_1);\n  float a4 = smoothstep(e4,e5,x_1);\n  return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),\n    max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),\n    max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),\n    max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)\n  ))));\n}\n\nvec4 picnic (float x_42) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,1,1);\n  const float e1 = 0.1;\n  const vec4 v1 = vec4(0.2,0.6,1,1);\n  const float e2 = 0.2;\n  const vec4 v2 = vec4(0.4,0.8,1,1);\n  const float e3 = 0.3;\n  const vec4 v3 = vec4(0.6,0.8,1,1);\n  const float e4 = 0.4;\n  const vec4 v4 = vec4(0.8,0.8,1,1);\n  const float e5 = 0.5;\n  const vec4 v5 = vec4(1,1,1,1);\n  const float e6 = 0.6;\n  const vec4 v6 = vec4(1,0.8,1,1);\n  const float e7 = 0.7;\n  const vec4 v7 = vec4(1,0.6,1,1);\n  const float e8 = 0.8;\n  const vec4 v8 = vec4(1,0.4,0.8,1);\n  const float e9 = 0.9;\n  const vec4 v9 = vec4(1,0.4,0.4,1);\n  const float e10 = 1.0;\n  const vec4 v10 = vec4(1,0,0,1);\n  float a0 = smoothstep(e0,e1,x_42);\n  float a1 = smoothstep(e1,e2,x_42);\n  float a2 = smoothstep(e2,e3,x_42);\n  float a3 = smoothstep(e3,e4,x_42);\n  float a4 = smoothstep(e4,e5,x_42);\n  float a5 = smoothstep(e5,e6,x_42);\n  float a6 = smoothstep(e6,e7,x_42);\n  float a7 = smoothstep(e7,e8,x_42);\n  float a8 = smoothstep(e8,e9,x_42);\n  float a9 = smoothstep(e9,e10,x_42);\n  return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),\n    max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),\n    max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),\n    max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),\n    max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),\n    max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),\n    max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),\n    max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),\n    max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10)\n  )))))))));\n}\n\nvec4 rainbow (float x_31) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.5882352941176471,0,0.35294117647058826,1);\n  const float e1 = 0.125;\n  const vec4 v1 = vec4(0,0,0.7843137254901961,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0,0.09803921568627451,1,1);\n  const float e3 = 0.375;\n  const vec4 v3 = vec4(0,0.596078431372549,1,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.17254901960784313,1,0.5882352941176471,1);\n  const float e5 = 0.625;\n  const vec4 v5 = vec4(0.592156862745098,1,0,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(1,0.9176470588235294,0,1);\n  const float e7 = 0.875;\n  const vec4 v7 = vec4(1,0.43529411764705883,0,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(1,0,0,1);\n  float a0 = smoothstep(e0,e1,x_31);\n  float a1 = smoothstep(e1,e2,x_31);\n  float a2 = smoothstep(e2,e3,x_31);\n  float a3 = smoothstep(e3,e4,x_31);\n  float a4 = smoothstep(e4,e5,x_31);\n  float a5 = smoothstep(e5,e6,x_31);\n  float a6 = smoothstep(e6,e7,x_31);\n  float a7 = smoothstep(e7,e8,x_31);\n  return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),\n    max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),\n    max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),\n    max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),\n    max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),\n    max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),\n    max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8)\n  )))))));\n}\n\nvec4 portland (float x_38) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.047058823529411764,0.2,0.5137254901960784,1);\n  const float e1 = 0.25;\n  const vec4 v1 = vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);\n  const float e2 = 0.5;\n  const vec4 v2 = vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);\n  const float e3 = 0.75;\n  const vec4 v3 = vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);\n  const float e4 = 1.0;\n  const vec4 v4 = vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);\n  float a0 = smoothstep(e0,e1,x_38);\n  float a1 = smoothstep(e1,e2,x_38);\n  float a2 = smoothstep(e2,e3,x_38);\n  float a3 = smoothstep(e3,e4,x_38);\n  return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),\n    max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),\n    max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4)\n  )));\n}\n\nvec4 blackbody (float x_21) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0,1);\n  const float e1 = 0.2;\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\n  const float e2 = 0.4;\n  const vec4 v2 = vec4(0.9019607843137255,0.8235294117647058,0,1);\n  const float e3 = 0.7;\n  const vec4 v3 = vec4(1,1,1,1);\n  const float e4 = 1.0;\n  const vec4 v4 = vec4(0.6274509803921569,0.7843137254901961,1,1);\n  float a0 = smoothstep(e0,e1,x_21);\n  float a1 = smoothstep(e1,e2,x_21);\n  float a2 = smoothstep(e2,e3,x_21);\n  float a3 = smoothstep(e3,e4,x_21);\n  return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),\n    max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),\n    max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4)\n  )));\n}\n\nvec4 earth (float x_0) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0.5098039215686274,1);\n  const float e1 = 0.1;\n  const vec4 v1 = vec4(0,0.7058823529411765,0.7058823529411765,1);\n  const float e2 = 0.2;\n  const vec4 v2 = vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);\n  const float e3 = 0.4;\n  const vec4 v3 = vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);\n  const float e4 = 0.6;\n  const vec4 v4 = vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);\n  const float e5 = 1.0;\n  const vec4 v5 = vec4(1,1,1,1);\n  float a0 = smoothstep(e0,e1,x_0);\n  float a1 = smoothstep(e1,e2,x_0);\n  float a2 = smoothstep(e2,e3,x_0);\n  float a3 = smoothstep(e3,e4,x_0);\n  float a4 = smoothstep(e4,e5,x_0);\n  return max(mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1),\n    max(mix(v1,v2,a1)*step(e1,x_0)*step(x_0,e2),\n    max(mix(v2,v3,a2)*step(e2,x_0)*step(x_0,e3),\n    max(mix(v3,v4,a3)*step(e3,x_0)*step(x_0,e4),mix(v4,v5,a4)*step(e4,x_0)*step(x_0,e5)\n  ))));\n}\n\nvec4 electric (float x_9) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0,1);\n  const float e1 = 0.15;\n  const vec4 v1 = vec4(0.11764705882352941,0,0.39215686274509803,1);\n  const float e2 = 0.4;\n  const vec4 v2 = vec4(0.47058823529411764,0,0.39215686274509803,1);\n  const float e3 = 0.6;\n  const vec4 v3 = vec4(0.6274509803921569,0.35294117647058826,0,1);\n  const float e4 = 0.8;\n  const vec4 v4 = vec4(0.9019607843137255,0.7843137254901961,0,1);\n  const float e5 = 1.0;\n  const vec4 v5 = vec4(1,0.9803921568627451,0.8627450980392157,1);\n  float a0 = smoothstep(e0,e1,x_9);\n  float a1 = smoothstep(e1,e2,x_9);\n  float a2 = smoothstep(e2,e3,x_9);\n  float a3 = smoothstep(e3,e4,x_9);\n  float a4 = smoothstep(e4,e5,x_9);\n  return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),\n    max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),\n    max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),\n    max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)\n  ))));\n}\n\nvec4 alpha (float x_29) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(1,1,1,0);\n  const float e1 = 1.0;\n  const vec4 v1 = vec4(1,1,1,1);\n  float a0 = smoothstep(e0,e1,x_29);\n  return mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1);\n}\n\nvec4 viridis (float x_3) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\n  float a0 = smoothstep(e0,e1,x_3);\n  float a1 = smoothstep(e1,e2,x_3);\n  float a2 = smoothstep(e2,e3,x_3);\n  float a3 = smoothstep(e3,e4,x_3);\n  float a4 = smoothstep(e4,e5,x_3);\n  float a5 = smoothstep(e5,e6,x_3);\n  float a6 = smoothstep(e6,e7,x_3);\n  float a7 = smoothstep(e7,e8,x_3);\n  return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),\n    max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),\n    max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),\n    max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),\n    max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),\n    max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),\n    max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8)\n  )))))));\n}\n\nvec4 inferno (float x_22) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\n  float a0 = smoothstep(e0,e1,x_22);\n  float a1 = smoothstep(e1,e2,x_22);\n  float a2 = smoothstep(e2,e3,x_22);\n  float a3 = smoothstep(e3,e4,x_22);\n  float a4 = smoothstep(e4,e5,x_22);\n  float a5 = smoothstep(e5,e6,x_22);\n  float a6 = smoothstep(e6,e7,x_22);\n  float a7 = smoothstep(e7,e8,x_22);\n  return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),\n    max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),\n    max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),\n    max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),\n    max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),\n    max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),\n    max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8)\n  )))))));\n}\n\nvec4 magma (float x_30) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\n  float a0 = smoothstep(e0,e1,x_30);\n  float a1 = smoothstep(e1,e2,x_30);\n  float a2 = smoothstep(e2,e3,x_30);\n  float a3 = smoothstep(e3,e4,x_30);\n  float a4 = smoothstep(e4,e5,x_30);\n  float a5 = smoothstep(e5,e6,x_30);\n  float a6 = smoothstep(e6,e7,x_30);\n  float a7 = smoothstep(e7,e8,x_30);\n  return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),\n    max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),\n    max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),\n    max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),\n    max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),\n    max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),\n    max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8)\n  )))))));\n}\n\nvec4 plasma (float x_33) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\n  float a0 = smoothstep(e0,e1,x_33);\n  float a1 = smoothstep(e1,e2,x_33);\n  float a2 = smoothstep(e2,e3,x_33);\n  float a3 = smoothstep(e3,e4,x_33);\n  float a4 = smoothstep(e4,e5,x_33);\n  float a5 = smoothstep(e5,e6,x_33);\n  float a6 = smoothstep(e6,e7,x_33);\n  float a7 = smoothstep(e7,e8,x_33);\n  return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),\n    max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),\n    max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),\n    max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),\n    max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),\n    max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),\n    max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8)\n  )))))));\n}\n\nvec4 warm (float x_14) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.6745098039215687,0,0.7333333333333333,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.8588235294117647,0,0.6666666666666666,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(1,0,0.5098039215686274,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(1,0.24705882352941178,0.2901960784313726,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(1,0.4823529411764706,0,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.9176470588235294,0.6901960784313725,0,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.7450980392156863,0.8941176470588236,0,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\n  float a0 = smoothstep(e0,e1,x_14);\n  float a1 = smoothstep(e1,e2,x_14);\n  float a2 = smoothstep(e2,e3,x_14);\n  float a3 = smoothstep(e3,e4,x_14);\n  float a4 = smoothstep(e4,e5,x_14);\n  float a5 = smoothstep(e5,e6,x_14);\n  float a6 = smoothstep(e6,e7,x_14);\n  float a7 = smoothstep(e7,e8,x_14);\n  return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),\n    max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),\n    max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),\n    max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),\n    max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),\n    max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),\n    max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8)\n  )))))));\n}\n\nvec4 rainbow_soft_4276763523 (float x_43) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\n  const float e1 = 0.1;\n  const vec4 v1 = vec4(0.7803921568627451,0,0.7058823529411765,1);\n  const float e2 = 0.2;\n  const vec4 v2 = vec4(1,0,0.4745098039215686,1);\n  const float e3 = 0.3;\n  const vec4 v3 = vec4(1,0.4235294117647059,0,1);\n  const float e4 = 0.4;\n  const vec4 v4 = vec4(0.8705882352941177,0.7607843137254902,0,1);\n  const float e5 = 0.5;\n  const vec4 v5 = vec4(0.5882352941176471,1,0,1);\n  const float e6 = 0.6;\n  const vec4 v6 = vec4(0,1,0.21568627450980393,1);\n  const float e7 = 0.7;\n  const vec4 v7 = vec4(0,0.9647058823529412,0.5882352941176471,1);\n  const float e8 = 0.8;\n  const vec4 v8 = vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);\n  const float e9 = 0.9;\n  const vec4 v9 = vec4(0.403921568627451,0.2,0.9215686274509803,1);\n  const float e10 = 1.0;\n  const vec4 v10 = vec4(0.48627450980392156,0,0.7294117647058823,1);\n  float a0 = smoothstep(e0,e1,x_43);\n  float a1 = smoothstep(e1,e2,x_43);\n  float a2 = smoothstep(e2,e3,x_43);\n  float a3 = smoothstep(e3,e4,x_43);\n  float a4 = smoothstep(e4,e5,x_43);\n  float a5 = smoothstep(e5,e6,x_43);\n  float a6 = smoothstep(e6,e7,x_43);\n  float a7 = smoothstep(e7,e8,x_43);\n  float a8 = smoothstep(e8,e9,x_43);\n  float a9 = smoothstep(e9,e10,x_43);\n  return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),\n    max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),\n    max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),\n    max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),\n    max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),\n    max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),\n    max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),\n    max(mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8),\n    max(mix(v8,v9,a8)*step(e8,x_43)*step(x_43,e9),mix(v9,v10,a9)*step(e9,x_43)*step(x_43,e10)\n  )))))))));\n}\n\nvec4 bathymetry (float x_36) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9921568627450981,0.996078431372549,0.8,1);\n  float a0 = smoothstep(e0,e1,x_36);\n  float a1 = smoothstep(e1,e2,x_36);\n  float a2 = smoothstep(e2,e3,x_36);\n  float a3 = smoothstep(e3,e4,x_36);\n  float a4 = smoothstep(e4,e5,x_36);\n  float a5 = smoothstep(e5,e6,x_36);\n  float a6 = smoothstep(e6,e7,x_36);\n  float a7 = smoothstep(e7,e8,x_36);\n  return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),\n    max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),\n    max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),\n    max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),\n    max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),\n    max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),\n    max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8)\n  )))))));\n}\n\nvec4 cdom (float x_7) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);\n  float a0 = smoothstep(e0,e1,x_7);\n  float a1 = smoothstep(e1,e2,x_7);\n  float a2 = smoothstep(e2,e3,x_7);\n  float a3 = smoothstep(e3,e4,x_7);\n  float a4 = smoothstep(e4,e5,x_7);\n  float a5 = smoothstep(e5,e6,x_7);\n  float a6 = smoothstep(e6,e7,x_7);\n  float a7 = smoothstep(e7,e8,x_7);\n  return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),\n    max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),\n    max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),\n    max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),\n    max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),\n    max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),\n    max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8)\n  )))))));\n}\n\nvec4 chlorophyll (float x_6) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);\n  float a0 = smoothstep(e0,e1,x_6);\n  float a1 = smoothstep(e1,e2,x_6);\n  float a2 = smoothstep(e2,e3,x_6);\n  float a3 = smoothstep(e3,e4,x_6);\n  float a4 = smoothstep(e4,e5,x_6);\n  float a5 = smoothstep(e5,e6,x_6);\n  float a6 = smoothstep(e6,e7,x_6);\n  float a7 = smoothstep(e7,e8,x_6);\n  return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),\n    max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),\n    max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),\n    max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),\n    max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),\n    max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),\n    max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8)\n  )))))));\n}\n\nvec4 density (float x_19) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\n  float a0 = smoothstep(e0,e1,x_19);\n  float a1 = smoothstep(e1,e2,x_19);\n  float a2 = smoothstep(e2,e3,x_19);\n  float a3 = smoothstep(e3,e4,x_19);\n  float a4 = smoothstep(e4,e5,x_19);\n  float a5 = smoothstep(e5,e6,x_19);\n  float a6 = smoothstep(e6,e7,x_19);\n  float a7 = smoothstep(e7,e8,x_19);\n  return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),\n    max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),\n    max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),\n    max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),\n    max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),\n    max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),\n    max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8)\n  )))))));\n}\n\nvec4 freesurface_blue_3154355989 (float x_35) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);\n  float a0 = smoothstep(e0,e1,x_35);\n  float a1 = smoothstep(e1,e2,x_35);\n  float a2 = smoothstep(e2,e3,x_35);\n  float a3 = smoothstep(e3,e4,x_35);\n  float a4 = smoothstep(e4,e5,x_35);\n  float a5 = smoothstep(e5,e6,x_35);\n  float a6 = smoothstep(e6,e7,x_35);\n  float a7 = smoothstep(e7,e8,x_35);\n  return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),\n    max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),\n    max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),\n    max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),\n    max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),\n    max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),\n    max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8)\n  )))))));\n}\n\nvec4 freesurface_red_1679163293 (float x_20) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);\n  float a0 = smoothstep(e0,e1,x_20);\n  float a1 = smoothstep(e1,e2,x_20);\n  float a2 = smoothstep(e2,e3,x_20);\n  float a3 = smoothstep(e3,e4,x_20);\n  float a4 = smoothstep(e4,e5,x_20);\n  float a5 = smoothstep(e5,e6,x_20);\n  float a6 = smoothstep(e6,e7,x_20);\n  float a7 = smoothstep(e7,e8,x_20);\n  return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),\n    max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),\n    max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),\n    max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),\n    max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),\n    max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),\n    max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8)\n  )))))));\n}\n\nvec4 oxygen (float x_11) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);\n  float a0 = smoothstep(e0,e1,x_11);\n  float a1 = smoothstep(e1,e2,x_11);\n  float a2 = smoothstep(e2,e3,x_11);\n  float a3 = smoothstep(e3,e4,x_11);\n  float a4 = smoothstep(e4,e5,x_11);\n  float a5 = smoothstep(e5,e6,x_11);\n  float a6 = smoothstep(e6,e7,x_11);\n  float a7 = smoothstep(e7,e8,x_11);\n  return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),\n    max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),\n    max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),\n    max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),\n    max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),\n    max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),\n    max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8)\n  )))))));\n}\n\nvec4 par (float x_28) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.2,0.0784313725490196,0.09411764705882353,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);\n  float a0 = smoothstep(e0,e1,x_28);\n  float a1 = smoothstep(e1,e2,x_28);\n  float a2 = smoothstep(e2,e3,x_28);\n  float a3 = smoothstep(e3,e4,x_28);\n  float a4 = smoothstep(e4,e5,x_28);\n  float a5 = smoothstep(e5,e6,x_28);\n  float a6 = smoothstep(e6,e7,x_28);\n  float a7 = smoothstep(e7,e8,x_28);\n  return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),\n    max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),\n    max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),\n    max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),\n    max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),\n    max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),\n    max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8)\n  )))))));\n}\n\nvec4 phase (float x_39) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);\n  float a0 = smoothstep(e0,e1,x_39);\n  float a1 = smoothstep(e1,e2,x_39);\n  float a2 = smoothstep(e2,e3,x_39);\n  float a3 = smoothstep(e3,e4,x_39);\n  float a4 = smoothstep(e4,e5,x_39);\n  float a5 = smoothstep(e5,e6,x_39);\n  float a6 = smoothstep(e6,e7,x_39);\n  float a7 = smoothstep(e7,e8,x_39);\n  return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),\n    max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),\n    max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),\n    max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),\n    max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),\n    max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),\n    max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8)\n  )))))));\n}\n\nvec4 salinity (float x_26) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);\n  float a0 = smoothstep(e0,e1,x_26);\n  float a1 = smoothstep(e1,e2,x_26);\n  float a2 = smoothstep(e2,e3,x_26);\n  float a3 = smoothstep(e3,e4,x_26);\n  float a4 = smoothstep(e4,e5,x_26);\n  float a5 = smoothstep(e5,e6,x_26);\n  float a6 = smoothstep(e6,e7,x_26);\n  float a7 = smoothstep(e7,e8,x_26);\n  return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),\n    max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),\n    max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),\n    max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),\n    max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),\n    max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),\n    max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8)\n  )))))));\n}\n\nvec4 temperature (float x_8) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.01568627450980392,0.13725490196078433,0.2,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.09019607843137255,0.2,0.47843137254901963,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);\n  float a0 = smoothstep(e0,e1,x_8);\n  float a1 = smoothstep(e1,e2,x_8);\n  float a2 = smoothstep(e2,e3,x_8);\n  float a3 = smoothstep(e3,e4,x_8);\n  float a4 = smoothstep(e4,e5,x_8);\n  float a5 = smoothstep(e5,e6,x_8);\n  float a6 = smoothstep(e6,e7,x_8);\n  float a7 = smoothstep(e7,e8,x_8);\n  return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),\n    max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),\n    max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),\n    max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),\n    max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),\n    max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),\n    max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8)\n  )))))));\n}\n\nvec4 turbidity (float x_40) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);\n  float a0 = smoothstep(e0,e1,x_40);\n  float a1 = smoothstep(e1,e2,x_40);\n  float a2 = smoothstep(e2,e3,x_40);\n  float a3 = smoothstep(e3,e4,x_40);\n  float a4 = smoothstep(e4,e5,x_40);\n  float a5 = smoothstep(e5,e6,x_40);\n  float a6 = smoothstep(e6,e7,x_40);\n  float a7 = smoothstep(e7,e8,x_40);\n  return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),\n    max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),\n    max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),\n    max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),\n    max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),\n    max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),\n    max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8)\n  )))))));\n}\n\nvec4 velocity_blue_297387650 (float x_2) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);\n  float a0 = smoothstep(e0,e1,x_2);\n  float a1 = smoothstep(e1,e2,x_2);\n  float a2 = smoothstep(e2,e3,x_2);\n  float a3 = smoothstep(e3,e4,x_2);\n  float a4 = smoothstep(e4,e5,x_2);\n  float a5 = smoothstep(e5,e6,x_2);\n  float a6 = smoothstep(e6,e7,x_2);\n  float a7 = smoothstep(e7,e8,x_2);\n  return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),\n    max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),\n    max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),\n    max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),\n    max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),\n    max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),\n    max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8)\n  )))))));\n}\n\nvec4 velocity_green_2558432129 (float x_27) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);\n  const float e1 = 0.13;\n  const vec4 v1 = vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);\n  const float e2 = 0.25;\n  const vec4 v2 = vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);\n  const float e3 = 0.38;\n  const vec4 v3 = vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);\n  const float e4 = 0.5;\n  const vec4 v4 = vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);\n  const float e5 = 0.63;\n  const vec4 v5 = vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);\n  const float e6 = 0.75;\n  const vec4 v6 = vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);\n  const float e7 = 0.88;\n  const vec4 v7 = vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);\n  const float e8 = 1.0;\n  const vec4 v8 = vec4(1,0.9921568627450981,0.803921568627451,1);\n  float a0 = smoothstep(e0,e1,x_27);\n  float a1 = smoothstep(e1,e2,x_27);\n  float a2 = smoothstep(e2,e3,x_27);\n  float a3 = smoothstep(e3,e4,x_27);\n  float a4 = smoothstep(e4,e5,x_27);\n  float a5 = smoothstep(e5,e6,x_27);\n  float a6 = smoothstep(e6,e7,x_27);\n  float a7 = smoothstep(e7,e8,x_27);\n  return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),\n    max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),\n    max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),\n    max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),\n    max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),\n    max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),\n    max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8)\n  )))))));\n}\n\nvec4 cubehelix (float x_37) {\n  const float e0 = 0.0;\n  const vec4 v0 = vec4(0,0,0,1);\n  const float e1 = 0.07;\n  const vec4 v1 = vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);\n  const float e2 = 0.13;\n  const vec4 v2 = vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);\n  const float e3 = 0.2;\n  const vec4 v3 = vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);\n  const float e4 = 0.27;\n  const vec4 v4 = vec4(0.6313725490196078,0,0.5764705882352941,1);\n  const float e5 = 0.33;\n  const vec4 v5 = vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);\n  const float e6 = 0.4;\n  const vec4 v6 = vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);\n  const float e7 = 0.47;\n  const vec4 v7 = vec4(1,0.11372549019607843,0.3803921568627451,1);\n  const float e8 = 0.53;\n  const vec4 v8 = vec4(1,0.21176470588235294,0.27058823529411763,1);\n  const float e9 = 0.6;\n  const vec4 v9 = vec4(1,0.3333333333333333,0.1803921568627451,1);\n  const float e10 = 0.67;\n  const vec4 v10 = vec4(1,0.47058823529411764,0.13333333333333333,1);\n  const float e11 = 0.73;\n  const vec4 v11 = vec4(1,0.615686274509804,0.1450980392156863,1);\n  const float e12 = 0.8;\n  const vec4 v12 = vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);\n  const float e13 = 0.87;\n  const vec4 v13 = vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);\n  const float e14 = 0.93;\n  const vec4 v14 = vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);\n  const float e15 = 1.0;\n  const vec4 v15 = vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);\n  float a0 = smoothstep(e0,e1,x_37);\n  float a1 = smoothstep(e1,e2,x_37);\n  float a2 = smoothstep(e2,e3,x_37);\n  float a3 = smoothstep(e3,e4,x_37);\n  float a4 = smoothstep(e4,e5,x_37);\n  float a5 = smoothstep(e5,e6,x_37);\n  float a6 = smoothstep(e6,e7,x_37);\n  float a7 = smoothstep(e7,e8,x_37);\n  float a8 = smoothstep(e8,e9,x_37);\n  float a9 = smoothstep(e9,e10,x_37);\n  float a10 = smoothstep(e10,e11,x_37);\n  float a11 = smoothstep(e11,e12,x_37);\n  float a12 = smoothstep(e12,e13,x_37);\n  float a13 = smoothstep(e13,e14,x_37);\n  float a14 = smoothstep(e14,e15,x_37);\n  return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),\n    max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),\n    max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),\n    max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),\n    max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),\n    max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),\n    max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),\n    max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),\n    max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),\n    max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),\n    max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),\n    max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),\n    max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),\n    max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)\n  ))))))))))))));\n}\n\n// our texture\nuniform usampler2D channel0;\nuniform usampler2D channel1;\nuniform usampler2D channel2;\nuniform usampler2D channel3;\nuniform usampler2D channel4;\nuniform usampler2D channel5;\n\n// range\nuniform vec2 sliderValues[6];\n\n// opacity\nuniform float opacity;\nuniform float divisor;\n\nin vec2 vTexCoord;\n\nout vec4 color;\n\nvoid main() {\n  float intensityValue0 = (float(texture(channel0, vTexCoord).r) - sliderValues[0][0]) / sliderValues[0][1];\n  float intensityValue1 = (float(texture(channel1, vTexCoord).r) - sliderValues[1][0]) / sliderValues[1][1];\n  float intensityValue2 = (float(texture(channel2, vTexCoord).r) - sliderValues[2][0]) / sliderValues[2][1];\n  float intensityValue3 = (float(texture(channel3, vTexCoord).r) - sliderValues[3][0]) / sliderValues[3][1];\n  float intensityValue4 = (float(texture(channel4, vTexCoord).r) - sliderValues[4][0]) / sliderValues[4][1];\n  float intensityValue5 = (float(texture(channel5, vTexCoord).r) - sliderValues[5][0]) / sliderValues[5][1];\n\n  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n  float intensityCombo = 0.0;\n  for(int i = 0; i < 6; i++) {\n    intensityCombo += max(0.0,intensityArray[i]);\n  }\n  color = vec4(colormapFunction(min(1.0,intensityCombo)).xyz, opacity);\n}\n".replace("colormapFunction",t):"#version 300 es\n#define SHADER_NAME xr-layer-fragment-shader\nprecision highp float;\nprecision highp int;\nprecision highp usampler2D;\n#define GLSLIFY 1\n\n// our texture\nuniform usampler2D channel0;\nuniform usampler2D channel1;\nuniform usampler2D channel2;\nuniform usampler2D channel3;\nuniform usampler2D channel4;\nuniform usampler2D channel5;\n\n// range\nuniform vec2 sliderValues[6];\n\n// color\nuniform vec3 colorValues[6];\n\n// opacity\nuniform float opacity;\n\nin vec2 vTexCoord;\n\nout vec4 color;\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 rgb2hsv(vec3 rgb) {\n \tfloat Cmax = max(rgb.r, max(rgb.g, rgb.b));\n \tfloat Cmin = min(rgb.r, min(rgb.g, rgb.b));\n \tfloat delta = Cmax - Cmin;\n\n \tvec3 hsv = vec3(0., 0., Cmax);\n\n \tif (Cmax > Cmin) {\n \t\thsv.y = delta / Cmax;\n\n \t\tif (rgb.r == Cmax) {\n      hsv.x = (rgb.g - rgb.b) / delta;\n    }\n \t\telse {\n \t\t\tif (rgb.g == Cmax){\n        hsv.x = 2. + (rgb.b - rgb.r) / delta;\n      }\n \t\t\telse {\n        hsv.x = 4. + (rgb.r - rgb.g) / delta;\n      }\n \t\t}\n \t\thsv.x = fract(hsv.x / 6.);\n \t}\n \treturn hsv;\n }\n\nvoid main() {\n  float intensityValue0 = (float(texture(channel0, vTexCoord).r) - sliderValues[0][0]) / sliderValues[0][1];\n  float intensityValue1 = (float(texture(channel1, vTexCoord).r) - sliderValues[1][0]) / sliderValues[1][1];\n  float intensityValue2 = (float(texture(channel2, vTexCoord).r) - sliderValues[2][0]) / sliderValues[2][1];\n  float intensityValue3 = (float(texture(channel3, vTexCoord).r) - sliderValues[3][0]) / sliderValues[3][1];\n  float intensityValue4 = (float(texture(channel4, vTexCoord).r) - sliderValues[4][0]) / sliderValues[4][1];\n  float intensityValue5 = (float(texture(channel5, vTexCoord).r) - sliderValues[5][0]) / sliderValues[5][1];\n\n  vec3 rgbCombo = vec3(0.0);\n  vec3 hsvCombo = vec3(0.0);\n  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n  for(int i = 0; i < 6; i++) {\n    hsvCombo = rgb2hsv(vec3(colorValues[i]));\n    hsvCombo = vec3(hsvCombo.xy, max(0.0,intensityArray[i]));\n    rgbCombo += hsv2rgb(hsvCombo);\n  }\n\n  color = vec4(rgbCombo, opacity);\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",i="<f4"===r?o.replace(/usampler/g,"sampler"):o;return y()(m()(n.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define GLSLIFY 1\n#define SHADER_NAME xr-layer-vertex-shader\n\nin vec2 texCoords;\nin vec3 positions;\nin vec3 positions64Low;\nin vec3 instancePickingColors;\n\nout vec2 vTexCoord;\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vTexCoord = texCoords;\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:i,modules:[x.project32,x.picking]})}},{key:"initializeState",value:function(){this.getAttributeManager().add({positions:{size:3,type:O.a.DOUBLE,fp64:this.use64bitPositions(),update:this.calculatePositions,noAlloc:!0}}),this.setState({numInstances:1,positions:new Float64Array(12)})}},{key:"finalizeState",value:function(){y()(m()(n.prototype),"finalizeState",this).call(this),this.state.textures&&Object.values(this.state.textures).forEach((function(e){return e&&e.delete()}))}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps;if(e.changeFlags.extensionsChanged||t.colormap!==n.colormap){var r=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(r)}),this.getAttributeManager().invalidateAll()}t.channelData!==n.channelData&&this.loadTexture(t.channelData);var o=this.getAttributeManager();t.bounds!==n.bounds&&o.invalidate("positions")}},{key:"_getModel",value:function(e){return e?new E.Model(e,I(I({},this.getShaders()),{},{id:this.props.id,geometry:new E.Geometry({drawMode:O.a.TRIANGLE_FAN,vertexCount:4,attributes:{texCoords:new Float32Array([0,1,0,0,1,0,1,1])}}),isInstanced:!1})):null}},{key:"calculatePositions",value:function(e){var t=this.state.positions,n=this.props.bounds;t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[0],t[4]=n[3],t[5]=0,t[6]=n[2],t[7]=n[3],t[8]=0,t[9]=n[2],t[10]=n[1],t[11]=0,e.value=t}},{key:"draw",value:function(e){var t=e.uniforms,n=this.state,r=n.textures,o=n.model;if(r&&o){var i=this.props,s=i.sliderValues,a=i.colorValues,c=i.opacity,l=i.domain,u=i.dtype,f=i.channelIsOn,h=Object.values(r).filter((function(e){return e})).length,p=function(e){var t=e.sliderValues,n=e.colorValues,r=e.channelIsOn,o=e.domain,i=e.dtype,s=[t.length,n.length];if(s.every((function(e){return e!==s[0]})))throw Error("Inconsistent number of slider values and colors provided");var a=n.map((function(e,t){return r[t]?e.map((function(e){return e/255})):T})),c=o&&o[1]||A[i].max,l=t.map((function(e,t){return r[t]?e:[c,c]})),u=P-a.length;if(u<0)throw Error("".concat(s," channels passed in, but only 6 are allowed."));var f=j(a,T,u);return{paddedSliderValues:j(l,[c,c],u).reduce((function(e,t){return e.concat(t)}),[]),paddedColorValues:f.reduce((function(e,t){return e.concat(t)}),[])}}({sliderValues:s.slice(0,h),colorValues:a.slice(0,h),channelIsOn:f.slice(0,h),domain:l,dtype:u}),d=p.paddedSliderValues,v=p.paddedColorValues;o.setUniforms(I(I({},t),{},{colorValues:v,sliderValues:d,opacity:c},r)).draw()}}},{key:"loadTexture",value:function(e){var t=this,n={channel0:null,channel1:null,channel2:null,channel3:null,channel4:null,channel5:null};this.state.textures&&Object.values(this.state.textures).forEach((function(e){return e&&e.delete()})),e&&Object.keys(e).length>0&&e.data&&(e.data.forEach((function(r,o){n["channel".concat(o)]=t.dataToTexture(r,e.width,e.height)}),this),this.setState({textures:n}))}},{key:"dataToTexture",value:function(e,t,n){var r,o=this.props.dtype,i=A[o],s=i.format,a=i.dataFormat,c=i.type;return new E.Texture2D(this.context.gl,{width:t,height:n,data:e,mipmaps:!1,parameters:(r={},_()(r,O.a.TEXTURE_MIN_FILTER,O.a.NEAREST),_()(r,O.a.TEXTURE_MAG_FILTER,O.a.NEAREST),_()(r,O.a.TEXTURE_WRAP_S,O.a.CLAMP_TO_EDGE),_()(r,O.a.TEXTURE_WRAP_T,O.a.CLAMP_TO_EDGE),r),format:s,dataFormat:a,type:c})}}]),n}(x.Layer);F.layerName="XRLayer",F.defaultProps=M;var N=F;function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=V(V({},w.TileLayer.defaultProps),{},{pickable:!0,coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,sliderValues:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},minZoom:{type:"number",value:0,compare:!0},maxZoom:{type:"number",value:0,compare:!0},renderSubLayers:{type:"function",value:function(e){var t=e.tile.bbox,n=t.left,r=t.top,o=t.right,i=t.bottom,s=e.colorValues,a=e.sliderValues,c=e.channelIsOn,l=e.visible,u=e.opacity,f=e.data,h=e.colormap,p=e.dtype,d=e.id,v=e.onHover,m=e.pickable;return[n,r,o,i].some((function(e){return e<0}))?null:new N({id:"XRLayer-".concat(n,"-").concat(r,"-").concat(o,"-").concat(i,"-").concat(d),bounds:[n,i,o,r],channelData:f,pickable:m,data:null,sliderValues:a,colorValues:s,channelIsOn:c,opacity:u,visible:l,dtype:p,colormap:h,onHover:v})},compare:!1},opacity:{type:"number",value:1,compare:!0},colormap:{type:"string",value:"",compare:!0},dtype:{type:"string",value:"<u2",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0}}),B=function(e){h()(n,e);var t=z(n);function n(){return c()(this,n),t.apply(this,arguments)}return u()(n,[{key:"_updateTileset",value:function(){this.props.viewportId||y()(m()(n.prototype),"_updateTileset",this).call(this),(this.props.viewportId&&this.context.viewport.id===this.props.viewportId||!this.state.tileset._viewport)&&y()(m()(n.prototype),"_updateTileset",this).call(this)}}]),n}(w.TileLayer);B.layerName="VivViewerLayerBase",B.defaultProps=G;var q=n(10),W=n.n(q),K=n(18),H=n.n(K);function Z(e,t,n){for(var r=e.data,o=e.width,i=e.height,s=new r.constructor(t*n),a=0;a<i;a+=1){var c=a*o,l=r.subarray(c,c+o);s.set(l,a*t)}return s}function Y(e){for(var t=e.BYTES_PER_ELEMENT,n=new Uint8Array(e.buffer,e.byteOffset,e.length*t),r=t/2,o=t-1,i=0,s=0;s<n.length;s+=t)for(var a=0;a<r;a+=1)i=n[s+a],n[s+a]=n[s+o-a],n[s+o-a]=i}function $(e){return X.apply(this,arguments)}function X(){return(X=s()(o.a.mark((function e(t){var n,r,i,s,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.loader,r=t.loaderSelection,i=n.isPyramid?n.numLevels-1:0,e.next=4,n.getRaster({z:i,loaderSelection:r});case 4:return s=e.sent,a=s.data,c=a.map((function(e){for(var t=e.length,n=1/0,r=-1/0,o=0;t--;)e[t]<n&&(n=e[t]),e[t]>r&&(r=e[t]),o+=e[t];var i=o/e.length;t=e.length;for(var s=0;t--;)s+=Math.pow(e[t]-i,2);var a=Math.pow(s/e.length,.5),c=Math.floor(e.length/2),l=Math.floor(e.length/4),u=3*Math.floor(e.length/4);H()(e,c);var f=e[c];H()(e,l,0,c);var h=e[l];return H()(e,u,c,e.length-1),{mean:i,sd:a,q1:h,q3:e[u],median:f,data:e,domain:[n,r]}})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var J,ee={pickable:!0,coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,sliderValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},loaderSelection:{type:"array",value:[],compare:!0},colormap:{type:"string",value:"",compare:!0},domain:{type:"array",value:[],compare:!0},translate:{type:"array",value:[0,0],compare:!0},scale:{type:"number",value:1,compare:!0},loader:{type:"object",value:{getRaster:(J=s()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:[],height:0,width:0});case 1:case"end":return e.stop()}}),e)}))),function(){return J.apply(this,arguments)}),dtype:"<u2"},compare:!0},z:{type:"number",value:0,compare:!0}};function te(e,t,n){var r=t*n%2==0?t:t+1;return{data:e.map((function(e){return Z({data:e,width:t,height:n},r,n)})),width:r,height:n}}var ne=function(e){h()(n,e);var t=Q(n);function n(){return c()(this,n),t.apply(this,arguments)}return u()(n,[{key:"initializeState",value:function(){var e=this,t=this.props,n=t.loader,r=t.z,o=t.loaderSelection;n.getRaster({z:r,loaderSelection:o}).then((function(t){var n=t.data,r=t.width,o=t.height;e.setState(te(n,r,o))}))}},{key:"updateState",value:function(e){var t=this,n=e.changeFlags,r=e.props,o=e.oldProps,i=n.propsChanged,s="string"==typeof i&&i.includes("props.loader"),a=r.loaderSelection!==o.loaderSelection;if(s||a){var c=this.props,l=c.loader,u=c.z,f=c.loaderSelection;l.getRaster({z:u,loaderSelection:f}).then((function(e){var n=e.data,r=e.width,o=e.height;t.setState(te(n,r,o))}))}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=e.sourceLayer;return t.sourceLayer=n,t.tile=n.props.tile,t}},{key:"renderLayers",value:function(){var e=this.props,t=e.loader,n=e.visible,r=e.opacity,o=e.colormap,i=e.sliderValues,s=e.colorValues,a=e.channelIsOn,c=e.translate,l=e.scale,u=e.z,f=e.domain,h=e.pickable,p=e.id,d=t.dtype,v=this.state,m=v.data,g=v.width,y=v.height;if(!g||!y)return null;var b=function(e){var t=e.width,n=e.height,r=e.translate,o=e.scale,i=W()(r,2),s=i[0],a=i[1];return[s,n*o+a,t*o+s,a]}({width:g,height:y,translate:c,scale:l});return new N({channelData:Promise.resolve({data:m,width:g,height:y}),pickable:h,bounds:b,sliderValues:i,colorValues:s,channelIsOn:a,domain:f,id:"XR-Static-Layer-".concat(0,"-",y,"-").concat(g,"-",0,"-").concat(u,"-").concat(p),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,opacity:r,visible:n,dtype:d,colormap:o})}}]),n}(x.CompositeLayer);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}ne.layerName="StaticImageLayer",ne.defaultProps=ee;var oe=function(e){h()(n,e);var t=re(n);function n(){return c()(this,n),t.apply(this,arguments)}return u()(n,[{key:"renderLayers",value:function(){var e=this.props,t=e.loader,n=e.sliderValues,r=e.colorValues,i=e.channelIsOn,a=e.loaderSelection,c=e.domain,l=e.opacity,u=e.colormap,f=e.viewportId,h=e.onTileError,p=e.onHover,d=e.pickable,v=e.id,m=t.tileSize,x=t.numLevels,g=t.dtype,y=function(){var e=s()(o.a.mark((function e(n){var r,i,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.x,i=n.y,s=n.z,e.next=3,t.getTile({x:r,y:i,z:-s,loaderSelection:a});case 3:return(c=e.sent)&&(c.width===m&&c.height===m||console.warn("Tile data  { width: ".concat(c.width,", height: ").concat(c.height," } does not match tilesize: ").concat(m))),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=new B({id:"Tiled-Image-".concat(v),getTileData:y,dtype:g,tileSize:m,minZoom:-(x-1),colorValues:r,sliderValues:n,channelIsOn:i,domain:c,refinementStrategy:1===l?"best-available":"no-overlap",updateTriggers:{getTileData:[t,a]},onTileError:h||t.onTileError,opacity:l,colormap:u,viewportId:f,onHover:p,pickable:d});return["function"==typeof t.getRaster&&new ne(this.props,{id:"Background-Image-".concat(v),scale:Math.pow(2,x-1),visible:1===l||-x>this.context.viewport.zoom&&(!f||this.context.viewport.id===f),z:x-1,pickable:!0,onHover:p}),b]}}]),n}(x.CompositeLayer);oe.layerName="VivViewerLayer",oe.defaultProps={pickable:!0,onHover:{type:"function",value:null,compare:!1}};var ie=oe,se=n(11);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var ce={pickable:!0,loader:{type:"object",value:{getRaster:function(){var e=s()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:[],height:0,width:0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getRasterSize:function(){return{height:0,width:0}},dtype:"<u2"},compare:!0},id:{type:"string",value:"",compare:!0},boundingBox:{type:"array",value:[[0,0],[0,1],[1,1],[1,0]],compare:!0},boundingBoxColor:{type:"array",value:[255,0,0],compare:!0},boundingBoxOutlineWidth:{type:"number",value:50,compare:!0},viewportOutlineColor:{type:"array",value:[255,190,0],compare:!0},viewportOutlineWidth:{type:"number",value:400,compare:!0},overviewScale:{type:"number",value:1,compare:!0}},le=function(e){h()(n,e);var t=ae(n);function n(){return c()(this,n),t.apply(this,arguments)}return u()(n,[{key:"renderLayers",value:function(){var e=this.props,t=e.loader,n=e.id,r=e.boundingBox,o=e.boundingBoxColor,i=e.boundingBoxOutlineWidth,s=e.viewportOutlineColor,a=e.viewportOutlineWidth,c=e.overviewScale,l=t.numLevels,u=t.getRasterSize({z:0}),f=u.width,h=u.height;return[new ne(this.props,{id:"viewport-".concat(n),scale:Math.pow(2,l-1)*c,z:l-1}),new se.PolygonLayer({id:"bounding-box-overview-".concat(n),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,data:[r],getPolygon:function(e){return e},filled:!1,stroked:!0,getLineColor:o,getLineWidth:i}),new se.PolygonLayer({id:"viewport-outline-".concat(n),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,data:[[[0,0],[f*c,0],[f*c,h*c],[0,h*c]]],getPolygon:function(e){return e},filled:!1,stroked:!0,getLineColor:s,getLineWidth:a})]}}]),n}(x.CompositeLayer);function ue(e){return"-#".concat(e,"#")}function fe(e){var t=(new x.OrthographicView).makeViewport({viewState:e,height:e.height,width:e.width});return[t.unproject([0,0]),t.unproject([t.width,0]),t.unproject([t.width,t.height]),t.unproject([0,t.height])]}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}le.layerName="OverviewLayer",le.defaultProps=ce;var pe=function(e){h()(n,e);var t=he(n);function n(){return c()(this,n),t.apply(this,arguments)}return u()(n,[{key:"renderLayers",value:function(){var e=this.props,t=e.id,n=e.unit,r=e.size,o=e.position,i=e.viewState,s=e.length,a=fe(i),c=i.zoom,l=.05*(a[2][0]-a[0][0]),u=Math.max(Math.pow(2,1.5-c),.007*(a[2][1]-a[0][1])),f=l*r,h=function(e,t,n){var r=e[2][0]-e[0][0];switch(t){case"bottom-right":return[e[2][1]-(e[2][1]-e[0][1])*n,e[2][0]-r*n];case"top-right":return[(e[2][1]-e[0][1])*n,e[2][0]-r*n];case"top-left":return[(e[2][1]-e[0][1])*n,r*n];case"bottom-left":return[e[2][1]-(e[2][1]-e[0][1])*n,r*n];default:throw new Error("Position ".concat(t," not found"))}}(a,o,s),p=W()(h,2),d=p[0],v=p[1];return[new se.LineLayer({id:"scale-bar-length-".concat(t),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,data:[[[v,d],[v+l,d]]],getSourcePosition:function(e){return e[0]},getTargetPosition:function(e){return e[1]},getWidth:2,getColor:[220,220,220]}),new se.LineLayer({id:"scale-bar-height-left-".concat(t),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,data:[[[v,d-u],[v,d+u]]],getSourcePosition:function(e){return e[0]},getTargetPosition:function(e){return e[1]},getWidth:2,getColor:[220,220,220]}),new se.LineLayer({id:"scale-bar-height-right-".concat(t),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,data:[[[v+l,d-u],[v+l,d+u]]],getSourcePosition:function(e){return e[0]},getTargetPosition:function(e){return e[1]},getWidth:2,getColor:[220,220,220]}),new se.TextLayer({id:"units-label-layer-".concat(t),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,data:[{text:String(f).slice(0,5)+n,position:[v+.5*l,d+4*u]}],getColor:[220,220,220,255],getSize:11,sizeUnits:"meters",sizeScale:Math.pow(2,-c),characterSet:[].concat(k()(n.split("")),k()(R(10).map((function(e){return String(e)}))),["."])})]}}]),n}(x.CompositeLayer);pe.layerName="ScaleBarLayer",pe.defaultProps={pickable:!0,viewState:{type:"object",value:{zoom:0,target:[0,0,0]},compare:!0},unit:{type:"string",value:"",compare:!0},size:{type:"number",value:1,compare:!0},position:{type:"string",value:"bottom-right",compare:!0},length:{type:"number",value:.085,compare:!0}};var de=n(19),ve=n.n(de),me=n(12),xe=n.n(me),ge=n(24),ye=n.n(ge);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Se=function(e){h()(n,e);var t=we(n);function n(e){var r;c()(this,n),(r=t.call(this,e)).state={viewStates:{}};var o=r.state.viewStates,i=r.props,s=i.views,a=i.viewStateHook;s.forEach((function(e){o[e.id]=e.filterViewState({viewState:e.initialViewState})})),r._onViewStateChange=r._onViewStateChange.bind(ve()(r)),r._viewStateHook=a,r.layerFilter=r.layerFilter.bind(ve()(r)),r.onHover=r.onHover.bind(ve()(r)),r.deck=xe.a.createRef();var l=r.props.hoverHooks.initVivView;return l&&l({deck:r.deck}),r}return u()(n,[{key:"layerFilter",value:function(e){var t=e.layer,n=e.viewport;return t.id.includes(ue(n.id))}},{key:"_onViewStateChange",value:function(e){var t=this,n=e.viewId,r=e.viewState,o=e.oldViewState,i=this.props.views;this.setState((function(e){var s={};return i.forEach((function(t){var i=e.viewStates[t.id];s[t.id]=t.filterViewState({viewState:_e(_e({},r),{},{id:n}),oldViewState:o,currentViewState:i})})),t._viewStateHook&&t._viewStateHook(n,r,o),{viewStates:s}}))}},{key:"onHover",value:function(e){var t=e.sourceLayer,n=e.coordinate,r=e.layer;if(!n)return null;var o=this.props.hoverHooks;if(!o)return null;var i=o.handleValue;if(!i)return null;var s=t.props,a=s.channelData,c=s.bounds;if(!a)return null;var l,u=a.data,f=a.width;if(!u)return null;if(t.id.includes("Background")){var h=r.props.loader.numLevels,p=Math.max(1,Math.pow(2,Math.floor(h-1)));l=[Math.floor((n[0]-c[0])/p),Math.floor((n[1]-c[3])/p)]}else{var d=r.context.viewport.zoom,v=Math.max(1,Math.pow(2,Math.floor(-d)));l=[Math.floor((n[0]-c[0])/v),Math.floor((n[1]-c[3])/v)]}i(u.map((function(e){return e[l[1]*f+l[0]]})))}},{key:"_renderLayers",value:function(){var e=this.onHover,t=this.state.viewStates,n=this.props,r=n.views,o=n.layerProps;return r.map((function(n,r){return n.getLayers({viewStates:t,props:_e(_e({},o[r]),{},{onHover:e})})}))}},{key:"render",value:function(){var e=this.props,t=e.views,n=e.randomize,r=this.state.viewStates,o=t.map((function(e){return e.getDeckGlView()}));if(n){var i=Math.random(),s=o[0],a=1.49*i,c=Math.round(a*(t.length-1));o[0]=o[c],o[c]=s}return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")?xe.a.createElement("div",{className:"viv-error"},xe.a.createElement("p",null,"Safari does not support WebGL2, which Viv requires. Please use Chrome or Firefox.")):xe.a.createElement(ye.a,{ref:this.deck,glOptions:{webgl2:!0},layerFilter:this.layerFilter,layers:this._renderLayers(),onViewStateChange:this._onViewStateChange,views:o,viewState:r,getCursor:function(e){return e.isDragging?"grabbing":"crosshair"}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.views;if(n.some((function(e){return!t.viewStates[e.id]||e.initialViewState.height!==t.viewStates[e.id].height||e.initialViewState.width!==t.viewStates[e.id].width}))){var r={};return n.forEach((function(e){var n=e.initialViewState,o=n.height,i=n.width,s=t.viewStates[e.id];r[e.id]=e.filterViewState({viewState:_e(_e({},s||e.initialViewState),{},{height:o,width:i,id:e.id})})})),{viewStates:r}}return t}}]),n}(me.PureComponent),ke=function(){function e(t){var n=t.initialViewState,r=t.x,o=void 0===r?0:r,i=t.y,s=void 0===i?0:i,a=t.controller,l=void 0===a||a;c()(this,e);var u=n.height,f=n.width,h=n.id;this.width=f,this.height=u,this.initialViewState=n,this.id=h,this.x=o,this.y=s,this.controller=l}return u()(e,[{key:"getDeckGlView",value:function(){var e=this.height,t=this.width,n=this.id,r=this.x,o=this.y,i=this.controller;return new x.OrthographicView({id:n,controller:i,height:e,width:t,x:r,y:o})}},{key:"filterViewState",value:function(e){var t=e.viewState,n=this.id;return t.id===n?t:null}},{key:"getLayers",value:function(e){e.viewStates,e.props}}]),e}();function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Oe=function(e){h()(n,e);var t=Ce(n);function n(){return c()(this,n),t.apply(this,arguments)}return u()(n,[{key:"getLayers",value:function(e){var t=e.props,n=e.viewStates,r=t.loader,o=this.id,i=n[o],s=[],a=r.isPyramid?new ie(t,{id:"".concat(r.type).concat(ue(o)),viewportId:o}):new ne(t,{id:"".concat(r.type).concat(ue(o)),viewportId:o});s.push(a);var c=r.physicalSizes;if(c){var l=c.x,u=l.unit,f=l.value;u&&f&&s.push(new pe({id:ue(o),loader:r,unit:u,size:f,viewState:i}))}return s}}]),n}(ke);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Ae=function(e){h()(n,e);var t=Pe(n);function n(e){var r,o=e.initialViewState,i=e.loader,s=e.detailHeight,a=e.detailWidth,l=e.scale,u=void 0===l?.2:l,f=e.margin,h=void 0===f?25:f,p=e.position,d=void 0===p?"bottom-right":p,v=e.minimumWidth,m=void 0===v?150:v,x=e.maximumWidth,g=void 0===x?350:x;return c()(this,n),(r=t.call(this,{initialViewState:o})).margin=h,r.loader=i,r.position=d,r.detailHeight=s,r.detailWidth=a,r._setHeightWidthScale({detailWidth:a,scale:u,minimumWidth:m,maximumWidth:g}),r._setXY(),r}return u()(n,[{key:"_setHeightWidthScale",value:function(e){var t=e.detailWidth,n=e.scale,r=e.minimumWidth,o=e.maximumWidth,i=this.loader,s=i.numLevels,a=i.getRasterSize({z:0}),c=a.width,l=a.height,u=l/c;this.width=Math.min(o,Math.max(t*n,r)),this.height=this.width*u,this.scale=Math.pow(2,s-1)/c*this.width,this._imageWidth=c,this._imageHeight=l}},{key:"_setXY",value:function(){var e=this.height,t=this.width,n=this.margin,r=this.position,o=this.detailWidth,i=this.detailHeight;switch(r){case"bottom-right":this.x=o-t-n,this.y=i-e-n;break;case"top-right":this.x=o-t-n,this.y=n;break;case"top-left":this.x=n,this.y=n;break;case"bottom-left":this.x=n,this.y=i-e-n;break;default:throw new Error("overviewLocation prop needs to be one of ['bottom-right', 'top-right', 'top-left', 'bottom-left']")}}},{key:"getDeckGlView",value:function(){var e=this.x,t=this.y,n=this.id,r=this.height,o=this.width;return new x.OrthographicView({id:n,controller:!1,height:r,width:o,x:e,y:t,clear:!0})}},{key:"filterViewState",value:function(e){var t=e.viewState,n=this._imageWidth,r=this._imageHeight,o=this.scale,i=this.id,s=this.loader,a=this.height,c=this.width,l=s.numLevels;return Te(Te({},t),{},{height:a,width:c,id:i,target:[n*o/2,r*o/2,0],zoom:-(l-1)})}},{key:"getLayers",value:function(e){var t=e.viewStates,n=e.props,r=t.detail;if(!r)throw new Error("Overview requires a viewState with id detail");var o=this.id,i=this.scale,s=this.loader,a=fe(r).map((function(e){return e.map((function(e){return e*i}))}));return[new le(n,{id:"".concat(s.type).concat(ue(o)),boundingBox:a,overviewScale:i})]}}]),n}(ke);function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var je=function(e){h()(n,e);var t=Re(n);function n(e){var r,o=e.initialViewState,i=e.x,s=e.y,a=e.linkedIds,l=void 0===a?[]:a,u=e.panLock,f=void 0===u||u,h=e.zoomLock,p=void 0===h||h,d=e.viewportOutlineColor,v=void 0===d?[255,255,255]:d,m=e.viewportOutlineWidth,x=void 0===m?10:m;return c()(this,n),(r=t.call(this,{initialViewState:o,x:i,y:s})).linkedIds=l,r.panLock=f,r.zoomLock=p,r.viewportOutlineColor=v,r.viewportOutlineWidth=x,r}return u()(n,[{key:"filterViewState",value:function(e){var t=e.viewState,n=e.oldViewState,r=e.currentViewState,o=t.id,i=this.id,s=this.linkedIds,a=this.panLock,c=this.zoomLock;if(n&&-1!==s.indexOf(o)&&(c||a)){var l={height:r.height,width:r.width,target:[],zoom:null},u=W()(r.target,2),f=u[0],h=u[1];if(c){var p=t.zoom-n.zoom;l.zoom=r.zoom+p}else l.zoom=r.zoom;if(a){var d=W()(n.target,2),v=d[0],m=d[1],x=W()(t.target,2),g=x[0]-v,y=x[1]-m;l.target.push(f+g),l.target.push(h+y)}else l.target.push(f),l.target.push(h);return{id:i,target:l.target,zoom:l.zoom,height:l.height,width:l.width}}return t.id===i?{id:i,target:t.target,zoom:t.zoom,height:t.height,width:t.width}:{id:i,target:r.target,zoom:r.zoom,height:r.height,width:r.width}}},{key:"getLayers",value:function(e){var t=e.props,n=e.viewStates,r=t.loader,o=this.id,i=this.viewportOutlineColor,s=this.viewportOutlineWidth,a=n[o],c=fe(a),l=[],u=r.isPyramid?new ie(t,{id:"".concat(r.type).concat(ue(o)),viewportId:o}):new ne(t,{id:"".concat(r.type).concat(ue(o)),viewportId:o});l.push(u);var f=new se.PolygonLayer({id:"viewport-outline-".concat(r.type).concat(ue(o)),coordinateSystem:x.COORDINATE_SYSTEM.CARTESIAN,data:[c],getPolygon:function(e){return e},filled:!1,stroked:!0,getLineColor:i,getLineWidth:s*Math.pow(2,-a.zoom)});l.push(f);var h=r.physicalSizes;if(h){var p=h.x,d=p.unit,v=p.value;d&&v&&l.push(new pe({id:ue(o),loader:r,unit:d,size:v,viewState:a}))}return l}}]),n}(ke);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=function(e){var t=e.loader,n=e.sliderValues,r=e.colorValues,o=e.channelIsOn,i=e.initialViewState,s=e.colormap,a=e.overview,c=e.overviewOn,l=e.loaderSelection,u=e.hoverHooks,f=e.viewStateHook,h=e.controller,p=Ie(Ie({},i),{},{id:"detail"}),d={loader:t,sliderValues:n,colorValues:r,channelIsOn:o,loaderSelection:l,colormap:s},v=[new Oe({initialViewState:p,controller:h})],m=[d];if(c&&t){var x=Ie(Ie({},i),{},{id:"overview"}),g=new Ae(Ie({initialViewState:x,loader:t,detailHeight:i.height,detailWidth:i.width},a));v.push(g),m.push(d)}return t?xe.a.createElement(Se,{viewStateHook:f,layerProps:m,views:v,hoverHooks:u}):null};function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=function(e){var t=e.loader,n=e.sliderValues,r=e.colorValues,o=e.channelIsOn,i=e.initialViewState,s=e.colormap,a=e.panLock,c=e.loaderSelection,l=e.zoomLock,u=new je({initialViewState:Fe(Fe({},i),{},{id:"left"}),linkedIds:["right"],panLock:a,zoomLock:l}),f={loader:t,sliderValues:n,colorValues:r,channelIsOn:o,loaderSelection:c,colormap:s},h=[new je({initialViewState:Fe(Fe({},i),{},{id:"right"}),x:i.width,linkedIds:["left"],panLock:a,zoomLock:l}),u],p=[f,f];return t?xe.a.createElement(Se,{layerProps:p,views:h,randomize:!0}):null},ze=n(15),Ue=n(25),Ve=n.n(Ue);const Ge={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},Be={};for(const e in Ge)Ge.hasOwnProperty(e)&&(Be[Ge[e]]=parseInt(e,10));const qe=[Be.BitsPerSample,Be.ExtraSamples,Be.SampleFormat,Be.StripByteCounts,Be.StripOffsets,Be.StripRowCounts,Be.TileByteCounts,Be.TileOffsets],We={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},Ke={};for(const e in We)We.hasOwnProperty(e)&&(Ke[We[e]]=parseInt(e,10));const He=0,Ze=1,Ye=2,$e=3,Xe=5,Qe=6,Je=8,et=0,tt={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},nt={};for(const e in tt)tt.hasOwnProperty(e)&&(nt[tt[e]]=parseInt(e,10));function rt(e,t){let n=e.length-t,r=0;do{for(let n=t;n>0;n--)e[r+t]+=e[r],r++;n-=t}while(n>0)}function ot(e,t,n){let r=0,o=e.length;const i=o/n;for(;o>t;){for(let n=t;n>0;--n)e[r+t]+=e[r],++r;o-=t}const s=e.slice();for(let t=0;t<i;++t)for(let r=0;r<n;++r)e[n*t+r]=s[(n-r-1)*i+t]}class it{decode(e,t){const n=this.decodeBlock(t),r=e.Predictor||1;if(1!==r){const t=!e.StripOffsets;return function(e,t,n,r,o,i){if(!t||1===t)return e;for(let e=0;e<o.length;++e){if(o[e]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(o[e]!==o[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const s=o[0]/8,a=2===i?1:o.length;for(let i=0;i<r&&!(i*a*n*s>=e.byteLength);++i){let r;if(2===t){switch(o[0]){case 8:r=new Uint8Array(e,i*a*n*s,a*n*s);break;case 16:r=new Uint16Array(e,i*a*n*s,a*n*s/2);break;case 32:r=new Uint32Array(e,i*a*n*s,a*n*s/4);break;default:throw new Error(`Predictor 2 not allowed with ${o[0]} bits per sample.`)}rt(r,a)}else 3===t&&(r=new Uint8Array(e,i*a*n*s,a*n*s),ot(r,a,s))}return e}(n,r,t?e.TileWidth:e.ImageWidth,t?e.TileLength:e.RowsPerStrip||e.ImageLength,e.BitsPerSample,e.PlanarConfiguration)}return n}}class st extends it{decodeBlock(e){return e}}function at(e,t){for(let n=t.length-1;n>=0;n--)e.push(t[n]);return e}function ct(e){const t=new Uint16Array(4093),n=new Uint8Array(4093);for(let e=0;e<=257;e++)t[e]=4096,n[e]=e;let r=258,o=9,i=0;function s(){r=258,o=9}function a(e){const t=function(e,t,n){const r=t%8,o=Math.floor(t/8),i=8-r,s=t+n-8*(o+1);let a=8*(o+2)-(t+n);const c=8*(o+2)-t;if(a=Math.max(0,a),o>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;let l=e[o]&2**(8-r)-1;l<<=n-i;let u=l;if(o+1<e.length){let t=e[o+1]>>>a;t<<=Math.max(0,n-c),u+=t}if(s>8&&o+2<e.length){const r=8*(o+3)-(t+n);u+=e[o+2]>>>r}return u}(e,i,o);return i+=o,t}function c(e,o){return n[r]=o,t[r]=e,r++,r-1}function l(e){const r=[];for(let o=e;4096!==o;o=t[o])r.push(n[o]);return r}const u=[];s();const f=new Uint8Array(e);let h,p=a(f);for(;257!==p;){if(256===p){for(s(),p=a(f);256===p;)p=a(f);if(257===p)break;if(p>256)throw new Error(`corrupted code at scanline ${p}`);at(u,l(p)),h=p}else if(p<r){const e=l(p);at(u,e),c(h,e[e.length-1]),h=p}else{const e=l(h);if(!e)throw new Error(`Bogus entry. Not in dictionary, ${h} / ${r}, position: ${i}`);at(u,e),u.push(e[e.length-1]),c(h,e[e.length-1]),h=p}r+1>=2**o&&(12===o?h=void 0:o++),p=a(f)}return new Uint8Array(u)}class lt extends it{decodeBlock(e){return ct(e).buffer}}const ut=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function ft(e,t){let n=0;const r=[];let o=16;for(;o>0&&!e[o-1];)--o;r.push({children:[],index:0});let i,s=r[0];for(let a=0;a<o;a++){for(let o=0;o<e[a];o++){for(s=r.pop(),s.children[s.index]=t[n];s.index>0;)s=r.pop();for(s.index++,r.push(s);r.length<=a;)r.push(i={children:[],index:0}),s.children[s.index]=i.children,s=i;n++}a+1<o&&(r.push(i={children:[],index:0}),s.children[s.index]=i.children,s=i)}return r[0].children}function ht(e,t,n,r,o,i,s,a,c){const{mcusPerLine:l,progressive:u}=n,f=t;let h=t,p=0,d=0;function v(){if(d>0)return d--,p>>d&1;if(p=e[h++],255===p){const t=e[h++];if(t)throw new Error(`unexpected marker: ${(p<<8|t).toString(16)}`)}return d=7,p>>>7}function m(e){let t,n=e;for(;null!==(t=v());){if(n=n[t],"number"==typeof n)return n;if("object"!=typeof n)throw new Error("invalid huffman sequence")}return null}function x(e){let t=e,n=0;for(;t>0;){const e=v();if(null===e)return;n=n<<1|e,--t}return n}function g(e){const t=x(e);return t>=1<<e-1?t:t+(-1<<e)+1}let y=0;let b,_=0;function w(e,t,n,r,o){const i=n%l,s=(n/l|0)*e.v+r,a=i*e.h+o;t(e,e.blocks[s][a])}function S(e,t,n){const r=n/e.blocksPerLine|0,o=n%e.blocksPerLine;t(e,e.blocks[r][o])}const k=r.length;let C,O,E,T,P,A;A=u?0===i?0===a?function(e,t){const n=m(e.huffmanTableDC),r=0===n?0:g(n)<<c;e.pred+=r,t[0]=e.pred}:function(e,t){t[0]|=v()<<c}:0===a?function(e,t){if(y>0)return void y--;let n=i;const r=s;for(;n<=r;){const r=m(e.huffmanTableAC),o=15&r,i=r>>4;if(0===o){if(i<15){y=x(i)+(1<<i)-1;break}n+=16}else{n+=i,t[ut[n]]=g(o)*(1<<c),n++}}}:function(e,t){let n=i;const r=s;let o=0;for(;n<=r;){const r=ut[n],i=t[r]<0?-1:1;switch(_){case 0:{const t=m(e.huffmanTableAC),n=15&t;if(o=t>>4,0===n)o<15?(y=x(o)+(1<<o),_=4):(o=16,_=1);else{if(1!==n)throw new Error("invalid ACn encoding");b=g(n),_=o?2:3}continue}case 1:case 2:t[r]?t[r]+=(v()<<c)*i:(o--,0===o&&(_=2===_?3:0));break;case 3:t[r]?t[r]+=(v()<<c)*i:(t[r]=b<<c,_=0);break;case 4:t[r]&&(t[r]+=(v()<<c)*i)}n++}4===_&&(y--,0===y&&(_=0))}:function(e,t){const n=m(e.huffmanTableDC),r=0===n?0:g(n);e.pred+=r,t[0]=e.pred;let o=1;for(;o<64;){const n=m(e.huffmanTableAC),r=15&n,i=n>>4;if(0===r){if(i<15)break;o+=16}else{o+=i,t[ut[o]]=g(r),o++}}};let R,j,D=0;j=1===k?r[0].blocksPerLine*r[0].blocksPerColumn:l*n.mcusPerColumn;const I=o||j;for(;D<j;){for(O=0;O<k;O++)r[O].pred=0;if(y=0,1===k)for(C=r[0],P=0;P<I;P++)S(C,A,D),D++;else for(P=0;P<I;P++){for(O=0;O<k;O++){C=r[O];const{h:e,v:t}=C;for(E=0;E<t;E++)for(T=0;T<e;T++)w(C,A,D,E,T)}if(D++,D===j)break}if(d=0,R=e[h]<<8|e[h+1],R<65280)throw new Error("marker was not found");if(!(R>=65488&&R<=65495))break;h+=2}return h-f}function pt(e,t){const n=[],{blocksPerLine:r,blocksPerColumn:o}=t,i=r<<3,s=new Int32Array(64),a=new Uint8Array(64);function c(e,n,r){const o=t.quantizationTable;let i,s,a,c,l,u,f,h,p;const d=r;let v;for(v=0;v<64;v++)d[v]=e[v]*o[v];for(v=0;v<8;++v){const e=8*v;0!==d[1+e]||0!==d[2+e]||0!==d[3+e]||0!==d[4+e]||0!==d[5+e]||0!==d[6+e]||0!==d[7+e]?(i=5793*d[0+e]+128>>8,s=5793*d[4+e]+128>>8,a=d[2+e],c=d[6+e],l=2896*(d[1+e]-d[7+e])+128>>8,h=2896*(d[1+e]+d[7+e])+128>>8,u=d[3+e]<<4,f=d[5+e]<<4,p=i-s+1>>1,i=i+s+1>>1,s=p,p=3784*a+1567*c+128>>8,a=1567*a-3784*c+128>>8,c=p,p=l-f+1>>1,l=l+f+1>>1,f=p,p=h+u+1>>1,u=h-u+1>>1,h=p,p=i-c+1>>1,i=i+c+1>>1,c=p,p=s-a+1>>1,s=s+a+1>>1,a=p,p=2276*l+3406*h+2048>>12,l=3406*l-2276*h+2048>>12,h=p,p=799*u+4017*f+2048>>12,u=4017*u-799*f+2048>>12,f=p,d[0+e]=i+h,d[7+e]=i-h,d[1+e]=s+f,d[6+e]=s-f,d[2+e]=a+u,d[5+e]=a-u,d[3+e]=c+l,d[4+e]=c-l):(p=5793*d[0+e]+512>>10,d[0+e]=p,d[1+e]=p,d[2+e]=p,d[3+e]=p,d[4+e]=p,d[5+e]=p,d[6+e]=p,d[7+e]=p)}for(v=0;v<8;++v){const e=v;0!==d[8+e]||0!==d[16+e]||0!==d[24+e]||0!==d[32+e]||0!==d[40+e]||0!==d[48+e]||0!==d[56+e]?(i=5793*d[0+e]+2048>>12,s=5793*d[32+e]+2048>>12,a=d[16+e],c=d[48+e],l=2896*(d[8+e]-d[56+e])+2048>>12,h=2896*(d[8+e]+d[56+e])+2048>>12,u=d[24+e],f=d[40+e],p=i-s+1>>1,i=i+s+1>>1,s=p,p=3784*a+1567*c+2048>>12,a=1567*a-3784*c+2048>>12,c=p,p=l-f+1>>1,l=l+f+1>>1,f=p,p=h+u+1>>1,u=h-u+1>>1,h=p,p=i-c+1>>1,i=i+c+1>>1,c=p,p=s-a+1>>1,s=s+a+1>>1,a=p,p=2276*l+3406*h+2048>>12,l=3406*l-2276*h+2048>>12,h=p,p=799*u+4017*f+2048>>12,u=4017*u-799*f+2048>>12,f=p,d[0+e]=i+h,d[56+e]=i-h,d[8+e]=s+f,d[48+e]=s-f,d[16+e]=a+u,d[40+e]=a-u,d[24+e]=c+l,d[32+e]=c-l):(p=5793*r[v+0]+8192>>14,d[0+e]=p,d[8+e]=p,d[16+e]=p,d[24+e]=p,d[32+e]=p,d[40+e]=p,d[48+e]=p,d[56+e]=p)}for(v=0;v<64;++v){const e=128+(d[v]+8>>4);n[v]=e<0?0:e>255?255:e}}for(let e=0;e<o;e++){const o=e<<3;for(let e=0;e<8;e++)n.push(new Uint8Array(i));for(let i=0;i<r;i++){c(t.blocks[e][i],a,s);let r=0;const l=i<<3;for(let e=0;e<8;e++){const t=n[o+e];for(let e=0;e<8;e++)t[l+e]=a[r++]}}}return n}class dt{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(e){let t=0;function n(){const n=e[t]<<8|e[t+1];return t+=2,n}function r(){const r=n(),o=e.subarray(t,t+r-2);return t+=o.length,o}function o(e){let t,n,r=0,o=0;for(n in e.components)e.components.hasOwnProperty(n)&&(t=e.components[n],r<t.h&&(r=t.h),o<t.v&&(o=t.v));const i=Math.ceil(e.samplesPerLine/8/r),s=Math.ceil(e.scanLines/8/o);for(n in e.components)if(e.components.hasOwnProperty(n)){t=e.components[n];const a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/r),c=Math.ceil(Math.ceil(e.scanLines/8)*t.v/o),l=i*t.h,u=s*t.v,f=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<l;t++)e.push(new Int32Array(64));f.push(e)}t.blocksPerLine=a,t.blocksPerColumn=c,t.blocks=f}e.maxH=r,e.maxV=o,e.mcusPerLine=i,e.mcusPerColumn=s}let i=n();if(65496!==i)throw new Error("SOI not found");for(i=n();65497!==i;){switch(i){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const e=r();65504===i&&74===e[0]&&70===e[1]&&73===e[2]&&70===e[3]&&0===e[4]&&(this.jfif={version:{major:e[5],minor:e[6]},densityUnits:e[7],xDensity:e[8]<<8|e[9],yDensity:e[10]<<8|e[11],thumbWidth:e[12],thumbHeight:e[13],thumbData:e.subarray(14,14+3*e[12]*e[13])}),65518===i&&65===e[0]&&100===e[1]&&111===e[2]&&98===e[3]&&101===e[4]&&0===e[5]&&(this.adobe={version:e[6],flags0:e[7]<<8|e[8],flags1:e[9]<<8|e[10],transformCode:e[11]});break}case 65499:{const r=n()+t-2;for(;t<r;){const r=e[t++],o=new Int32Array(64);if(r>>4==0)for(let n=0;n<64;n++){o[ut[n]]=e[t++]}else{if(r>>4!=1)throw new Error("DQT: invalid table spec");for(let e=0;e<64;e++){o[ut[e]]=n()}}this.quantizationTables[15&r]=o}break}case 65472:case 65473:case 65474:{n();const r={extended:65473===i,progressive:65474===i,precision:e[t++],scanLines:n(),samplesPerLine:n(),components:{},componentsOrder:[]},s=e[t++];let a;for(let n=0;n<s;n++){a=e[t];const n=e[t+1]>>4,o=15&e[t+1],i=e[t+2];r.componentsOrder.push(a),r.components[a]={h:n,v:o,quantizationIdx:i},t+=3}o(r),this.frames.push(r);break}case 65476:{const r=n();for(let n=2;n<r;){const r=e[t++],o=new Uint8Array(16);let i=0;for(let n=0;n<16;n++,t++)o[n]=e[t],i+=o[n];const s=new Uint8Array(i);for(let n=0;n<i;n++,t++)s[n]=e[t];n+=17+i,r>>4==0?this.huffmanTablesDC[15&r]=ft(o,s):this.huffmanTablesAC[15&r]=ft(o,s)}break}case 65501:n(),this.resetInterval=n();break;case 65498:{n();const r=e[t++],o=[],i=this.frames[0];for(let n=0;n<r;n++){const n=i.components[e[t++]],r=e[t++];n.huffmanTableDC=this.huffmanTablesDC[r>>4],n.huffmanTableAC=this.huffmanTablesAC[15&r],o.push(n)}const s=e[t++],a=e[t++],c=e[t++],l=ht(e,t,i,o,this.resetInterval,s,a,c>>4,15&c);t+=l;break}case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error(`unknown JPEG marker ${i.toString(16)}`)}i=n()}}getResult(){const{frames:e}=this;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let e=0;e<this.frames.length;e++){const t=this.frames[e].components;for(const e of Object.keys(t))t[e].quantizationTable=this.quantizationTables[t[e].quantizationIdx],delete t[e].quantizationIdx}const t=e[0],{components:n,componentsOrder:r}=t,o=[],i=t.samplesPerLine,s=t.scanLines;for(let e=0;e<r.length;e++){const i=n[r[e]];o.push({lines:pt(0,i),scaleX:i.h/t.maxH,scaleY:i.v/t.maxV})}const a=new Uint8Array(i*s*o.length);let c=0;for(let e=0;e<s;++e)for(let t=0;t<i;++t)for(let n=0;n<o.length;++n){const r=o[n];a[c]=r.lines[0|e*r.scaleY][0|t*r.scaleX],++c}return a}}class vt extends it{constructor(e){super(),this.reader=new dt,e.JPEGTables&&this.reader.parse(e.JPEGTables)}decodeBlock(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}var mt=n(26);class xt extends it{decodeBlock(e){return Object(mt.inflate)(new Uint8Array(e)).buffer}}class gt extends it{decodeBlock(e){const t=new DataView(e),n=[];for(let r=0;r<e.byteLength;++r){let e=t.getInt8(r);if(e<0){const o=t.getUint8(r+1);e=-e;for(let t=0;t<=e;++t)n.push(o);r+=1}else{for(let o=0;o<=e;++o)n.push(t.getUint8(r+o+1));r+=e+1}}return new Uint8Array(n).buffer}}function yt(e,t,n,r=1){return new(Object.getPrototypeOf(e).constructor)(t*n*r)}function bt(e,t,n){return(1-n)*e+n*t}function _t(e,t,n,r,o,i="nearest"){switch(i.toLowerCase()){case"nearest":return function(e,t,n,r,o){const i=t/r,s=n/o;return e.map(e=>{const a=yt(e,r,o);for(let c=0;c<o;++c){const o=Math.min(Math.round(s*c),n-1);for(let n=0;n<r;++n){const s=Math.min(Math.round(i*n),t-1),l=e[o*t+s];a[c*r+n]=l}}return a})}(e,t,n,r,o);case"bilinear":case"linear":return function(e,t,n,r,o){const i=t/r,s=n/o;return e.map(e=>{const a=yt(e,r,o);for(let c=0;c<o;++c){const o=s*c,l=Math.floor(o),u=Math.min(Math.ceil(o),n-1);for(let n=0;n<r;++n){const s=i*n,f=s%1,h=Math.floor(s),p=Math.min(Math.ceil(s),t-1),d=e[l*t+h],v=e[l*t+p],m=e[u*t+h],x=e[u*t+p],g=bt(bt(d,v,f),bt(m,x,f),o%1);a[c*r+n]=g}}return a})}(e,t,n,r,o);default:throw new Error(`Unsupported resampling method: '${i}'`)}}function wt(e,t,n,r,o,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return function(e,t,n,r,o,i){const s=t/r,a=n/o,c=yt(e,r,o,i);for(let l=0;l<o;++l){const o=Math.min(Math.round(a*l),n-1);for(let n=0;n<r;++n){const a=Math.min(Math.round(s*n),t-1);for(let s=0;s<i;++s){const u=e[o*t*i+a*i+s];c[l*r*i+n*i+s]=u}}}return c}(e,t,n,r,o,i);case"bilinear":case"linear":return function(e,t,n,r,o,i){const s=t/r,a=n/o,c=yt(e,r,o,i);for(let l=0;l<o;++l){const o=a*l,u=Math.floor(o),f=Math.min(Math.ceil(o),n-1);for(let n=0;n<r;++n){const a=s*n,h=a%1,p=Math.floor(a),d=Math.min(Math.ceil(a),t-1);for(let s=0;s<i;++s){const a=e[u*t*i+p*i+s],v=e[u*t*i+d*i+s],m=e[f*t*i+p*i+s],x=e[f*t*i+d*i+s],g=bt(bt(a,v,h),bt(m,x,h),o%1);c[l*r*i+n*i+s]=g}}}return c}(e,t,n,r,o,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function St(e,t,n){let r=0;for(let o=t;o<n;++o)r+=e[o];return r}function kt(e,t,n){switch(e){case 1:switch(t){case 8:return new Uint8Array(n);case 16:return new Uint16Array(n);case 32:return new Uint32Array(n)}break;case 2:switch(t){case 8:return new Int8Array(n);case 16:return new Int16Array(n);case 32:return new Int32Array(n)}break;case 3:switch(t){case 32:return new Float32Array(n);case 64:return new Float64Array(n)}}throw Error("Unsupported data format/bitsPerSample")}var Ct=class{constructor(e,t,n,r,o,i){this.fileDirectory=e,this.geoKeys=t,this.dataView=n,this.littleEndian=r,this.tiles=o?{}:null,this.isTiled=!e.StripOffsets;const s=e.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=i}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return this.fileDirectory.SamplesPerPixel}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t){const n=this.fileDirectory.BitsPerSample[t];if(n%8!=0)throw new Error(`Sample bit-width of ${n} is not supported.`);if(n!==this.fileDirectory.BitsPerSample[0])throw new Error("Differing size of samples in a pixel are not supported.");e+=n}return e/8}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);const t=this.fileDirectory.BitsPerSample[e];if(t%8!=0)throw new Error(`Sample bit-width of ${t} is not supported.`);return t/8}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,n=this.fileDirectory.BitsPerSample[e];switch(t){case 1:switch(n){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(n){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(n){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getArrayForSample(e,t){return kt(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,this.fileDirectory.BitsPerSample[e],t)}async getTileOrStrip(e,t,n,r){const o=Math.ceil(this.getWidth()/this.getTileWidth()),i=Math.ceil(this.getHeight()/this.getTileHeight());let s;const{tiles:a}=this;let c,l;1===this.planarConfiguration?s=t*o+e:2===this.planarConfiguration&&(s=n*o*i+t*o+e),this.isTiled?(c=this.fileDirectory.TileOffsets[s],l=this.fileDirectory.TileByteCounts[s]):(c=this.fileDirectory.StripOffsets[s],l=this.fileDirectory.StripByteCounts[s]);const u=await this.source.fetch(c,l);let f;return null===a?f=r.decode(this.fileDirectory,u):a[s]||(f=r.decode(this.fileDirectory,u),a[s]=f),{x:e,y:t,sample:n,data:await f}}async _readRaster(e,t,n,r,o,i,s,a){const c=this.getTileWidth(),l=this.getTileHeight(),u=Math.max(Math.floor(e[0]/c),0),f=Math.min(Math.ceil(e[2]/c),Math.ceil(this.getWidth()/this.getTileWidth())),h=Math.max(Math.floor(e[1]/l),0),p=Math.min(Math.ceil(e[3]/l),Math.ceil(this.getHeight()/this.getTileHeight())),d=e[2]-e[0];let v=this.getBytesPerPixel();const m=[],x=[];for(let e=0;e<t.length;++e)1===this.planarConfiguration?m.push(St(this.fileDirectory.BitsPerSample,0,t[e])/8):m.push(0),x.push(this.getReaderForSample(t[e]));const g=[],{littleEndian:y}=this;for(let i=h;i<p;++i)for(let s=u;s<f;++s)for(let a=0;a<t.length;++a){const u=a,f=t[a];2===this.planarConfiguration&&(v=this.getSampleByteSize(f));const h=this.getTileOrStrip(s,i,f,o);g.push(h),h.then(o=>{const i=o.data,s=new DataView(i),a=o.y*l,f=o.x*c,h=(o.y+1)*l,p=(o.x+1)*c,g=x[u],b=Math.min(l,l-(h-e[3])),_=Math.min(c,c-(p-e[2]));for(let o=Math.max(0,e[1]-a);o<b;++o)for(let i=Math.max(0,e[0]-f);i<_;++i){const l=(o*c+i)*v,h=g.call(s,l+m[u],y);let p;r?(p=(o+a-e[1])*d*t.length+(i+f-e[0])*t.length+u,n[p]=h):(p=(o+a-e[1])*d+i+f-e[0],n[u][p]=h)}})}if(await Promise.all(g),i&&e[2]-e[0]!==i||s&&e[3]-e[1]!==s){let o;return o=r?wt(n,e[2]-e[0],e[3]-e[1],i,s,t.length,a):_t(n,e[2]-e[0],e[3]-e[1],i,s,a),o.width=i,o.height=s,o}return n.width=i||e[2]-e[0],n.height=s||e[3]-e[1],n}async readRasters({window:e,samples:t=[],interleave:n,pool:r=null,width:o,height:i,resampleMethod:s,fillValue:a}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const l=(c[2]-c[0])*(c[3]-c[1]);if(t&&t.length){for(let e=0;e<t.length;++e)if(t[e]>=this.fileDirectory.SamplesPerPixel)return Promise.reject(new RangeError(`Invalid sample index '${t[e]}'.`))}else for(let e=0;e<this.fileDirectory.SamplesPerPixel;++e)t.push(e);let u;if(n){u=kt(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),l*t.length),a&&u.fill(a)}else{u=[];for(let e=0;e<t.length;++e){const n=this.getArrayForSample(t[e],l);Array.isArray(a)&&e<a.length?n.fill(a[e]):a&&!Array.isArray(a)&&n.fill(a),u.push(n)}}const f=r||function(e){switch(e.Compression){case void 0:case 1:return new st;case 5:return new lt;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new vt(e);case 8:case 32946:return new xt;case 32773:return new gt;default:throw new Error(`Unknown compression method identifier: ${e.Compression}`)}}(this.fileDirectory);return await this._readRaster(c,t,u,n,f,o,i,s)}async readRGB({window:e,pool:t=null,width:n,height:r,resampleMethod:o,enableAlpha:i=!1}={}){const s=e||[0,0,this.getWidth(),this.getHeight()];if(s[0]>s[2]||s[1]>s[3])throw new Error("Invalid subsets");const a=this.fileDirectory.PhotometricInterpretation;if(a===Ye){let o=[0,1,2];if(this.fileDirectory.ExtraSamples!==et&&i){o=[];for(let e=0;e<this.fileDirectory.BitsPerSample.length;e+=1)o.push(e)}return this.readRasters({window:e,interleave:!0,samples:o,pool:t,width:n,height:r})}let c;switch(a){case He:case Ze:case $e:c=[0];break;case Xe:c=[0,1,2,3];break;case Qe:case Je:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const l={window:s,interleave:!0,samples:c,pool:t,width:n,height:r,resampleMethod:o},{fileDirectory:u}=this,f=await this.readRasters(l),h=2**this.fileDirectory.BitsPerSample[0];let p;switch(a){case He:p=function(e,t){const{width:n,height:r}=e,o=new Uint8Array(n*r*3);let i;for(let n=0,r=0;n<e.length;++n,r+=3)i=256-e[n]/t*256,o[r]=i,o[r+1]=i,o[r+2]=i;return o}(f,h);break;case Ze:p=function(e,t){const{width:n,height:r}=e,o=new Uint8Array(n*r*3);let i;for(let n=0,r=0;n<e.length;++n,r+=3)i=e[n]/t*256,o[r]=i,o[r+1]=i,o[r+2]=i;return o}(f,h);break;case $e:p=function(e,t){const{width:n,height:r}=e,o=new Uint8Array(n*r*3),i=t.length/3,s=t.length/3*2;for(let n=0,r=0;n<e.length;++n,r+=3){const a=e[n];o[r]=t[a]/65536*256,o[r+1]=t[a+i]/65536*256,o[r+2]=t[a+s]/65536*256}return o}(f,u.ColorMap);break;case Xe:p=function(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let t=0,n=0;t<e.length;t+=4,n+=3){const o=e[t],i=e[t+1],s=e[t+2],a=e[t+3];r[n]=(255-o)/256*255*((255-a)/256),r[n+1]=(255-i)/256*255*((255-a)/256),r[n+2]=(255-s)/256*255*((255-a)/256)}return r}(f);break;case Qe:p=function(e){const{width:t,height:n}=e,r=new Uint8ClampedArray(t*n*3);for(let t=0,n=0;t<e.length;t+=3,n+=3){const o=e[t],i=e[t+1],s=e[t+2];r[n]=o+1.402*(s-128),r[n+1]=o-.34414*(i-128)-.71414*(s-128),r[n+2]=o+1.772*(i-128)}return r}(f);break;case Je:p=function(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let t=0,n=0;t<e.length;t+=3,n+=3){let o,i,s,a=(e[t+0]+16)/116,c=(e[t+1]<<24>>24)/500+a,l=a-(e[t+2]<<24>>24)/200;c=.95047*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),l=1.08883*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),o=3.2406*c+-1.5372*a+-.4986*l,i=-.9689*c+1.8758*a+.0415*l,s=.0557*c+-.204*a+1.057*l,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,r[n]=255*Math.max(0,Math.min(1,o)),r[n+1]=255*Math.max(0,Math.min(1,i)),r[n+2]=255*Math.max(0,Math.min(1,s))}return r}(f);break;default:throw new Error("Unsupported photometric interpretation.")}return p.width=f.width,p.height=f.height,p}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA,r=Ve()(n.substring(0,n.length-1));if(!r[0].tagName)throw new Error("Failed to parse GDAL metadata XML.");const o=r[0];if("GDALMetadata"!==o.tagName)throw new Error("Unexpected GDAL metadata XML tag.");let i=o.children.filter(e=>"Item"===e.tagName);e&&(i=i.filter(t=>Number(t.attributes.sample)===e));for(let e=0;e<i.length;++e){const n=i[e];t[n.attributes.name]=n.children[0]}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(n)return[n[0],n[5],n[10]];if(e){const[t,n,r]=e.getResolution();return[t*e.getWidth()/this.getWidth(),n*e.getHeight()/this.getHeight(),r*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(){const e=this.getOrigin(),t=this.getResolution(),n=e[0],r=e[1],o=n+t[0]*this.getWidth(),i=r+t[1]*this.getHeight();return[Math.min(n,o),Math.min(r,i),Math.max(n,o),Math.max(r,i)]}};class Ot{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const n=this.getUint32(e,t),r=this.getUint32(e+4,t);let o;if(t){if(o=n+2**32*r,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*n+r,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(e,t){let n=0;const r=(128&this._dataView.getUint8(e+(t?7:0)))>0;let o=!0;for(let i=0;i<8;i++){let s=this._dataView.getUint8(e+(t?i:7-i));r&&(o?0!==s&&(s=255&~(s-1),o=!1):s=255&~s),n+=s*256**i}return r&&(n=-n),n}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Et{constructor(e,t,n,r){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=n,this._bigTiff=r}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),n=this.readUint32(e+4);let r;if(this._littleEndian){if(r=t+2**32*n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*t+n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}readInt64(e){let t=0;const n=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let r=!0;for(let o=0;o<8;o++){let i=this._dataView.getUint8(e+(this._littleEndian?o:7-o));n&&(r?0!==i&&(i=255&~(i-1),r=!1):i=255&~i),t+=i*256**o}return n&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}n(20);"undefined"!=typeof navigator&&navigator.hardwareConcurrency;var Tt=n(23),Pt=n(14),At=n.n(Pt),Rt=n(27),jt=n.n(Rt),Dt=n(21),It=n.n(Dt);class Lt{constructor(e,{blockSize:t=65536}={}){this.retrievalFunction=e,this.blockSize=t,this.blockRequests=new Map,this.blocks=new Map,this.blockIdsAwaitingRequest=null}async fetch(e,t,n=!1){const r=e+t,o=[],i=[],s=[];for(let t=Math.floor(e/this.blockSize)*this.blockSize;t<r;t+=this.blockSize){const e=Math.floor(t/this.blockSize);this.blocks.has(e)||this.blockRequests.has(e)||i.push(e),this.blockRequests.has(e)&&s.push(this.blockRequests.get(e)),o.push(e)}if(this.blockIdsAwaitingRequest)for(let e=0;e<i.length;++e){const t=i[e];this.blockIdsAwaitingRequest.add(t)}else this.blockIdsAwaitingRequest=new Set(i);if(n||await async function(e){return new Promise(t=>setTimeout(t,e))}(),this.blockIdsAwaitingRequest){const e=function(e){if(0===e.length)return[];const t=[];let n=[];t.push(n);for(let r=0;r<e.length;++r)0===r||e[r]===e[r-1]+1?n.push(e[r]):(n=[e[r]],t.push(n));return t}(Array.from(this.blockIdsAwaitingRequest).sort());for(const t of e){const e=this.requestData(t[0]*this.blockSize,t.length*this.blockSize);for(let n=0;n<t.length;++n){const r=t[n];this.blockRequests.set(r,(async()=>{const t=await e,o=n*this.blockSize,i=Math.min(o+this.blockSize,t.data.byteLength),s=t.data.slice(o,i);this.blockRequests.delete(r),this.blocks.set(r,{data:s,offset:t.offset+o,length:s.byteLength,top:t.offset+i})})())}}this.blockIdsAwaitingRequest=null}const a=[];for(const e of i)this.blockRequests.has(e)&&a.push(this.blockRequests.get(e));return await Promise.all(a),await Promise.all(s),function(e,t,n){const r=t+n,o=new ArrayBuffer(n),i=new Uint8Array(o);for(const n of e){const e=n.offset-t,o=n.top-r;let s,a=0,c=0;e<0?a=-e:e>0&&(c=e),o<0?s=n.length-a:o>0&&(s=r-n.offset-a);const l=new Uint8Array(n.data,a,s);i.set(l,c)}return o}(o.map(e=>this.blocks.get(e)),e,t)}async requestData(e,t){const n=await this.retrievalFunction(e,t);return n.length?n.length!==n.data.byteLength&&(n.data=n.data.slice(0,n.length)):n.length=n.data.byteLength,n.top=n.offset+n.length,n}}function Mt(e,t){const{forceXHR:n}=t;if("function"==typeof fetch&&!n)return function(e,{headers:t={},blockSize:n}={}){return new Lt(async(n,r)=>{const o=await fetch(e,{headers:{...t,Range:`bytes=${n}-${n+r-1}`}});if(o.ok){if(206===o.status){return{data:o.arrayBuffer?await o.arrayBuffer():(await o.buffer()).buffer,offset:n,length:r}}{const e=o.arrayBuffer?await o.arrayBuffer():(await o.buffer()).buffer;return{data:e,offset:0,length:e.byteLength}}}throw new Error("Error fetching data.")},{blockSize:n})}(e,t);if("undefined"!=typeof XMLHttpRequest)return function(e,{headers:t={},blockSize:n}={}){return new Lt(async(n,r)=>new Promise((o,i)=>{const s=new XMLHttpRequest;s.open("GET",e),s.responseType="arraybuffer";const a={...t,Range:`bytes=${n}-${n+r-1}`};for(const[e,t]of Object.entries(a))s.setRequestHeader(e,t);s.onload=()=>{const e=s.response;206===s.status?o({data:e,offset:n,length:r}):o({data:e,offset:0,length:e.byteLength})},s.onerror=i,s.send()}),{blockSize:n})}(e,t);if(At.a.get)return function(e,{headers:t={},blockSize:n}={}){return new Lt(async(n,r)=>new Promise((o,i)=>{const s=It.a.parse(e);("http:"===s.protocol?At.a:jt.a).get({...s,headers:{...t,Range:`bytes=${n}-${n+r-1}`}},e=>{const t=[];e.on("data",e=>{t.push(e)}),e.on("end",()=>{const e=Tt.Buffer.concat(t).buffer;o({data:e,offset:n,length:e.byteLength})})}).on("error",i)}),{blockSize:n})}(e,t);throw new Error("No remote source available")}function Ft(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function Nt(e){const t={};for(const n in e)if(e.hasOwnProperty(n)){t[e[n]]=n}return t}function zt(e,t){const n=[];for(let r=0;r<e;r++)n.push(t(r));return n}const Ut=Nt(Ge),Vt=Nt(tt),Gt={};Ft(Gt,Ut),Ft(Gt,Vt);Nt(We);const Bt={nextZero:(e,t)=>{let n=t;for(;0!==e[n];)n++;return n},readUshort:(e,t)=>e[t]<<8|e[t+1],readShort:(e,t)=>{const n=Bt.ui8;return n[0]=e[t+1],n[1]=e[t+0],Bt.i16[0]},readInt:(e,t)=>{const n=Bt.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],Bt.i32[0]},readUint:(e,t)=>{const n=Bt.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],Bt.ui32[0]},readASCII:(e,t,n)=>n.map(n=>String.fromCharCode(e[t+n])).join(""),readFloat:(e,t)=>{const n=Bt.ui8;return zt(4,r=>{n[r]=e[t+3-r]}),Bt.fl32[0]},readDouble:(e,t)=>{const n=Bt.ui8;return zt(8,r=>{n[r]=e[t+7-r]}),Bt.fl64[0]},writeUshort:(e,t,n)=>{e[t]=n>>8&255,e[t+1]=255&n},writeUint:(e,t,n)=>{e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=n>>0&255},writeASCII:(e,t,n)=>{zt(n.length,r=>{e[t+r]=n.charCodeAt(r)})},ui8:new Uint8Array(8)};Bt.fl64=new Float64Array(Bt.ui8.buffer),Bt.writeDouble=(e,t,n)=>{Bt.fl64[0]=n,zt(8,n=>{e[t+n]=Bt.ui8[7-n]})};function qt(e){switch(e){case Ke.BYTE:case Ke.ASCII:case Ke.SBYTE:case Ke.UNDEFINED:return 1;case Ke.SHORT:case Ke.SSHORT:return 2;case Ke.LONG:case Ke.SLONG:case Ke.FLOAT:case Ke.IFD:return 4;case Ke.RATIONAL:case Ke.SRATIONAL:case Ke.DOUBLE:case Ke.LONG8:case Ke.SLONG8:case Ke.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function Wt(e,t,n,r){let o=null,i=null;const s=qt(t);switch(t){case Ke.BYTE:case Ke.ASCII:case Ke.UNDEFINED:o=new Uint8Array(n),i=e.readUint8;break;case Ke.SBYTE:o=new Int8Array(n),i=e.readInt8;break;case Ke.SHORT:o=new Uint16Array(n),i=e.readUint16;break;case Ke.SSHORT:o=new Int16Array(n),i=e.readInt16;break;case Ke.LONG:case Ke.IFD:o=new Uint32Array(n),i=e.readUint32;break;case Ke.SLONG:o=new Int32Array(n),i=e.readInt32;break;case Ke.LONG8:case Ke.IFD8:o=new Array(n),i=e.readUint64;break;case Ke.SLONG8:o=new Array(n),i=e.readInt64;break;case Ke.RATIONAL:o=new Uint32Array(2*n),i=e.readUint32;break;case Ke.SRATIONAL:o=new Int32Array(2*n),i=e.readInt32;break;case Ke.FLOAT:o=new Float32Array(n),i=e.readFloat32;break;case Ke.DOUBLE:o=new Float64Array(n),i=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t!==Ke.RATIONAL&&t!==Ke.SRATIONAL)for(let t=0;t<n;++t)o[t]=i.call(e,r+t*s);else for(let t=0;t<n;t+=2)o[t]=i.call(e,r+t*s),o[t+1]=i.call(e,r+(t*s+4));return t===Ke.ASCII?String.fromCharCode.apply(null,o):o}class Kt{constructor(e,t,n){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=n}}class Ht extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class Zt{async readRasters(e={}){const{window:t,width:n,height:r}=e;let{resX:o,resY:i,bbox:s}=e;const a=await this.getImage();let c=a;const l=await this.getImageCount(),u=a.getBoundingBox();if(t&&s)throw new Error('Both "bbox" and "window" passed.');if(n||r){if(t){const[e,n]=a.getOrigin(),[r,o]=a.getResolution();s=[e+t[0]*r,n+t[1]*o,e+t[2]*r,n+t[3]*o]}const e=s||u;if(n){if(o)throw new Error("Both width and resX passed");o=(e[2]-e[0])/n}if(r){if(i)throw new Error("Both width and resY passed");i=(e[3]-e[1])/r}}if(o||i){const e=[];for(let t=0;t<l;++t){const n=await this.getImage(t),{SubfileType:r,NewSubfileType:o}=n.fileDirectory;(0===t||2===r||1&o)&&e.push(n)}e.sort((e,t)=>e.getWidth()-t.getWidth());for(let t=0;t<e.length;++t){const n=e[t],r=(u[2]-u[0])/n.getWidth(),s=(u[3]-u[1])/n.getHeight();if(c=n,o&&o>r||i&&i>s)break}}let f=t;if(s){const[e,t]=a.getOrigin(),[n,r]=c.getResolution(a);f=[Math.round((s[0]-e)/n),Math.round((s[1]-t)/r),Math.round((s[2]-e)/n),Math.round((s[3]-t)/r)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return c.readRasters({...e,window:f})}}class Yt extends Zt{constructor(e,t,n,r,o={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=n,this.firstIFDOffset=r,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const n=this.bigTiff?4048:1024;return new Et(await this.source.fetch(e,void 0!==t?t:n),e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,n=this.bigTiff?8:2;let r=await this.getSlice(e);const o=this.bigTiff?r.readUint64(e):r.readUint16(e),i=o*t+(this.bigTiff?16:6);r.covers(e,i)||(r=await this.getSlice(e,i));const s={};let a=e+(this.bigTiff?8:2);for(let e=0;e<o;a+=t,++e){const e=r.readUint16(a),t=r.readUint16(a+2),n=this.bigTiff?r.readUint64(a+4):r.readUint32(a+4);let o,i;const c=qt(t),l=a+(this.bigTiff?12:8);if(c*n<=(this.bigTiff?8:4))o=Wt(r,t,n,l);else{const e=r.readOffset(l),i=qt(t)*n;if(r.covers(e,i))o=Wt(r,t,n,e);else{o=Wt(await this.getSlice(e,i),t,n,e)}}i=1===n&&-1===qe.indexOf(e)&&t!==Ke.RATIONAL&&t!==Ke.SRATIONAL?o[0]:o,s[Ge[e]]=i}const c=function(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let r=4;r<=4*t[3];r+=4){const o=tt[t[r]],i=t[r+1]?Ge[t[r+1]]:null,s=t[r+2],a=t[r+3];let c=null;if(i){if(c=e[i],null==c)throw new Error(`Could not get value of geoKey '${o}'.`);"string"==typeof c?c=c.substring(a,a+s-1):c.subarray&&(c=c.subarray(a,a+s),1===s&&(c=c[0]))}else c=a;n[o]=c}return n}(s),l=r.readOffset(e+n+t*o);return new Kt(s,c,l)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(0===e)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){if(t instanceof Ht)throw new Ht(e);throw t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(0===t.nextIFDByteOffset)throw new Ht(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new Ct(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0;if(this.ifdRequests.length>0){if(0===(await this.ifdRequests[this.ifdRequests.length-1]).nextIFDByteOffset)return this.ifdRequests.length;e=this.ifdRequests.length}let t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(e){if(!(e instanceof Ht))throw e;t=!1}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",n=t.length+100;let r=await this.getSlice(e,n);if(t===Wt(r,Ke.ASCII,t.length,e)){const t=Wt(r,Ke.ASCII,n,e).split("\n")[0],o=Number(t.split("=")[1].split(" ")[0])+t.length;o>n&&(r=await this.getSlice(e,o));const i=Wt(r,Ke.ASCII,o,e);this.ghostValues={},i.split("\n").filter(e=>e.length>0).map(e=>e.split("=")).forEach(([e,t])=>{this.ghostValues[e]=t})}return this.ghostValues}static async fromSource(e,t){const n=await e.fetch(0,1024),r=new Ot(n),o=r.getUint16(0,0);let i;if(18761===o)i=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");i=!1}const s=r.getUint16(2,i);let a;if(42===s)a=!1;else{if(43!==s)throw new TypeError("Invalid magic number.");if(a=!0,8!==r.getUint16(4,i))throw new Error("Unsupported offset byte-size.")}const c=a?r.getUint64(8,i):r.getUint32(4,i);return new Yt(e,i,a,c,t)}close(){return"function"==typeof this.source.close&&this.source.close()}}async function $t(e,t={}){return Yt.fromSource(Mt(e,t))}var Xt=n(28),Qt=n.n(Xt),Jt="undefined"!=typeof navigator?navigator.hardwareConcurrency:null,en=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;c()(this,e),this.workers=[],this.idleWorkers=[],this.waitQueue=[],this.decoder=null;for(var n=0;n<t;++n){var r=new Qt.a;this.workers.push(r),this.idleWorkers.push(r)}}var t,n,r;return u()(e,[{key:"decode",value:(r=s()(o.a.mark((function e(t,n){var r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForWorker();case 2:return r=e.sent,e.abrupt("return",new Promise((function(e,o){r.onmessage=function(t){i.finishTask(r),e(t.data[0])},r.onerror=function(e){i.finishTask(r),o(e)},r.postMessage(["decode",t,n],[n])})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"waitForWorker",value:(n=s()(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.idleWorkers.pop())){e.next=3;break}return e.abrupt("return",t);case 3:return n={},r=new Promise((function(e){n.resolve=e})),this.waitQueue.push(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"finishTask",value:(t=s()(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.waitQueue.pop())?n.resolve(t):this.idleWorkers.push(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){for(var e=0;e<this.workers.length;++e)this.workers[e].terminate()}}]),e}(),tn=n(29),nn=n.n(tn),rn=function(){function e(t){var n,r,o,i=this,s=t.data,a=t.dimensions,l=t.isRgb,u=t.scale,f=void 0===u?1:u,h=t.translate,p=void 0===h?{x:0,y:0}:h;(c()(this,e),Array.isArray(s))?(n=W()(s,1)[0],this.numLevels=s.length):(n=s,this.numLevels=1);this.type="zarr",this.scale=f,this.translate=p,this.isRgb=l||(r=n.shape,o=r[r.length-1],r.length>2&&(3===o||4===o)),this.dimensions=a,this._data=s,this._dimIndices=new Map,a.forEach((function(e,t){var n=e.field;return i._dimIndices.set(n,t)}));var d=n,v=d.dtype,m=d.chunks;this.dtype=v.includes(">")?"<".concat(v.slice(1)):v,this.tileSize=m[this._dimIndices.get("x")]}var t;return u()(e,[{key:"getTile",value:(t=s()(o.a.mark((function e(t){var n,r,i,a,c,l,u,f,h,p,d,v,m=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.x,r=t.y,i=t.z,a=t.loaderSelection,c=void 0===a?[]:a,l=this._getSource(i),u=["x","y"].map((function(e){return m._dimIndices.get(e)})),f=W()(u,2),h=f[0],p=f[1],d=c.map(function(){var e=s()(o.a.mark((function e(t){var i,s,a,c,u,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=m._serializeSelection(t))[p]=r,i[h]=n,e.next=5,l.getRawChunk(i);case 5:if(s=e.sent,a=s.data,c=W()(s.shape,2),u=c[0],f=c[1],!(u<m.tileSize||f<m.tileSize)){e.next=12;break}return e.abrupt("return",Z({data:a,width:f,height:u},m.tileSize,m.tileSize));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(d);case 6:return v=e.sent,e.abrupt("return",{data:v,width:this.tileSize,height:this.tileSize});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getRaster",value:function(){var e=s()(o.a.mark((function e(t){var n,r,i,a,c,l,u,f,h,p,d,v=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.z,r=t.loaderSelection,i=void 0===r?[]:r,a=this._getSource(n),c=["x","y"].map((function(e){return v._dimIndices.get(e)})),l=W()(c,2),u=l[0],f=l[1],h=i.map(function(){var e=s()(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=v._serializeSelection(t))[f]=null,n[u]=null,v.isRgb&&(n[n.length-1]=null),e.next=6,a.getRaw(n);case 6:return r=e.sent,i=r.data,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(h);case 6:return p=e.sent,d=a.shape,e.abrupt("return",{data:p,width:d[u],height:d[f]});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTileError",value:function(e){if(!(e instanceof ze.BoundsCheckError))throw e}},{key:"getRasterSize",value:function(e){var t=this,n=e.z,r=this._getSource(n).shape,o=["y","x"].map((function(e){return r[t._dimIndices.get(e)]})),i=W()(o,2);return{height:i[0],width:i[1]}}},{key:"getMetadata",value:function(){return{}}},{key:"_getSource",value:function(e){return"number"==typeof e&&this.isPyramid?this._data[e]:this._data}},{key:"_serializeSelection",value:function(e){var t=this;if(Array.isArray(e))return k()(e);var n=Array(this.dimensions.length).fill(0);return Object.entries(e).forEach((function(e){var r=W()(e,2),o=r[0],i=r[1];if(!t._dimIndices.has(o))throw Error('Dimension "'.concat(o,'" does not exist on loader.\n           Must be one of "').concat(t.dimensions.map((function(e){return e.field})),'."'));var s=t._dimIndices.get(o);switch(nn()(i)){case"number":n[s]=i;break;case"string":var a=t.dimensions[s],c=a.values,l=a.type;if("nominal"===l||"ordinal"===l){n[s]=c.indexOf(i);break}throw Error('Cannot use selection "'.concat(i,'" for dimension "').concat(o,'" with type "').concat(l,'".'));default:throw Error("Named selection must be a string or number. Got ".concat(i," for ").concat(o,"."))}})),n}},{key:"isPyramid",get:function(){return Array.isArray(this._data)}},{key:"base",get:function(){return this.isPyramid?this._data[0]:this._data}}]),e}(),on=n(30),sn=n.n(on),an=function(){function e(t){c()(this,e);this.metadataOMEXML=sn.a.parse(t,{ignoreAttributes:!1,attributeNamePrefix:"@_",trimValues:!0,allowBooleanAttributes:!0}).OME;var n=(this.metadataOMEXML.Image.length?this.metadataOMEXML.Image[0]:this.metadataOMEXML.Image).Pixels;this._Pixels=n,this.SizeZ=Number.parseInt(n["@_SizeZ"]),this.SizeT=Number.parseInt(n["@_SizeT"]),this.SizeC=Number.parseInt(n["@_SizeC"]),this.SizeX=Number.parseInt(n["@_SizeX"]),this.SizeY=Number.parseInt(n["@_SizeY"]),this.DimensionOrder=n["@_DimensionOrder"],this.Type=n["@_Type"];var r=n["@_PhysicalSizeYUnit"];this.PhysicalSizeYUnit=r&&r.includes("µm")?"µm":r;var o=n["@_PhysicalSizeXUnit"];this.PhysicalSizeXUnit=o&&o.includes("µm")?"µm":o,this.PhysicalSizeY=n["@_PhysicalSizeY"],this.PhysicalSizeX=n["@_PhysicalSizeX"]}return u()(e,[{key:"getChannelNames",value:function(){var e=this._Pixels.Channel;return Array.isArray(e)?e.map((function(e){return e["@_Name"]})):[e["@_Name"]]}},{key:"getNumberOfImages",value:function(){return this.metadataOMEXML.Image.length||0}}]),e}();function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un={uint8:"<u1",uint16:"<u2",uint32:"<u4",float32:"<f4"},fn=function(){function e(t){var n=t.tiff,r=t.pool,o=t.firstImage,i=t.omexmlString,s=t.offsets;c()(this,e),this.pool=r,this.tiff=n,this.type="ome-tiff",this.omexml=new an(i),this.physicalSizes={x:{value:this.omexml.PhysicalSizeX,unit:this.omexml.PhysicalSizeXUnit},y:{value:this.omexml.PhysicalSizeY,unit:this.omexml.PhysicalSizeYUnit}},this.software=o.fileDirectory.Software,this.offsets=s||[],this.channelNames=this.omexml.getChannelNames(),this.width=this.omexml.SizeX,this.height=this.omexml.SizeY,this.tileSize=o.getTileWidth();var a=o.fileDirectory.SubIFDs;this.numLevels=this.omexml.getNumberOfImages()||a&&a.length-1,this.isBioFormats6Pyramid=a,this.isPyramid=this.numLevels>1,this.dimensions=[{field:"channel",type:"nominal",values:this.channelNames},{field:"z",type:"ordinal",values:R(this.omexml.SizeZ)},{field:"time",type:"ordinal",values:R(this.omexml.SizeT)},{field:"x",type:"quantitative",values:null},{field:"y",type:"quantitative",values:null}],this.dtype=un[this.omexml.Type]}var t,n;return u()(e,[{key:"_getIFDIndex",value:function(e){var t,n=e.z,r=void 0===n?0:n,o=e.channel,i=e.time,s=void 0===i?0:i;if(this.channelNames.every((function(e){return!e})))console.warn("No channel names found in OMEXML.  Please be sure to use numeric indexing."),t=o;else if("string"==typeof o)t=this.channelNames.indexOf(o);else{if("number"!=typeof o)throw new Error("Channel selection must be numeric index or string");t=o}var a=this.omexml,c=a.SizeZ,l=a.SizeT,u=a.SizeC;switch(a.DimensionOrder){case"XYZCT":return s*c*u+t*c+r;case"XYZTC":return t*c*l+s*c+r;case"XYCTZ":return r*u*l+s*u+t;case"XYCZT":return s*u*c+r*u+t;case"XYTCZ":return r*l*u+t*l+s;case"XYTZC":return t*l*c+r*l+s;default:throw new Error("Dimension order is required for OMETIFF")}}},{key:"onTileError",value:function(e){console.error(e)}},{key:"getTile",value:(n=s()(o.a.mark((function e(t){var n,r,i,a,c,l,u,f,h,p,d,v,m,x,g,y,b=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.x,r=t.y,i=t.z,a=t.loaderSelection,c=void 0===a?[]:a,this._tileInBounds({x:n,y:r,z:i})){e.next=3;break}return e.abrupt("return",null);case 3:return l=this.tiff,u=this.isBioFormats6Pyramid,f=this.omexml,h=this.tileSize,p=f.SizeZ,d=f.SizeT,v=f.SizeC,m=i*p*d*v,g=c.map(function(){var e=s()(o.a.mark((function e(t){var s,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=b._getIFDIndex(t),a=m+s,u){e.next=6;break}b._parseIFD(a),e.next=11;break;case 6:return b._parseIFD(s),e.next=9,l.getImage(s);case 9:c=e.sent,0!==i&&(l.ifdRequests[a]=l.parseFileDirectoryAt(c.fileDirectory.SubIFDs[i-1]));case 11:return e.next=13,l.getImage(a);case 13:return x=e.sent,e.abrupt("return",b._getChannel({image:x,x:n,y:r}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(g);case 9:return y=e.sent,e.abrupt("return",{data:y,width:h,height:h});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getRaster",value:function(){var e=s()(o.a.mark((function e(t){var n,r,i,a,c,l,u,f,h,p,d,v,m,x=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.z,r=t.loaderSelection,i=this.tiff,a=this.omexml,c=this.isBioFormats6Pyramid,l=this.pool,u=a.SizeZ,f=a.SizeT,h=a.SizeC,e.next=5,Promise.all(r.map(function(){var e=s()(o.a.mark((function e(t){var r,s,a,p,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=x._getIFDIndex(t),s=n*u*f*h+r,c){e.next=6;break}x._parseIFD(s),e.next=11;break;case 6:return x._parseIFD(r),e.next=9,i.getImage(r);case 9:a=e.sent,0!==n&&(i.ifdRequests[s]=i.parseFileDirectoryAt(a.fileDirectory.SubIFDs[n-1]));case 11:return e.next=13,i.getImage(s);case 13:return p=e.sent,e.next=16,p.readRasters({pool:l});case 16:return d=e.sent,e.abrupt("return",d[0]);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:if(p=e.sent,r&&0!==r.length){e.next=8;break}return e.abrupt("return",ln({data:[]},this.getRasterSize({z:n})));case 8:return e.next=10,i.getImage(n*u*f*h+this._getIFDIndex(r[0]));case 10:return d=e.sent,v=d.getWidth(),m=d.getHeight(),e.abrupt("return",{data:p,width:v,height:m});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRasterSize",value:function(e){var t=e.z,n=this.width;return{height:this.height>>t,width:n>>t}}},{key:"getMetadata",value:function(){var e,t=this.omexml,n=t.metadataOMEXML,r=n.Image.AcquisitionDate,o=n.StructuredAnnotations,i=t.SizeX,s=t.SizeY,a=t.SizeZ,c=t.SizeT,l=t.SizeC,u=t.Type,f=t.PhysicalSizeX,h=t.PhysicalSizeXUnit,p=t.PhysicalSizeY,d=t.PhysicalSizeYUnit,v=t.PhysicalSizeZ,m=t.PhysicalSizeZUnit,x=f&&h?"".concat(f," (").concat(h,")"):"-",g=p&&d?"".concat(p," (").concat(d,")"):"-",y=v&&m?"".concat(v," (").concat(m,")"):"-";if(o){var b=o.MapAnnotation;e=b&&b.Value?Object.entries(b.Value).length:0}return{"Acquisition Date":r,"Dimensions (XY)":"".concat(i," x ").concat(s),"Pixels Type":u,"Pixels Size (XYZ)":"".concat(x," x ").concat(g," x ").concat(y),"Z-sections/Timepoints":"".concat(a," x ").concat(c),Channels:l,"ROI Count":e}}},{key:"_getChannel",value:(t=s()(o.a.mark((function e(t){var n,r,i,s,a,c,l,u,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.image,r=t.x,i=t.y,s=this.dtype,a=A[s].TypedArray,e.next=5,n.getTileOrStrip(r,i,0,this.pool);case 5:if(c=e.sent,l=new a(c.data),n.littleEndian||Y(l),!(l.length<this.tileSize*this.tileSize)){e.next=12;break}return u=Math.min(this.tileSize,n.getWidth()-r*this.tileSize),f=l.length/u,e.abrupt("return",Z({data:l,width:u,height:f},this.tileSize,this.tileSize));case 12:return e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_tileInBounds",value:function(e){return function(e){var t=e.x,n=e.y,r=e.z,o=e.width,i=e.height,s=e.tileSize,a=e.numLevels,c=t<Math.ceil(o/(s*Math.pow(2,r)))&&t>=0,l=n<Math.ceil(i/(s*Math.pow(2,r)))&&n>=0;return c&&l&&(r>=0&&r<a)}({x:e.x,y:e.y,z:e.z,width:this.width,height:this.height,tileSize:this.tileSize,numLevels:this.numLevels})}},{key:"_parseIFD",value:function(e){var t=this.tiff,n=this.offsets;n.length>0&&(t.ifdRequests[e]=t.parseFileDirectoryAt(n[e]))}}]),e}();function hn(e,t){return pn.apply(this,arguments)}function pn(){return(pn=s()(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t).concat(n));case 2:if(404!==(r=e.sent).status){e.next=5;break}throw Error("Key '".concat(n,"' does not exist on zarr store."));case 5:return e.next=7,r.json();case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dn=function(){function e(t,n){if(c()(this,e),this.zarrPath=t,this.rootAttrs=n,!("omero"in n))throw Error("Remote zarr is not ome-zarr format.");this.imageData=n.omero}var t,n;return u()(e,[{key:"loadOMEZarr",value:(n=s()(o.a.mark((function e(){var t,n,r,i,s,a,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["0"],"multiscales"in this.rootAttrs&&(n=this.rootAttrs.multiscales[0].datasets,t=n.map((function(e){return e.path}))),r=t.map((function(e){return Object(ze.openArray)({store:c.zarrPath,path:e})})),e.next=5,Promise.all(r);case 5:return i=e.sent,s=i.length>1?i:i[0],a=["t","c","z","y","x"].map((function(e){return{field:e}})),e.abrupt("return",{loader:new rn({data:s,dimensions:a}),metadata:this.imageData});case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}],[{key:"fromUrl",value:(t=s()(o.a.mark((function t(n){var r,i,s,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof n){t.next=7;break}return r=n.endsWith("/")?n:"".concat(n,"/"),t.next=4,hn(r,".zattrs");case 4:i=t.sent,t.next=13;break;case 7:return r=n,t.next=10,n.getItem(".zattrs");case 10:s=t.sent,a=new TextDecoder("utf-8"),i=JSON.parse(a.decode(new Uint8Array(s)));case 13:return t.abrupt("return",new e(r,i));case 14:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]),e}();function vn(e){return mn.apply(this,arguments)}function mn(){return(mn=s()(o.a.mark((function e(t){var n,r,i,s,a,c,l,u,f,h,p,d,v,m,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.dimensions,i=t.isPyramid,s=t.isRgb,a=t.scale,c=t.translate,!i){e.next=25;break}if("string"!=typeof n){e.next=13;break}return f="".concat(n).concat("/"===n.slice(-1)?"":"/",".zmetadata"),e.next=6,fetch(f);case 6:return h=e.sent,e.next=9,h.json();case 9:p=e.sent,u=p.metadata,e.next=19;break;case 13:return e.next=15,n.getItem(".zmetadata");case 15:d=e.sent,v=new TextDecoder("utf-8"),m=JSON.parse(v.decode(new Uint8Array(d))),u=m.metadata;case 19:return x=Object.keys(u).filter((function(e){return e.includes(".zarray")})).map((function(e){return e.slice(0,-7)})),e.next=22,Promise.all(x.map((function(e){return Object(ze.openArray)({store:n,path:e})})));case 22:l=e.sent,e.next=28;break;case 25:return e.next=27,Object(ze.openArray)({store:n});case 27:l=e.sent;case 28:return e.abrupt("return",new rn({data:l,dimensions:r,scale:a,translate:c,isRgb:s}));case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e){return gn.apply(this,arguments)}function gn(){return(gn=s()(o.a.mark((function e(t){var n,r,i,s,a,c,l,u,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.offsets,i=void 0===r?[]:r,s=t.headers,a=void 0===s?{}:s,e.next=3,$t(n,a);case 3:return c=e.sent,e.next=6,c.getImage(0);case 6:return l=e.sent,u=new en,f=l.fileDirectory.ImageDescription,e.abrupt("return",new fn({tiff:c,pool:u,firstImage:l,omexmlString:f,offsets:i}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}])}));
//# sourceMappingURL=bundle.umd.js.map