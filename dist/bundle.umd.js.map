{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"@babel/runtime/helpers/getPrototypeOf\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///external \"@deck.gl/core\"","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"@luma.gl/constants\"","webpack:///external \"@babel/runtime/helpers/inherits\"","webpack:///external \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"@babel/runtime/helpers/slicedToArray\"","webpack:///external \"@deck.gl/layers\"","webpack:///external \"react\"","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///external \"zarr\"","webpack:///external \"@babel/runtime/helpers/get\"","webpack:///external \"@luma.gl/core\"","webpack:///external \"quickselect\"","webpack:///external \"@babel/runtime/helpers/assertThisInitialized\"","webpack:///external \"threads\"","webpack:///external \"url\"","webpack:///external \"@deck.gl/geo-layers\"","webpack:///external \"buffer\"","webpack:///external \"@deck.gl/react\"","webpack:///external \"txml\"","webpack:///external \"pako/lib/inflate\"","webpack:///./node_modules/https-browserify/index.js","webpack:///./src/loaders/viv.worker.js","webpack:///external \"@babel/runtime/helpers/typeof\"","webpack:///external \"fast-xml-parser\"","webpack:///./node_modules/worker-loader/dist/workers/InlineWorker.js","webpack:///./src/constants.js","webpack:///./src/layers/utils.js","webpack:///./src/layers/XRLayer/XRLayer.js","webpack:///./src/layers/XRLayer/xr-layer-fragment-colormap.glsl","webpack:///./src/layers/XRLayer/xr-layer-fragment.glsl","webpack:///./src/layers/XRLayer/xr-layer-vertex.glsl","webpack:///./src/layers/XRLayer/index.js","webpack:///./src/layers/VivViewerLayer/VivViewerLayerBase.js","webpack:///./src/layers/VivViewerLayer/utils.js","webpack:///./src/loaders/utils.js","webpack:///./src/layers/StaticImageLayer.js","webpack:///./src/layers/VivViewerLayer/VivViewerLayer.js","webpack:///./src/layers/VivViewerLayer/index.js","webpack:///./src/layers/OverviewLayer.js","webpack:///./src/views/utils.js","webpack:///./src/layers/ScaleBarLayer.js","webpack:///./src/viewers/VivViewer.js","webpack:///./src/views/VivView.js","webpack:///./src/views/DetailView.js","webpack:///./src/views/OverviewView.js","webpack:///./src/views/SideBySideView.js","webpack:///./src/viewers/PictureInPictureViewer.js","webpack:///./src/viewers/SideBySideViewer.js","webpack:///./node_modules/geotiff/src/globals.js","webpack:///./node_modules/geotiff/src/predictor.js","webpack:///./node_modules/geotiff/src/compression/basedecoder.js","webpack:///./node_modules/geotiff/src/compression/raw.js","webpack:///./node_modules/geotiff/src/compression/lzw.js","webpack:///./node_modules/geotiff/src/compression/jpeg.js","webpack:///./node_modules/geotiff/src/compression/deflate.js","webpack:///./node_modules/geotiff/src/compression/packbits.js","webpack:///./node_modules/geotiff/src/resample.js","webpack:///./node_modules/geotiff/src/geotiffimage.js","webpack:///./node_modules/geotiff/src/compression/index.js","webpack:///./node_modules/geotiff/src/rgb.js","webpack:///./node_modules/geotiff/src/dataview64.js","webpack:///./node_modules/geotiff/src/dataslice.js","webpack:///./node_modules/geotiff/src/pool.js","webpack:///./node_modules/geotiff/src/source.js","webpack:///./node_modules/geotiff/src/utils.js","webpack:///./node_modules/geotiff/src/geotiffwriter.js","webpack:///./node_modules/geotiff/src/geotiff.js","webpack:///./src/loaders/Pool.js","webpack:///./src/loaders/zarrLoader.js","webpack:///./src/loaders/omeXML.js","webpack:///./src/loaders/OMETiffLoader.js","webpack:///./src/loaders/omeZarrReader.js","webpack:///./src/loaders/index.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","http","url","https","validateParams","params","parse","protocol","Error","request","cb","this","URL","webkitURL","content","blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","e","Blob","Worker","createObjectURL","encodeURIComponent","DEFAULT_COLOR_OFF","MAX_SLIDERS_AND_CHANNELS","DTYPE_VALUES","format","GL","R8UI","dataFormat","RED_INTEGER","type","UNSIGNED_BYTE","max","TypedArray","Uint8Array","R16UI","UNSIGNED_SHORT","Uint16Array","R32UI","UNSIGNED_INT","Uint32Array","R32F","RED","FLOAT","Float32Array","range","len","Array","keys","padWithDefault","arr","defaultValue","padWidth","push","defaultProps","pickable","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","channelData","async","bounds","compare","colorValues","sliderValues","channelIsOn","opacity","dtype","colormap","XRLayer","props","fragmentShaderColormap","replace","fragmentShaderDtype","vs","fs","project32","picking","getAttributeManager","add","positions","size","DOUBLE","fp64","use64bitPositions","update","calculatePositions","noAlloc","setState","numInstances","Float64Array","state","textures","values","forEach","tex","oldProps","changeFlags","extensionsChanged","gl","context","model","_getModel","invalidateAll","loadTexture","attributeManager","invalidate","Model","getShaders","id","geometry","Geometry","drawMode","TRIANGLE_FAN","vertexCount","attributes","texCoords","isInstanced","uniforms","domain","numTextures","filter","length","lengths","every","colors","map","color","maxSliderValue","sliders","slider","padSize","paddedColorValues","paddedSliderValues","reduce","acc","val","concat","padColorsAndSliders","slice","setUniforms","draw","channel0","channel1","channel2","channel3","channel4","channel5","data","dataToTexture","width","height","Texture2D","mipmaps","parameters","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","Layer","layerName","TileLayer","minZoom","maxZoom","renderSubLayers","tile","bbox","left","top","right","bottom","visible","onHover","some","v","viewportId","VivViewerLayerBase","viewport","tileset","_viewport","padTileWithZeros","targetWidth","targetHeight","padded","constructor","offset","strip","subarray","set","byteSwapInplace","src","b","BYTES_PER_ELEMENT","flipper","buffer","byteOffset","numFlips","endByteIndex","j","getChannelStats","loader","loaderSelection","z","isPyramid","numLevels","getRaster","rasters","channelStats","min","Infinity","total","mean","sumSquared","sd","mid","Math","floor","firstQuartileLocation","thirdQuartileLocation","quickselect","median","q1","q3","translate","scale","padEven","StaticImageLayer","then","propsChanged","loaderChanged","includes","loaderSelectionChanged","info","sourceLayer","scaleBounds","Promise","resolve","CompositeLayer","VivViewerLayer","onTileError","tileSize","getTileData","x","y","getTile","console","warn","tiledLayer","refinementStrategy","updateTriggers","zoom","getRasterSize","boundingBox","boundingBoxColor","boundingBoxOutlineWidth","viewportOutlineColor","viewportOutlineWidth","overviewScale","OverviewLayer","PolygonLayer","getPolygon","f","filled","stroked","getLineColor","getLineWidth","getVivId","makeBoundingBox","viewState","OrthographicView","makeViewport","unproject","ScaleBarLayer","unit","position","barLength","barHeight","numUnits","viewLength","getPosition","yCoord","xLeftCoord","LineLayer","getSourcePosition","getTargetPosition","getWidth","getColor","TextLayer","text","String","getSize","sizeUnits","sizeScale","characterSet","split","target","VivViewer","viewStates","views","viewStateHook","view","filterViewState","initialViewState","_onViewStateChange","_viewStateHook","layerFilter","deck","React","createRef","initVivView","hoverHooks","layer","viewId","oldViewState","prevState","currentViewState","coordinate","handleValue","dataCoords","layerZoomScale","layerProps","getLayers","randomize","deckGLViews","getDeckGlView","random","holdFirstElement","randomWieghted","randomizedIndex","round","navigator","vendor","indexOf","userAgent","className","ref","glOptions","webgl2","layers","_renderLayers","onViewStateChange","getCursor","isDragging","PureComponent","VivView","controller","DetailView","layerViewState","detailLayer","physicalSizes","OverviewView","detailHeight","detailWidth","margin","minimumWidth","maximumWidth","_setHeightWidthScale","_setXY","rasterWidth","rasterHeight","heightWidthRatio","_imageWidth","_imageHeight","clear","detail","coords","SideBySideView","linkedIds","panLock","zoomLock","viewStateId","thisViewState","currentX","currentY","dZoom","oldX","oldY","dx","dy","border","PictureInPictureViewer","overview","overviewOn","detailViewState","layerConfig","overviewViewState","overviewView","SideBySideViewer","detailViewLeft","fieldTagNames","fieldTags","parseInt","arrayFields","BitsPerSample","ExtraSamples","SampleFormat","StripByteCounts","StripOffsets","StripRowCounts","TileByteCounts","TileOffsets","fieldTypeNames","fieldTypes","photometricInterpretations","ExtraSamplesValues","geoKeyNames","1024","1025","1026","2048","2049","2050","2051","2052","2053","2054","2055","2056","2057","2058","2059","2060","2061","2062","3072","3073","3074","3075","3076","3077","3078","3079","3080","3081","3082","3083","3084","3085","3086","3087","3088","3089","3090","3091","3092","3093","3094","3095","3096","4096","4097","4098","4099","decodeRowAcc","row","stride","decodeRowFloatingPoint","bytesPerSample","index","count","wc","copy","fileDirectory","decoded","decodeBlock","predictor","Predictor","isTiled","block","bitsPerSample","planarConfiguration","byteLength","applyPredictor","TileWidth","ImageWidth","TileLength","RowsPerStrip","ImageLength","PlanarConfiguration","appendReversed","dest","source","decompress","input","dictionaryIndex","dictionaryChar","dictionaryLength","initDictionary","getNext","array","byte","de","ef","fg","dg","chunk1","chunks","chunk2","hi","getByte","addToDictionary","getDictionaryReversed","rev","result","oldCode","code","oldVal","undefined","dctZigZag","Int32Array","buildHuffmanTable","codeLengths","k","children","q","pop","decodeScan","initialOffset","frame","components","resetInterval","spectralStart","spectralEnd","successivePrev","successive","mcusPerLine","progressive","startOffset","bitsData","bitsCount","readBit","nextByte","toString","decodeHuffman","tree","bit","node","receive","initialLength","receiveAndExtend","eobrun","successiveACNextValue","successiveACState","decodeMcu","component","decodeFunction","mcu","col","mcuCol","blockRow","blockCol","h","blocks","blocksPerLine","componentsLength","decodeFn","zz","huffmanTableDC","diff","pred","rs","huffmanTableAC","direction","marker","mcuExpected","blocksPerColumn","mcusPerColumn","usedResetInterval","buildComponentData","lines","samplesPerLine","R","quantizeAndInverse","dataOut","dataIn","qt","quantizationTable","v0","v1","v2","v3","v4","v5","v6","v7","sample","scanLine","line","JpegStreamReader","jfif","adobe","quantizationTables","huffmanTablesAC","huffmanTablesDC","resetFrames","frames","readUint16","readDataBlock","prepareComponents","componentId","maxH","maxV","ceil","scanLines","blocksPerLineForMcu","blocksPerColumnForMcu","fileMarker","appData","version","major","minor","densityUnits","xDensity","yDensity","thumbWidth","thumbHeight","thumbData","flags0","flags1","transformCode","quantizationTablesEnd","quantizationTableSpec","tableData","extended","precision","componentsOrder","componentsCount","qId","quantizationIdx","huffmanLength","huffmanTableSpec","codeLengthSum","huffmanValues","selectorsCount","tableSpec","successiveApproximation","processed","cp","outComponents","scaleX","scaleY","out","oi","super","reader","JPEGTables","getResult","dataView","DataView","header","getInt8","next","getUint8","copyNewSize","samplesPerPixel","getPrototypeOf","lerp","resample","valueArrays","inWidth","inHeight","outWidth","outHeight","method","toLowerCase","relX","relY","newArray","cy","cx","resampleNearest","rawY","yl","yh","rawX","tx","xl","xh","ll","hl","lh","hh","resampleBilinear","resampleInterleaved","valueArray","samples","resampleNearestInterleaved","resampleBilinearInterleaved","sum","start","end","arrayForType","Int8Array","Int16Array","geoKeys","littleEndian","cache","tiles","SamplesPerPixel","getHeight","bits","RangeError","sampleIndex","getUint16","getUint32","getInt16","getInt32","getFloat32","getFloat64","poolOrDecoder","numTilesPerRow","getTileWidth","numTilesPerCol","getTileHeight","byteCount","fetch","decode","imageWindow","interleave","resampleMethod","tileWidth","tileHeight","minXTile","maxXTile","minYTile","maxYTile","windowWidth","bytesPerPixel","getBytesPerPixel","srcSampleOffsets","sampleReaders","getReaderForSample","promises","yTile","xTile","si","getSampleByteSize","promise","getTileOrStrip","firstLine","firstCol","lastLine","lastCol","ymax","xmax","pixelOffset","windowCoordinate","all","resampled","wnd","pool","fillValue","numPixels","reject","apply","fill","getArrayForSample","isArray","Compression","getDecoder","_readRaster","enableAlpha","pi","PhotometricInterpretation","readRasters","subOptions","raster","rgbRaster","fromWhiteIsZero","fromBlackIsZero","colorMap","greenOffset","blueOffset","mapIndex","fromPalette","ColorMap","cmykRaster","fromCMYK","yCbCrRaster","Uint8ClampedArray","cr","fromYCbCr","cieLabRaster","g","fromCIELab","ModelTiepoint","tiePoints","metadata","GDAL_METADATA","string","xmlDom","substring","tagName","items","child","item","Number","GDAL_NODATA","modelTransformation","ModelTransformation","referenceImage","modelPixelScale","ModelPixelScale","refResX","refResY","refResZ","getResolution","GTRasterTypeGeoKey","origin","getOrigin","resolution","x1","y1","x2","y2","DataView64","arrayBuffer","_dataView","combined","isSafeInteger","isNegative","carrying","DataSlice","sliceOffset","bigTiff","_sliceOffset","_littleEndian","_bigTiff","sliceTop","readUint32","readUint64","hardwareConcurrency","BlockedSource","retrievalFunction","blockSize","blockRequests","Map","blockIdsAwaitingRequest","immediate","allBlockIds","missingBlockIds","current","blockId","has","Set","milliseconds","setTimeout","wait","groups","blockIds","getCoherentBlockGroups","from","sort","group","requestData","response","delete","missingRequests","rangeOffset","rangeLength","rangeTop","rangeData","ArrayBuffer","rangeView","delta","topDelta","usedBlockLength","blockInnerOffset","rangeInnerOffset","blockView","readRangeFromBlocks","requestedOffset","requestedLength","makeRemoteSource","options","forceXHR","headers","Range","ok","status","makeFetchSource","XMLHttpRequest","open","responseType","requestHeaders","entries","setRequestHeader","onload","onerror","send","makeXHRSource","parsed","on","chunk","makeHttpSource","invert","oldObj","newObj","times","numTimes","func","results","tagName2Code","geoKeyName2Code","name2code","_binBE","nextZero","oincr","readUshort","buff","readShort","ui8","i16","readInt","i32","readUint","ui32","readASCII","fromCharCode","join","readFloat","fl32","readDouble","fl64","writeUshort","writeUint","writeASCII","charCodeAt","writeDouble","getFieldTypeLength","fieldType","BYTE","ASCII","SBYTE","UNDEFINED","SHORT","SSHORT","LONG","SLONG","IFD","RATIONAL","SRATIONAL","LONG8","SLONG8","IFD8","getValues","dataSlice","readMethod","fieldTypeLength","readUint8","readInt8","readInt16","readInt32","readInt64","readFloat32","readFloat64","ImageFileDirectory","geoKeyDirectory","nextIFDByteOffset","GeoTIFFImageIndexError","GeoTIFFBase","resX","resY","firstImage","getImage","usedImage","imageCount","getImageCount","imgBBox","getBoundingBox","oX","oY","rX","rY","usedBBox","allImages","image","SubfileType","subfileType","NewSubfileType","newSubfileType","imgResX","imgResY","imageResX","imageResY","firstIFDOffset","ifdRequests","ghostValues","fallbackSize","entrySize","offsetSize","getSlice","numDirEntries","byteSize","covers","entryCount","fieldTag","typeCount","fieldValues","valueOffset","actualOffset","readOffset","rawGeoKeyDirectory","GeoKeyDirectory","location","parseGeoKeyDirectory","parseFileDirectoryAt","requestIFD","previousIfd","ifd","hasNext","detectionString","heuristicAreaSize","metadataSize","fullString","headerData","BOM","TypeError","magicNumber","getUint64","close","fromSource","defaultPoolSize","Pool","workers","idleWorkers","waitQueue","decoder","w","waitForWorker","currentWorker","onmessage","event","finishTask","error","postMessage","idleWorker","waiter","terminate","ZarrLoader","base","shape","lastDimSize","dimensions","isRgb","_data","_dimIndices","field","_getSource","xIndex","yIndex","dataRequests","sel","chunkKey","_serializeSelection","getRawChunk","getRaw","err","BoundsCheckError","selection","serialized","dimName","dimIndex","OMEXML","omexmlString","metadataOMEXML","parser","ignoreAttributes","attributeNamePrefix","trimValues","allowBooleanAttributes","OME","Pixels","Image","_Pixels","SizeZ","SizeT","SizeC","SizeX","SizeY","DimensionOrder","Type","PhysicalSizeYUnit","PhysicalSizeXUnit","PhysicalSizeY","PhysicalSizeX","Channel","channel","DTYPE_LOOKUP","uint8","uint16","uint32","float32","OMETiffLoader","tiff","offsets","omexml","software","Software","channelNames","getChannelNames","SubIFDs","getNumberOfImages","isBioFormats6Pyramid","channelIndex","time","_tileInBounds","pyramidOffset","tileRequests","_getIFDIndex","pyramidIndex","_parseIFD","parentImage","_getChannel","roiCount","AcquisitionDate","StructuredAnnotations","PhysicalSizeZ","PhysicalSizeZUnit","physicalSizeAndUnitX","physicalSizeAndUnitY","physicalSizeAndUnitZ","MapAnnotation","Value","Channels","xInBounds","yInBounds","isInTileBounds","getJson","path","res","json","OMEZarrReader","zarrPath","rootAttrs","imageData","omero","resolutions","datasets","multiscales","openArray","store","pyramid","endsWith","getItem","meta","enc","TextDecoder","JSON","createZarrLoader","metadataUrl","md","paths","metaKey","arrMetaKeys","createOMETiffLoader","fromUrl","ImageDescription"],"mappings":"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","file":"bundle.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"@deck.gl/core\");","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@luma.gl/constants\");","module.exports = require(\"@babel/runtime/helpers/inherits\");","module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/slicedToArray\");","module.exports = require(\"@deck.gl/layers\");","module.exports = require(\"react\");","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");","module.exports = require(\"zarr\");","module.exports = require(\"@babel/runtime/helpers/get\");","module.exports = require(\"@luma.gl/core\");","module.exports = require(\"quickselect\");","module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");","module.exports = require(\"threads\");","module.exports = require(\"url\");","module.exports = require(\"@deck.gl/geo-layers\");","module.exports = require(\"buffer\");","module.exports = require(\"@deck.gl/react\");","module.exports = require(\"txml\");","module.exports = require(\"pako/lib/inflate\");","var http = require('http')\nvar url = require('url')\n\nvar https = module.exports\n\nfor (var key in http) {\n  if (http.hasOwnProperty(key)) https[key] = http[key]\n}\n\nhttps.request = function (params, cb) {\n  params = validateParams(params)\n  return http.request.call(this, params, cb)\n}\n\nhttps.get = function (params, cb) {\n  params = validateParams(params)\n  return http.get.call(this, params, cb)\n}\n\nfunction validateParams (params) {\n  if (typeof params === 'string') {\n    params = url.parse(params)\n  }\n  if (!params.protocol) {\n    params.protocol = 'https:'\n  }\n  if (params.protocol !== 'https:') {\n    throw new Error('Protocol \"' + params.protocol + '\" not supported. Expected \"https:\"')\n  }\n  return params\n}\n","module.exports = function() {\n  return require(\"!!/Users/wei.ouyang/workspace/vitessce-image-viewer/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\\\"undefined\\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(e,\\\"__esModule\\\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\\\"object\\\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\\\"default\\\",{enumerable:!0,value:e}),2&t&&\\\"string\\\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\\\"a\\\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\\\"\\\",n(n.s=71)}([function(e,t){},function(e,t,n){\\\"use strict\\\";n.d(t,\\\"a\\\",(function(){return r})),n.d(t,\\\"b\\\",(function(){return i})),n.d(t,\\\"c\\\",(function(){return o})),n.d(t,\\\"d\\\",(function(){return s})),n.d(t,\\\"e\\\",(function(){return a}));const r=Symbol(\\\"thread.errors\\\"),i=Symbol(\\\"thread.events\\\"),o=Symbol(\\\"thread.terminate\\\"),s=Symbol(\\\"thread.transferable\\\"),a=Symbol(\\\"thread.worker\\\")},function(e,t){var n,r,i=e.exports={};function o(){throw new Error(\\\"setTimeout has not been defined\\\")}function s(){throw new Error(\\\"clearTimeout has not been defined\\\")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\\\"function\\\"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r=\\\"function\\\"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function b(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\\\"browser\\\",i.browser=!0,i.env={},i.argv=[],i.version=\\\"\\\",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(e){return[]},i.binding=function(e){throw new Error(\\\"process.binding is not supported\\\")},i.cwd=function(){return\\\"/\\\"},i.chdir=function(e){throw new Error(\\\"process.chdir is not supported\\\")},i.umask=function(){return 0}},function(e,t,n){(function(r){t.log=function(...e){return\\\"object\\\"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?\\\"%c\\\":\\\"\\\")+this.namespace+(this.useColors?\\\" %c\\\":\\\" \\\")+t[0]+(this.useColors?\\\"%c \\\":\\\" \\\")+\\\"+\\\"+e.exports.humanize(this.diff),!this.useColors)return;const n=\\\"color: \\\"+this.color;t.splice(1,0,n,\\\"color: inherit\\\");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{\\\"%%\\\"!==e&&(r++,\\\"%c\\\"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem(\\\"debug\\\",e):t.storage.removeItem(\\\"debug\\\")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem(\\\"debug\\\")}catch(e){}!e&&void 0!==r&&\\\"env\\\"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if(\\\"undefined\\\"!=typeof window&&window.process&&(\\\"renderer\\\"===window.process.type||window.process.__nwjs))return!0;if(\\\"undefined\\\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\\\/(\\\\d+)/))return!1;return\\\"undefined\\\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\\\"undefined\\\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\\\"undefined\\\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\\\/(\\\\d+)/)&&parseInt(RegExp.$1,10)>=31||\\\"undefined\\\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\\\/(\\\\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=[\\\"#0000CC\\\",\\\"#0000FF\\\",\\\"#0033CC\\\",\\\"#0033FF\\\",\\\"#0066CC\\\",\\\"#0066FF\\\",\\\"#0099CC\\\",\\\"#0099FF\\\",\\\"#00CC00\\\",\\\"#00CC33\\\",\\\"#00CC66\\\",\\\"#00CC99\\\",\\\"#00CCCC\\\",\\\"#00CCFF\\\",\\\"#3300CC\\\",\\\"#3300FF\\\",\\\"#3333CC\\\",\\\"#3333FF\\\",\\\"#3366CC\\\",\\\"#3366FF\\\",\\\"#3399CC\\\",\\\"#3399FF\\\",\\\"#33CC00\\\",\\\"#33CC33\\\",\\\"#33CC66\\\",\\\"#33CC99\\\",\\\"#33CCCC\\\",\\\"#33CCFF\\\",\\\"#6600CC\\\",\\\"#6600FF\\\",\\\"#6633CC\\\",\\\"#6633FF\\\",\\\"#66CC00\\\",\\\"#66CC33\\\",\\\"#9900CC\\\",\\\"#9900FF\\\",\\\"#9933CC\\\",\\\"#9933FF\\\",\\\"#99CC00\\\",\\\"#99CC33\\\",\\\"#CC0000\\\",\\\"#CC0033\\\",\\\"#CC0066\\\",\\\"#CC0099\\\",\\\"#CC00CC\\\",\\\"#CC00FF\\\",\\\"#CC3300\\\",\\\"#CC3333\\\",\\\"#CC3366\\\",\\\"#CC3399\\\",\\\"#CC33CC\\\",\\\"#CC33FF\\\",\\\"#CC6600\\\",\\\"#CC6633\\\",\\\"#CC9900\\\",\\\"#CC9933\\\",\\\"#CCCC00\\\",\\\"#CCCC33\\\",\\\"#FF0000\\\",\\\"#FF0033\\\",\\\"#FF0066\\\",\\\"#FF0099\\\",\\\"#FF00CC\\\",\\\"#FF00FF\\\",\\\"#FF3300\\\",\\\"#FF3333\\\",\\\"#FF3366\\\",\\\"#FF3399\\\",\\\"#FF33CC\\\",\\\"#FF33FF\\\",\\\"#FF6600\\\",\\\"#FF6633\\\",\\\"#FF9900\\\",\\\"#FF9933\\\",\\\"#FFCC00\\\",\\\"#FFCC33\\\"],e.exports=n(63)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return\\\"[UnexpectedJSONParseError]: \\\"+e.message}}}).call(this,n(2))},function(e,t,n){\\\"use strict\\\";n.d(t,\\\"a\\\",(function(){return o})),n.d(t,\\\"b\\\",(function(){return s}));const r={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:\\\"$$error\\\",message:e.message,name:e.name,stack:e.stack})};let i={deserialize(e){return(t=e)&&\\\"object\\\"==typeof t&&\\\"__error_marker\\\"in t&&\\\"$$error\\\"===t.__error_marker?r.deserialize(e):e;var t},serialize:e=>e instanceof Error?r.serialize(e):e};function o(e){return i.deserialize(e)}function s(e){return i.serialize(e)}},function(e,t,n){\\\"use strict\\\";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return\\\"string\\\"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?\\\"one of \\\".concat(t,\\\" \\\").concat(e.slice(0,n-1).join(\\\", \\\"),\\\", or \\\")+e[n-1]:2===n?\\\"one of \\\".concat(t,\\\" \\\").concat(e[0],\\\" or \\\").concat(e[1]):\\\"of \\\".concat(t,\\\" \\\").concat(e[0])}return\\\"of \\\".concat(t,\\\" \\\").concat(String(e))}i(\\\"ERR_INVALID_OPT_VALUE\\\",(function(e,t){return'The value \\\"'+t+'\\\" is invalid for option \\\"'+e+'\\\"'}),TypeError),i(\\\"ERR_INVALID_ARG_TYPE\\\",(function(e,t,n){var r,i,s,a,u;if(\\\"string\\\"==typeof t&&function(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}(t,\\\"not \\\")?(r=\\\"must not be\\\",t=t.replace(/^not /,\\\"\\\")):r=\\\"must be\\\",s=e,a=\\\" argument\\\",(void 0===u||u>s.length)&&(u=s.length),s.substring(u-a.length,u)===a)i=\\\"The \\\".concat(e,\\\" \\\").concat(r,\\\" \\\").concat(o(t,\\\"type\\\"));else{var c=function(e,t,n){return\\\"number\\\"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,\\\".\\\")?\\\"property\\\":\\\"argument\\\";i='The \\\"'.concat(e,'\\\" ').concat(c,\\\" \\\").concat(r,\\\" \\\").concat(o(t,\\\"type\\\"))}return i+=\\\". Received type \\\".concat(typeof n)}),TypeError),i(\\\"ERR_STREAM_PUSH_AFTER_EOF\\\",\\\"stream.push() after EOF\\\"),i(\\\"ERR_METHOD_NOT_IMPLEMENTED\\\",(function(e){return\\\"The \\\"+e+\\\" method is not implemented\\\"})),i(\\\"ERR_STREAM_PREMATURE_CLOSE\\\",\\\"Premature close\\\"),i(\\\"ERR_STREAM_DESTROYED\\\",(function(e){return\\\"Cannot call \\\"+e+\\\" after a stream was destroyed\\\"})),i(\\\"ERR_MULTIPLE_CALLBACK\\\",\\\"Callback called multiple times\\\"),i(\\\"ERR_STREAM_CANNOT_PIPE\\\",\\\"Cannot pipe, not readable\\\"),i(\\\"ERR_STREAM_WRITE_AFTER_END\\\",\\\"write after end\\\"),i(\\\"ERR_STREAM_NULL_VALUES\\\",\\\"May not write null values to stream\\\",TypeError),i(\\\"ERR_UNKNOWN_ENCODING\\\",(function(e){return\\\"Unknown encoding: \\\"+e}),TypeError),i(\\\"ERR_STREAM_UNSHIFT_AFTER_END_EVENT\\\",\\\"stream.unshift() after end event\\\"),e.exports.codes=r},function(e,t,n){\\\"use strict\\\";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n(18),o=n(23);n(7)(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once(\\\"end\\\",l)))}function l(){this._writableState.ended||t.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,\\\"writableHighWaterMark\\\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,\\\"writableBuffer\\\",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,\\\"writableLength\\\",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,\\\"destroyed\\\",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n(2))},function(e,t){\\\"function\\\"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){\\\"use strict\\\";const r=()=>\\\"function\\\"==typeof Symbol,i=e=>r()&&Boolean(Symbol[e]),o=e=>i(e)?Symbol[e]:\\\"@@\\\"+e;i(\\\"asyncIterator\\\")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for(\\\"Symbol.asyncIterator\\\"));const s=o(\\\"iterator\\\"),a=o(\\\"observable\\\"),u=o(\\\"species\\\");function c(e,t){const n=e[t];if(null!=n){if(\\\"function\\\"!=typeof n)throw new TypeError(n+\\\" is not a function\\\");return n}}function l(e){let t=e.constructor;return void 0!==t&&(t=t[u],null===t&&(t=void 0)),void 0!==t?t:v}function f(e){f.log?f.log(e):setTimeout(()=>{throw e},0)}function h(e){Promise.resolve().then(()=>{try{e()}catch(e){f(e)}})}function d(e){const t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if(\\\"function\\\"==typeof t)t();else{const e=c(t,\\\"unsubscribe\\\");e&&e.call(t)}}catch(e){f(e)}}function p(e){e._observer=void 0,e._queue=void 0,e._state=\\\"closed\\\"}function b(e,t,n){e._state=\\\"running\\\";const r=e._observer;try{const i=r?c(r,t):void 0;switch(t){case\\\"next\\\":i&&i.call(r,n);break;case\\\"error\\\":if(p(e),!i)throw n;i.call(r,n);break;case\\\"complete\\\":p(e),i&&i.call(r)}}catch(e){f(e)}\\\"closed\\\"===e._state?d(e):\\\"running\\\"===e._state&&(e._state=\\\"ready\\\")}function m(e,t,n){if(\\\"closed\\\"!==e._state)return\\\"buffering\\\"===e._state?(e._queue=e._queue||[],void e._queue.push({type:t,value:n})):\\\"ready\\\"!==e._state?(e._state=\\\"buffering\\\",e._queue=[{type:t,value:n}],void h(()=>function(e){const t=e._queue;if(t){e._queue=void 0,e._state=\\\"ready\\\";for(const n of t)if(b(e,n.type,n.value),\\\"closed\\\"===e._state)break}}(e))):void b(e,t,n)}class g{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state=\\\"initializing\\\";const n=new y(this);try{this._cleanup=t.call(void 0,n)}catch(e){n.error(e)}\\\"initializing\\\"===this._state&&(this._state=\\\"ready\\\")}get closed(){return\\\"closed\\\"===this._state}unsubscribe(){\\\"closed\\\"!==this._state&&(p(this),d(this))}}class y{constructor(e){this._subscription=e}get closed(){return\\\"closed\\\"===this._subscription._state}next(e){m(this._subscription,\\\"next\\\",e)}error(e){m(this._subscription,\\\"error\\\",e)}complete(){m(this._subscription,\\\"complete\\\")}}class v{constructor(e){if(!(this instanceof v))throw new TypeError(\\\"Observable cannot be called as a function\\\");if(\\\"function\\\"!=typeof e)throw new TypeError(\\\"Observable initializer must be a function\\\");this._subscriber=e}subscribe(e,t,n){return\\\"object\\\"==typeof e&&null!==e||(e={next:e,error:t,complete:n}),new g(e,this._subscriber)}pipe(e,...t){let n=this;for(const r of[e,...t])n=r(n);return n}tap(e,t,n){const r=\\\"object\\\"!=typeof e||null===e?{next:e,error:t,complete:n}:e;return new v(e=>this.subscribe({next(t){r.next&&r.next(t),e.next(t)},error(t){r.error&&r.error(t),e.error(t)},complete(){r.complete&&r.complete(),e.complete()},start(e){r.start&&r.start(e)}}))}forEach(e){return new Promise((t,n)=>{if(\\\"function\\\"!=typeof e)return void n(new TypeError(e+\\\" is not a function\\\"));function r(){i.unsubscribe(),t()}const i=this.subscribe({next(t){try{e(t,r)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t})})}map(e){if(\\\"function\\\"!=typeof e)throw new TypeError(e+\\\" is not a function\\\");return new(l(this))(t=>this.subscribe({next(n){let r=n;try{r=e(n)}catch(e){return t.error(e)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}}))}filter(e){if(\\\"function\\\"!=typeof e)throw new TypeError(e+\\\" is not a function\\\");return new(l(this))(t=>this.subscribe({next(n){try{if(!e(n))return}catch(e){return t.error(e)}t.next(n)},error(e){t.error(e)},complete(){t.complete()}}))}reduce(e,t){if(\\\"function\\\"!=typeof e)throw new TypeError(e+\\\" is not a function\\\");const n=l(this),r=arguments.length>1;let i=!1,o=t;return new n(t=>this.subscribe({next(n){const s=!i;if(i=!0,!s||r)try{o=e(o,n)}catch(e){return t.error(e)}else o=n},error(e){t.error(e)},complete(){if(!i&&!r)return t.error(new TypeError(\\\"Cannot reduce an empty sequence\\\"));t.next(o),t.complete()}}))}concat(...e){const t=l(this);return new t(n=>{let r,i=0;return function o(s){r=s.subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){i===e.length?(r=void 0,n.complete()):o(t.from(e[i++]))}})}(this),()=>{r&&(r.unsubscribe(),r=void 0)}})}flatMap(e){if(\\\"function\\\"!=typeof e)throw new TypeError(e+\\\" is not a function\\\");const t=l(this);return new t(n=>{const r=[],i=this.subscribe({next(i){let s;if(e)try{s=e(i)}catch(e){return n.error(e)}else s=i;const a=t.from(s).subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){const e=r.indexOf(a);e>=0&&r.splice(e,1),o()}});r.push(a)},error(e){n.error(e)},complete(){o()}});function o(){i.closed&&0===r.length&&n.complete()}return()=>{r.forEach(e=>e.unsubscribe()),i.unsubscribe()}})}[a](){return this}static from(e){const t=\\\"function\\\"==typeof this?this:v;if(null==e)throw new TypeError(e+\\\" is not an object\\\");const n=c(e,a);if(n){const r=n.call(e);if(Object(r)!==r)throw new TypeError(r+\\\" is not an object\\\");return function(e){return e instanceof v}(r)&&r.constructor===t?r:new t(e=>r.subscribe(e))}if(i(\\\"iterator\\\")){const n=c(e,s);if(n)return new t(t=>{h(()=>{if(!t.closed){for(const r of n.call(e))if(t.next(r),t.closed)return;t.complete()}})})}if(Array.isArray(e))return new t(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})});throw new TypeError(e+\\\" is not observable\\\")}static of(...e){return new(\\\"function\\\"==typeof this?this:v)(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})})}static get[u](){return this}}r()&&Object.defineProperty(v,Symbol(\\\"extensions\\\"),{value:{symbol:a,hostReportError:f},configurable:!0});t.a=v},function(e,t,n){\\\"use strict\\\";var r;n.d(t,\\\"a\\\",(function(){return r})),function(e){e.internalError=\\\"internalError\\\",e.message=\\\"message\\\",e.termination=\\\"termination\\\"}(r||(r={}))},function(e,t,n){\\\"use strict\\\";var r,i;n.d(t,\\\"a\\\",(function(){return r})),n.d(t,\\\"b\\\",(function(){return i})),function(e){e.run=\\\"run\\\"}(r||(r={})),function(e){e.error=\\\"error\\\",e.init=\\\"init\\\",e.result=\\\"result\\\",e.running=\\\"running\\\",e.uncaughtError=\\\"uncaughtError\\\"}(i||(i={}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\\\"return this\\\")()}catch(e){\\\"object\\\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\\\"use strict\\\";var r=\\\"undefined\\\"!=typeof Uint8Array&&\\\"undefined\\\"!=typeof Uint16Array&&\\\"undefined\\\"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if(\\\"object\\\"!=typeof n)throw new TypeError(n+\\\"must be non-object\\\");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},s={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(r)},,function(e,t,n){\\\"use strict\\\";var r=n(5).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if(\\\"function\\\"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},b=function(){t.req.on(\\\"finish\\\",l)};return!function(e){return e.setHeader&&\\\"function\\\"==typeof e.abort}(t)?a&&!t._writableState&&(t.on(\\\"end\\\",u),t.on(\\\"close\\\",u)):(t.on(\\\"complete\\\",l),t.on(\\\"abort\\\",p),t.req?b():t.on(\\\"request\\\",b)),t.on(\\\"end\\\",h),t.on(\\\"finish\\\",l),!1!==n.error&&t.on(\\\"error\\\",d),t.on(\\\"close\\\",p),function(){t.removeListener(\\\"complete\\\",l),t.removeListener(\\\"abort\\\",p),t.removeListener(\\\"request\\\",b),t.req&&t.req.removeListener(\\\"finish\\\",l),t.removeListener(\\\"end\\\",u),t.removeListener(\\\"close\\\",u),t.removeListener(\\\"finish\\\",l),t.removeListener(\\\"end\\\",h),t.removeListener(\\\"error\\\",d),t.removeListener(\\\"close\\\",p)}}},function(e,t,n){\\\"use strict\\\";var r=n(65),i=n(67);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=v(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\\\\/\\\\/?(?!\\\\/)[^\\\\?\\\\s]*)(\\\\?[^\\\\s]*)?$/,c=[\\\"{\\\",\\\"}\\\",\\\"|\\\",\\\"\\\\\\\\\\\",\\\"^\\\",\\\"`\\\"].concat([\\\"<\\\",\\\">\\\",'\\\"',\\\"`\\\",\\\" \\\",\\\"\\\\r\\\",\\\"\\\\n\\\",\\\"\\\\t\\\"]),l=[\\\"'\\\"].concat(c),f=[\\\"%\\\",\\\"/\\\",\\\"?\\\",\\\";\\\",\\\"#\\\"].concat(l),h=[\\\"/\\\",\\\"?\\\",\\\"#\\\"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,\\\"javascript:\\\":!0},m={javascript:!0,\\\"javascript:\\\":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\\\"http:\\\":!0,\\\"https:\\\":!0,\\\"ftp:\\\":!0,\\\"gopher:\\\":!0,\\\"file:\\\":!0},y=n(68);function v(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError(\\\"Parameter 'url' must be a string, not \\\"+typeof e);var o=e.indexOf(\\\"?\\\"),a=-1!==o&&o<e.indexOf(\\\"#\\\")?\\\"?\\\":\\\"#\\\",c=e.split(a);c[0]=c[0].replace(/\\\\\\\\/g,\\\"/\\\");var v=e=c.join(a);if(v=v.trim(),!n&&1===e.split(\\\"#\\\").length){var w=u.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search=\\\"\\\",this.query={}),this}var _=s.exec(v);if(_){var k=(_=_[0]).toLowerCase();this.protocol=k,v=v.substr(_.length)}if(n||_||v.match(/^\\\\/\\\\/[^@\\\\/]+@[^@\\\\/]+/)){var S=\\\"//\\\"===v.substr(0,2);!S||_&&m[_]||(v=v.substr(2),this.slashes=!0)}if(!m[_]&&(S||_&&!g[_])){for(var x,C,E=-1,O=0;O<h.length;O++){-1!==(T=v.indexOf(h[O]))&&(-1===E||T<E)&&(E=T)}-1!==(C=-1===E?v.lastIndexOf(\\\"@\\\"):v.lastIndexOf(\\\"@\\\",E))&&(x=v.slice(0,C),v=v.slice(C+1),this.auth=decodeURIComponent(x)),E=-1;for(O=0;O<f.length;O++){var T;-1!==(T=v.indexOf(f[O]))&&(-1===E||T<E)&&(E=T)}-1===E&&(E=v.length),this.host=v.slice(0,E),v=v.slice(E),this.parseHost(),this.hostname=this.hostname||\\\"\\\";var j=\\\"[\\\"===this.hostname[0]&&\\\"]\\\"===this.hostname[this.hostname.length-1];if(!j)for(var R=this.hostname.split(/\\\\./),A=(O=0,R.length);O<A;O++){var P=R[O];if(P&&!P.match(d)){for(var L=\\\"\\\",M=0,F=P.length;M<F;M++)P.charCodeAt(M)>127?L+=\\\"x\\\":L+=P[M];if(!L.match(d)){var N=R.slice(0,O),D=R.slice(O+1),I=P.match(p);I&&(N.push(I[1]),D.unshift(I[2])),D.length&&(v=\\\"/\\\"+D.join(\\\".\\\")+v),this.hostname=N.join(\\\".\\\");break}}}this.hostname.length>255?this.hostname=\\\"\\\":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=r.toASCII(this.hostname));var U=this.port?\\\":\\\"+this.port:\\\"\\\",B=this.hostname||\\\"\\\";this.host=B+U,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),\\\"/\\\"!==v[0]&&(v=\\\"/\\\"+v))}if(!b[k])for(O=0,A=l.length;O<A;O++){var G=l[O];if(-1!==v.indexOf(G)){var z=encodeURIComponent(G);z===G&&(z=escape(G)),v=v.split(G).join(z)}}var q=v.indexOf(\\\"#\\\");-1!==q&&(this.hash=v.substr(q),v=v.slice(0,q));var K=v.indexOf(\\\"?\\\");if(-1!==K?(this.search=v.substr(K),this.query=v.substr(K+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,K)):t&&(this.search=\\\"\\\",this.query={}),v&&(this.pathname=v),g[k]&&this.hostname&&!this.pathname&&(this.pathname=\\\"/\\\"),this.pathname||this.search){U=this.pathname||\\\"\\\";var W=this.search||\\\"\\\";this.path=U+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||\\\"\\\";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,\\\":\\\"),e+=\\\"@\\\");var t=this.protocol||\\\"\\\",n=this.pathname||\\\"\\\",r=this.hash||\\\"\\\",o=!1,s=\\\"\\\";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(\\\":\\\")?this.hostname:\\\"[\\\"+this.hostname+\\\"]\\\"),this.port&&(o+=\\\":\\\"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&\\\"?\\\"+s||\\\"\\\";return t&&\\\":\\\"!==t.substr(-1)&&(t+=\\\":\\\"),this.slashes||(!t||g[t])&&!1!==o?(o=\\\"//\\\"+(o||\\\"\\\"),n&&\\\"/\\\"!==n.charAt(0)&&(n=\\\"/\\\"+n)):o||(o=\\\"\\\"),r&&\\\"#\\\"!==r.charAt(0)&&(r=\\\"#\\\"+r),a&&\\\"?\\\"!==a.charAt(0)&&(a=\\\"?\\\"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace(\\\"#\\\",\\\"%23\\\"))+r},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,\\\"\\\"===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];\\\"protocol\\\"!==l&&(n[l]=e[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname=\\\"/\\\"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||\\\"\\\").split(\\\"/\\\");p.length&&!(e.host=p.shift()););e.host||(e.host=\\\"\\\"),e.hostname||(e.hostname=\\\"\\\"),\\\"\\\"!==p[0]&&p.unshift(\\\"\\\"),p.length<2&&p.unshift(\\\"\\\"),n.pathname=p.join(\\\"/\\\")}if(n.search=e.search,n.query=e.query,n.host=e.host||\\\"\\\",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var b=n.pathname||\\\"\\\",y=n.search||\\\"\\\";n.path=b+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&\\\"/\\\"===n.pathname.charAt(0),w=e.host||e.pathname&&\\\"/\\\"===e.pathname.charAt(0),_=w||v||n.host&&e.pathname,k=_,S=n.pathname&&n.pathname.split(\\\"/\\\")||[],x=(p=e.pathname&&e.pathname.split(\\\"/\\\")||[],n.protocol&&!g[n.protocol]);if(x&&(n.hostname=\\\"\\\",n.port=null,n.host&&(\\\"\\\"===S[0]?S[0]=n.host:S.unshift(n.host)),n.host=\\\"\\\",e.protocol&&(e.hostname=null,e.port=null,e.host&&(\\\"\\\"===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(\\\"\\\"===p[0]||\\\"\\\"===S[0])),w)n.host=e.host||\\\"\\\"===e.host?e.host:n.host,n.hostname=e.hostname||\\\"\\\"===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=p;else if(p.length)S||(S=[]),S.pop(),S=S.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(x)n.hostname=n.host=S.shift(),(j=!!(n.host&&n.host.indexOf(\\\"@\\\")>0)&&n.host.split(\\\"@\\\"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:\\\"\\\")+(n.search?n.search:\\\"\\\")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path=\\\"/\\\"+n.search:n.path=null,n.href=n.format(),n;for(var C=S.slice(-1)[0],E=(n.host||e.host||S.length>1)&&(\\\".\\\"===C||\\\"..\\\"===C)||\\\"\\\"===C,O=0,T=S.length;T>=0;T--)\\\".\\\"===(C=S[T])?S.splice(T,1):\\\"..\\\"===C?(S.splice(T,1),O++):O&&(S.splice(T,1),O--);if(!_&&!k)for(;O--;O)S.unshift(\\\"..\\\");!_||\\\"\\\"===S[0]||S[0]&&\\\"/\\\"===S[0].charAt(0)||S.unshift(\\\"\\\"),E&&\\\"/\\\"!==S.join(\\\"/\\\").substr(-1)&&S.push(\\\"\\\");var j,R=\\\"\\\"===S[0]||S[0]&&\\\"/\\\"===S[0].charAt(0);x&&(n.hostname=n.host=R?\\\"\\\":S.length?S.shift():\\\"\\\",(j=!!(n.host&&n.host.indexOf(\\\"@\\\")>0)&&n.host.split(\\\"@\\\"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift()));return(_=_||n.host&&S.length)&&!R&&S.unshift(\\\"\\\"),S.length?n.pathname=S.join(\\\"/\\\"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:\\\"\\\")+(n.search?n.search:\\\"\\\")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(\\\":\\\"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){\\\"use strict\\\";n.d(t,\\\"a\\\",(function(){return y})),n.d(t,\\\"b\\\",(function(){return v}));var r=n(3),i=n.n(r),o=n(8),s=n(73),a=n(4);const u=()=>{},c=e=>e,l=e=>Promise.resolve().then(e);function f(e){throw e}class h extends o.a{constructor(e){super(t=>{const n=this,r=Object.assign(Object.assign({},t),{complete(){t.complete(),n.onCompletion()},error(e){t.error(e),n.onError(e)},next(e){t.next(e),n.onNext(e)}});try{return this.initHasRun=!0,e(r)}catch(e){r.error(e)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state=\\\"pending\\\"}onNext(e){this.firstValueSet||(this.firstValue=e,this.firstValueSet=!0)}onError(e){this.state=\\\"rejected\\\",this.rejection=e;for(const t of this.rejectionCallbacks)l(()=>t(e))}onCompletion(){this.state=\\\"fulfilled\\\";for(const e of this.fulfillmentCallbacks)l(()=>e(this.firstValue))}then(e,t){const n=e||c,r=t||f;let i=!1;return new Promise((e,t)=>{const o=n=>{if(!i){i=!0;try{e(r(n))}catch(e){t(e)}}};return this.initHasRun||this.subscribe({error:o}),\\\"fulfilled\\\"===this.state?e(n(this.firstValue)):\\\"rejected\\\"===this.state?(i=!0,e(r(this.rejection))):(this.fulfillmentCallbacks.push(t=>{try{e(n(t))}catch(e){o(e)}}),void this.rejectionCallbacks.push(o))})}catch(e){return this.then(void 0,e)}finally(e){const t=e||u;return this.then(e=>(t(),e),()=>t())}static from(e){return function(e){return e&&\\\"function\\\"==typeof e.then}(e)?new h(t=>{e.then(e=>{t.next(e),t.complete()},e=>{t.error(e)})}):super.from(e)}}var d=n(33),p=n(10);const b=i()(\\\"threads:master:messages\\\");let m=1;function g(e,t){return new o.a(n=>{let r;const i=o=>{var s;if(b(\\\"Message from worker:\\\",o.data),o.data&&o.data.uid===t)if((s=o.data)&&s.type===p.b.running)r=o.data.resultType;else if((e=>e&&e.type===p.b.result)(o.data))\\\"promise\\\"===r?(void 0!==o.data.payload&&n.next(Object(a.a)(o.data.payload)),n.complete(),e.removeEventListener(\\\"message\\\",i)):(o.data.payload&&n.next(Object(a.a)(o.data.payload)),o.data.complete&&(n.complete(),e.removeEventListener(\\\"message\\\",i)));else if((e=>e&&e.type===p.b.error)(o.data)){const t=Object(a.a)(o.data.error);n.error(t),e.removeEventListener(\\\"message\\\",i)}};return e.addEventListener(\\\"message\\\",i),()=>e.removeEventListener(\\\"message\\\",i)})}function y(e,t){return(...n)=>{const r=m++,{args:i,transferables:o}=function(e){if(0===e.length)return{args:[],transferables:[]};const t=[],n=[];for(const r of e)Object(d.a)(r)?(t.push(Object(a.b)(r.send)),n.push(...r.transferables)):t.push(Object(a.b)(r));return{args:t,transferables:0===n.length?n:(r=n,Array.from(new Set(r)))};var r}(n),u={type:p.a.run,uid:r,method:t,args:i};b(\\\"Sending command to run function to worker:\\\",u);try{e.postMessage(u,o)}catch(e){return h.from(Promise.reject(e))}return h.from(Object(s.a)(g(e,r)))}}function v(e,t){const n={};for(const r of t)n[r]=y(e,r);return n}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||\\\"[object Arguments]\\\"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t,n){\\\"use strict\\\";(function(t,r){var i;e.exports=C,C.ReadableState=x;n(19).EventEmitter;var o=function(e,t){return e.listeners(t).length},s=n(20),a=n(0).Buffer,u=t.Uint8Array||function(){};var c,l=n(41);c=l&&l.debuglog?l.debuglog(\\\"stream\\\"):function(){};var f,h,d,p=n(42),b=n(21),m=n(22).getHighWaterMark,g=n(5).codes,y=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(7)(C,s);var k=b.errorOrDestroy,S=[\\\"error\\\",\\\"close\\\",\\\"destroy\\\",\\\"pause\\\",\\\"resume\\\"];function x(e,t,r){i=i||n(6),e=e||{},\\\"boolean\\\"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,\\\"readableHighWaterMark\\\",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||\\\"utf8\\\",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(24).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function C(e){if(i=i||n(6),!(this instanceof C))return new C(e);var t=this instanceof i;this._readableState=new x(e,this,t),this.readable=!0,e&&(\\\"function\\\"==typeof e.read&&(this._read=e.read),\\\"function\\\"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function E(e,t,n,r,i){c(\\\"readableAddChunk\\\",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c(\\\"onEofChunk\\\"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?j(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,s);else if(i||(o=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof u||\\\"string\\\"==typeof t||void 0===t||e.objectMode||(n=new y(\\\"chunk\\\",[\\\"string\\\",\\\"Buffer\\\",\\\"Uint8Array\\\"],t));var r;return n}(s,t)),o)k(e,o);else if(s.objectMode||t&&t.length>0)if(\\\"string\\\"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)s.endEmitted?k(e,new _):O(e,s,t,!0);else if(s.ended)k(e,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?O(e,s,t,!1):A(e,s)):O(e,s,t,!1)}else r||(s.reading=!1,A(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function O(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit(\\\"data\\\",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&j(e)),A(e,t)}Object.defineProperty(C.prototype,\\\"destroyed\\\",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=b.destroy,C.prototype._undestroy=b.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:\\\"string\\\"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=\\\"\\\"),n=!0),E(this,e,t,!1,n)},C.prototype.unshift=function(e){return E(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){f||(f=n(24).StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i=\\\"\\\";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),\\\"\\\"!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function j(e){var t=e._readableState;c(\\\"emitReadable\\\",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c(\\\"emitReadable\\\",t.flowing),t.emittedReadable=!0,r.nextTick(R,e))}function R(e){var t=e._readableState;c(\\\"emitReadable_\\\",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit(\\\"readable\\\"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function A(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c(\\\"maybeReadMore read 0\\\"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount(\\\"readable\\\")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount(\\\"data\\\")>0&&e.resume()}function M(e){c(\\\"readable nexttick read 0\\\"),e.read(0)}function F(e,t){c(\\\"resume\\\",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit(\\\"resume\\\"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c(\\\"flow\\\",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(\\\"\\\"):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function I(e){var t=e._readableState;c(\\\"endReadable\\\",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(c(\\\"endReadableNT\\\",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit(\\\"end\\\"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){c(\\\"read\\\",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c(\\\"read: emitReadable\\\",t.length,t.ended),0===t.length&&t.ended?I(this):j(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&I(this),null;var r,i=t.needReadable;return c(\\\"need readable\\\",i),(0===t.length||t.length-e<t.highWaterMark)&&c(\\\"length less than watermark\\\",i=!0),t.ended||t.reading?c(\\\"reading or ended\\\",i=!1):i&&(c(\\\"do read\\\"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit(\\\"data\\\",r),r},C.prototype._read=function(e){k(this,new w(\\\"_read()\\\"))},C.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c(\\\"pipe count=%d opts=%j\\\",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:m;function a(t,r){c(\\\"onunpipe\\\"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c(\\\"cleanup\\\"),e.removeListener(\\\"close\\\",p),e.removeListener(\\\"finish\\\",b),e.removeListener(\\\"drain\\\",l),e.removeListener(\\\"error\\\",d),e.removeListener(\\\"unpipe\\\",a),n.removeListener(\\\"end\\\",u),n.removeListener(\\\"end\\\",m),n.removeListener(\\\"data\\\",h),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c(\\\"onend\\\"),e.end()}i.endEmitted?r.nextTick(s):n.once(\\\"end\\\",s),e.on(\\\"unpipe\\\",a);var l=function(e){return function(){var t=e._readableState;c(\\\"pipeOnDrain\\\",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,\\\"data\\\")&&(t.flowing=!0,N(e))}}(n);e.on(\\\"drain\\\",l);var f=!1;function h(t){c(\\\"ondata\\\");var r=e.write(t);c(\\\"dest.write\\\",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==B(i.pipes,e))&&!f&&(c(\\\"false write response, pause\\\",i.awaitDrain),i.awaitDrain++),n.pause())}function d(t){c(\\\"onerror\\\",t),m(),e.removeListener(\\\"error\\\",d),0===o(e,\\\"error\\\")&&k(e,t)}function p(){e.removeListener(\\\"finish\\\",b),m()}function b(){c(\\\"onfinish\\\"),e.removeListener(\\\"close\\\",p),m()}function m(){c(\\\"unpipe\\\"),n.unpipe(e)}return n.on(\\\"data\\\",h),function(e,t,n){if(\\\"function\\\"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,\\\"error\\\",d),e.once(\\\"close\\\",p),e.once(\\\"finish\\\",b),e.emit(\\\"pipe\\\",n),i.flowing||(c(\\\"pipe resume\\\"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit(\\\"unpipe\\\",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit(\\\"unpipe\\\",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit(\\\"unpipe\\\",this,n)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return\\\"data\\\"===e?(i.readableListening=this.listenerCount(\\\"readable\\\")>0,!1!==i.flowing&&this.resume()):\\\"readable\\\"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c(\\\"on readable\\\",i.length,i.reading),i.length?j(this):i.reading||r.nextTick(M,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return\\\"readable\\\"===e&&r.nextTick(L,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return\\\"readable\\\"!==e&&void 0!==e||r.nextTick(L,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(c(\\\"resume\\\"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(F,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return c(\\\"call pause flowing=%j\\\",this._readableState.flowing),!1!==this._readableState.flowing&&(c(\\\"pause\\\"),this._readableState.flowing=!1,this.emit(\\\"pause\\\")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on(\\\"end\\\",(function(){if(c(\\\"wrapped end\\\"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on(\\\"data\\\",(function(i){(c(\\\"wrapped data\\\"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&\\\"function\\\"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){c(\\\"wrapped _read\\\",t),r&&(r=!1,e.resume())},this},\\\"function\\\"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(46)),h(this)}),Object.defineProperty(C.prototype,\\\"readableHighWaterMark\\\",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,\\\"readableBuffer\\\",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,\\\"readableFlowing\\\",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=D,Object.defineProperty(C.prototype,\\\"readableLength\\\",{enumerable:!1,get:function(){return this._readableState.length}}),\\\"function\\\"==typeof Symbol&&(C.from=function(e,t){return void 0===d&&(d=n(47)),d(C,e,t)})}).call(this,n(11),n(2))},function(e,t,n){\\\"use strict\\\";var r,i=\\\"object\\\"==typeof Reflect?Reflect:null,o=i&&\\\"function\\\"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&\\\"function\\\"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if(\\\"function\\\"!=typeof e)throw new TypeError('The \\\"listener\\\" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit(\\\"newListener\\\",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if(\\\"function\\\"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error(\\\"Possible EventEmitter memory leak detected. \\\"+s.length+\\\" \\\"+String(t)+\\\" listeners added. Use emitter.setMaxListeners() to increase limit\\\");u.name=\\\"MaxListenersExceededWarning\\\",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:\\\"function\\\"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function b(e){var t=this._events;if(void 0!==t){var n=t[e];if(\\\"function\\\"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,\\\"defaultMaxListeners\\\",{enumerable:!0,get:function(){return u},set:function(e){if(\\\"number\\\"!=typeof e||e<0||s(e))throw new RangeError('The value of \\\"defaultMaxListeners\\\" is out of range. It must be a non-negative number. Received '+e+\\\".\\\");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if(\\\"number\\\"!=typeof e||e<0||s(e))throw new RangeError('The value of \\\"n\\\" is out of range. It must be a non-negative number. Received '+e+\\\".\\\");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=\\\"error\\\"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error(\\\"Unhandled error.\\\"+(s?\\\" (\\\"+s.message+\\\")\\\":\\\"\\\"));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if(\\\"function\\\"==typeof u)o(u,this,t);else{var c=u.length,l=m(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(\\\"removeListener\\\",e,n.listener||t));else if(\\\"function\\\"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit(\\\"removeListener\\\",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)\\\"removeListener\\\"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners(\\\"removeListener\\\"),this._events=Object.create(null),this._eventsCount=0,this}if(\\\"function\\\"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return\\\"function\\\"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},a.prototype.listenerCount=b,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){e.exports=n(19).EventEmitter},function(e,t,n){\\\"use strict\\\";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit(\\\"close\\\")}function i(e,t){e.emit(\\\"error\\\",t)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit(\\\"error\\\",t)}}}).call(this,n(2))},function(e,t,n){\\\"use strict\\\";var r=n(5).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:\\\"highWaterMark\\\",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,n){\\\"use strict\\\";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=C,C.WritableState=x;var s={deprecate:n(44)},a=n(20),u=n(0).Buffer,c=t.Uint8Array||function(){};var l,f=n(21),h=n(22).getHighWaterMark,d=n(5).codes,p=d.ERR_INVALID_ARG_TYPE,b=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,k=f.errorOrDestroy;function S(){}function x(e,t,s){o=o||n(6),e=e||{},\\\"boolean\\\"!=typeof s&&(s=t instanceof o),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,\\\"writableHighWaterMark\\\",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||\\\"utf8\\\",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(\\\"function\\\"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(A,e,t),e._writableState.errorEmitted=!0,k(e,i)):(o(i),e._writableState.errorEmitted=!0,k(e,i),A(e,t))}(e,n,i,t,o);else{var s=j(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(O,e,n,s,o):O(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function C(e){var t=this instanceof(o=o||n(6));if(!t&&!l.call(C,this))return new C(e);this._writableState=new x(e,this,t),this.writable=!0,e&&(\\\"function\\\"==typeof e.write&&(this._write=e.write),\\\"function\\\"==typeof e.writev&&(this._writev=e.writev),\\\"function\\\"==typeof e.destroy&&(this._destroy=e.destroy),\\\"function\\\"==typeof e.final&&(this._final=e.final)),a.call(this)}function E(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y(\\\"write\\\")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit(\\\"drain\\\"))}(e,t),t.pendingcb--,r(),A(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,E(e,t,!0,t.length,o,\\\"\\\",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(E(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function j(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(n){t.pendingcb--,n&&k(e,n),t.prefinished=!0,e.emit(\\\"prefinish\\\"),A(e,t)}))}function A(e,t){var n=j(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||(\\\"function\\\"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit(\\\"prefinish\\\")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit(\\\"finish\\\"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(7)(C,a),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,\\\"buffer\\\",{get:s.deprecate((function(){return this.getBuffer()}),\\\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\\\",\\\"DEP0003\\\")})}catch(e){}}(),\\\"function\\\"==typeof Symbol&&Symbol.hasInstance&&\\\"function\\\"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===C&&(e&&e._writableState instanceof x)}})):l=function(e){return e instanceof this},C.prototype.pipe=function(){k(this,new g)},C.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),\\\"function\\\"==typeof t&&(n=t,t=null),a?t=\\\"buffer\\\":t||(t=o.defaultEncoding),\\\"function\\\"!=typeof n&&(n=S),o.ending?function(e,t){var n=new w;k(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new v:\\\"string\\\"==typeof n||t.objectMode||(o=new p(\\\"chunk\\\",[\\\"string\\\",\\\"Buffer\\\"],n)),!o||(k(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||\\\"string\\\"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i=\\\"buffer\\\",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,a,r,i,o);return c}(this,o,a,e,t,n)),s},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},C.prototype.setDefaultEncoding=function(e){if(\\\"string\\\"==typeof e&&(e=e.toLowerCase()),!([\\\"hex\\\",\\\"utf8\\\",\\\"utf-8\\\",\\\"ascii\\\",\\\"binary\\\",\\\"base64\\\",\\\"ucs2\\\",\\\"ucs-2\\\",\\\"utf16le\\\",\\\"utf-16le\\\",\\\"raw\\\"].indexOf((e+\\\"\\\").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,\\\"writableBuffer\\\",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,\\\"writableHighWaterMark\\\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new b(\\\"_write()\\\"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return\\\"function\\\"==typeof e?(n=e,e=null,t=null):\\\"function\\\"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?r.nextTick(n):e.once(\\\"finish\\\",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,\\\"writableLength\\\",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,\\\"destroyed\\\",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=f.destroy,C.prototype._undestroy=f.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this,n(11),n(2))},function(e,t,n){\\\"use strict\\\";var r=n(45).Buffer,i=r.isEncoding||function(e){switch((e=\\\"\\\"+e)&&e.toLowerCase()){case\\\"hex\\\":case\\\"utf8\\\":case\\\"utf-8\\\":case\\\"ascii\\\":case\\\"binary\\\":case\\\"base64\\\":case\\\"ucs2\\\":case\\\"ucs-2\\\":case\\\"utf16le\\\":case\\\"utf-16le\\\":case\\\"raw\\\":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return\\\"utf8\\\";for(var t;;)switch(e){case\\\"utf8\\\":case\\\"utf-8\\\":return\\\"utf8\\\";case\\\"ucs2\\\":case\\\"ucs-2\\\":case\\\"utf16le\\\":case\\\"utf-16le\\\":return\\\"utf16le\\\";case\\\"latin1\\\":case\\\"binary\\\":return\\\"latin1\\\";case\\\"base64\\\":case\\\"ascii\\\":case\\\"hex\\\":return e;default:if(t)return;e=(\\\"\\\"+e).toLowerCase(),t=!0}}(e);if(\\\"string\\\"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error(\\\"Unknown encoding: \\\"+e);return t||e}(e),this.encoding){case\\\"utf16le\\\":this.text=u,this.end=c,t=4;break;case\\\"utf8\\\":this.fillLast=a,t=4;break;case\\\"base64\\\":this.text=l,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,\\\"�\\\";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,\\\"�\\\";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,\\\"�\\\"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString(\\\"utf16le\\\",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString(\\\"utf16le\\\",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):\\\"\\\";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(\\\"utf16le\\\",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString(\\\"base64\\\",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString(\\\"base64\\\",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):\\\"\\\";return this.lastNeed?t+this.lastChar.toString(\\\"base64\\\",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):\\\"\\\"}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return\\\"\\\";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return\\\"\\\";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||\\\"\\\"},o.prototype.end=function(e){var t=e&&e.length?this.write(e):\\\"\\\";return this.lastNeed?t+\\\"�\\\":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString(\\\"utf8\\\",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString(\\\"utf8\\\",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){\\\"use strict\\\";e.exports=l;var r=n(5).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(6);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit(\\\"error\\\",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(\\\"function\\\"==typeof e.transform&&(this._transform=e.transform),\\\"function\\\"==typeof e.flush&&(this._flush=e.flush)),this.on(\\\"prefinish\\\",f)}function f(){var e=this;\\\"function\\\"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit(\\\"error\\\",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(7)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i(\\\"_transform()\\\"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,n){\\\"use strict\\\";(function(e){n.d(t,\\\"a\\\",(function(){return g}));var r=n(3),i=n.n(r),o=n(8),s=n(4),a=n(32),u=n(1),c=n(9),l=n(16),f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const h=i()(\\\"threads:master:messages\\\"),d=i()(\\\"threads:master:spawn\\\"),p=i()(\\\"threads:master:thread-utils\\\"),b=void 0!==e&&e.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(e.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function m(e,t,n,r){const i=n.filter(e=>e.type===c.a.internalError).map(e=>e.error);return Object.assign(e,{[u.a]:i,[u.b]:n,[u.c]:r,[u.e]:t})}function g(e,t){return f(this,void 0,void 0,(function*(){d(\\\"Initializing new thread\\\");const n=(yield function(e,t,n){return f(this,void 0,void 0,(function*(){let r;const i=new Promise((e,i)=>{r=setTimeout(()=>i(Error(n)),t)}),o=yield Promise.race([e,i]);return clearTimeout(r),o}))}(function(e){return new Promise((t,n)=>{const r=i=>{var o;h(\\\"Message from worker before finishing initialization:\\\",i.data),(o=i.data)&&\\\"init\\\"===o.type?(e.removeEventListener(\\\"message\\\",r),t(i.data)):(e=>e&&\\\"uncaughtError\\\"===e.type)(i.data)&&(e.removeEventListener(\\\"message\\\",r),n(Object(s.a)(i.data.error)))};e.addEventListener(\\\"message\\\",r)})}(e),t&&t.timeout?t.timeout:b,`Timeout: Did not receive an init message from worker after ${b}ms. Make sure the worker calls expose().`)).exposed,{termination:r,terminate:i}=function(e){const[t,n]=Object(a.a)();return{terminate:()=>f(this,void 0,void 0,(function*(){p(\\\"Terminating worker\\\"),yield e.terminate(),n()})),termination:t}}(e),u=function(e,t){return new o.a(n=>{const r=e=>{const t={type:c.a.message,data:e.data};n.next(t)},i=e=>{p(\\\"Unhandled promise rejection event in thread:\\\",e);const t={type:c.a.internalError,error:Error(e.reason)};n.next(t)};e.addEventListener(\\\"message\\\",r),e.addEventListener(\\\"unhandledrejection\\\",i),t.then(()=>{const t={type:c.a.termination};e.removeEventListener(\\\"message\\\",r),e.removeEventListener(\\\"unhandledrejection\\\",i),n.next(t),n.complete()})})}(e,r);if(\\\"function\\\"===n.type){return m(Object(l.a)(e),e,u,i)}if(\\\"module\\\"===n.type){return m(Object(l.b)(e,n.methods),e,u,i)}{const e=n.type;throw Error(`Worker init message states unexpected type of expose(): ${e}`)}}))}}).call(this,n(2))},function(e,t,n){var r=n(35),i=n(17),o=n(36);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t,n){var r=n(37),i=n(17),o=n(38);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t,n){function r(e,t){\\\"use strict\\\";var n=(t=t||{}).pos||0,i=\\\"<\\\".charCodeAt(0),o=\\\">\\\".charCodeAt(0),s=\\\"-\\\".charCodeAt(0),a=\\\"/\\\".charCodeAt(0),u=\\\"!\\\".charCodeAt(0),c=\\\"'\\\".charCodeAt(0),l='\\\"'.charCodeAt(0);function f(){for(var t=[];e[n];)if(e.charCodeAt(n)==i){if(e.charCodeAt(n+1)===a)return(n=e.indexOf(\\\">\\\",n))+1&&(n+=1),t;if(e.charCodeAt(n+1)===u){if(e.charCodeAt(n+2)==s){for(;-1!==n&&(e.charCodeAt(n)!==o||e.charCodeAt(n-1)!=s||e.charCodeAt(n-2)!=s||-1==n);)n=e.indexOf(\\\">\\\",n+1);-1===n&&(n=e.length)}else for(n+=2;e.charCodeAt(n)!==o&&e[n];)n++;n++;continue}var r=b();t.push(r)}else{var c=h();c.trim().length>0&&t.push(c),n++}return t}function h(){var t=n;return-2===(n=e.indexOf(\\\"<\\\",n)-1)&&(n=e.length),e.slice(t,n+1)}function d(){for(var t=n;-1===\\\"\\\\n\\\\t>/= \\\".indexOf(e[n])&&e[n];)n++;return e.slice(t,n)}var p=t.noChildNodes||[\\\"img\\\",\\\"br\\\",\\\"input\\\",\\\"meta\\\",\\\"link\\\"];function b(){n++;const t=d(),r={};let i=[];for(;e.charCodeAt(n)!==o&&e[n];){var s=e.charCodeAt(n);if(s>64&&s<91||s>96&&s<123){for(var u=d(),h=e.charCodeAt(n);h&&h!==c&&h!==l&&!(h>64&&h<91||h>96&&h<123)&&h!==o;)n++,h=e.charCodeAt(n);if(h===c||h===l){var b=m();if(-1===n)return{tagName:t,attributes:r,children:i}}else b=null,n--;r[u]=b}n++}if(e.charCodeAt(n-1)!==a)if(\\\"script\\\"==t){var g=n+1;n=e.indexOf(\\\"<\\\\/script>\\\",n),i=[e.slice(g,n-1)],n+=9}else if(\\\"style\\\"==t){g=n+1;n=e.indexOf(\\\"</style>\\\",n),i=[e.slice(g,n-1)],n+=8}else-1==p.indexOf(t)&&(n++,i=f());else n++;return{tagName:t,attributes:r,children:i}}function m(){var t=e[n],r=++n;return n=e.indexOf(t,r),e.slice(r,n)}var g,y=null;if(void 0!==t.attrValue){t.attrName=t.attrName||\\\"id\\\";for(y=[];-1!==(g=void 0,g=new RegExp(\\\"\\\\\\\\s\\\"+t.attrName+\\\"\\\\\\\\s*=['\\\\\\\"]\\\"+t.attrValue+\\\"['\\\\\\\"]\\\").exec(e),n=g?g.index:-1);)-1!==(n=e.lastIndexOf(\\\"<\\\",n))&&y.push(b()),e=e.substr(n),n=0}else y=t.parseNode?b():f();return t.filter&&(y=r.filter(y,t.filter)),t.setPos&&(y.pos=n),y}r.simplify=function(e){var t={};if(!e.length)return\\\"\\\";if(1===e.length&&\\\"string\\\"==typeof e[0])return e[0];for(var n in e.forEach((function(e){if(\\\"object\\\"==typeof e){t[e.tagName]||(t[e.tagName]=[]);var n=r.simplify(e.children||[]);t[e.tagName].push(n),e.attributes&&(n._attributes=e.attributes)}})),t)1==t[n].length&&(t[n]=t[n][0]);return t},r.filter=function(e,t){var n=[];return e.forEach((function(e){if(\\\"object\\\"==typeof e&&t(e)&&n.push(e),e.children){var i=r.filter(e.children,t);n=n.concat(i)}})),n},r.stringify=function(e){var t=\\\"\\\";function n(e){if(e)for(var n=0;n<e.length;n++)\\\"string\\\"==typeof e[n]?t+=e[n].trim():r(e[n])}function r(e){for(var r in t+=\\\"<\\\"+e.tagName,e.attributes)null===e.attributes[r]?t+=\\\" \\\"+r:-1===e.attributes[r].indexOf('\\\"')?t+=\\\" \\\"+r+'=\\\"'+e.attributes[r].trim()+'\\\"':t+=\\\" \\\"+r+\\\"='\\\"+e.attributes[r].trim()+\\\"'\\\";t+=\\\">\\\",n(e.children),t+=\\\"</\\\"+e.tagName+\\\">\\\"}return n(e),t},r.toContentString=function(e){if(Array.isArray(e)){var t=\\\"\\\";return e.forEach((function(e){t=(t+=\\\" \\\"+r.toContentString(e)).trim()})),t}return\\\"object\\\"==typeof e?r.toContentString(e.children):\\\" \\\"+e},r.getElementById=function(e,t,n){var i=r(e,{attrValue:t});return n?r.simplify(i):i[0]},r.getElementsByClassName=function(e,t,n){const i=r(e,{attrName:\\\"class\\\",attrValue:\\\"[a-zA-Z0-9-s ]*\\\"+t+\\\"[a-zA-Z0-9-s ]*\\\"});return n?r.simplify(i):i},r.parseStream=function(e,t){if(\\\"string\\\"==typeof t&&(t=t.length+2),\\\"string\\\"==typeof e){var i=n(0);e=i.createReadStream(e,{start:t}),t=0}var o=t,s=\\\"\\\";return e.on(\\\"data\\\",(function(t){s+=t;for(var n=0;;){if(!(o=s.indexOf(\\\"<\\\",o)+1))return void(o=n);if(\\\"/\\\"!==s[o+1]){var i=r(s,{pos:o-1,parseNode:!0,setPos:!0});if((o=i.pos)>s.length-1||o<n)return s=s.slice(n),o=0,void(n=0);e.emit(\\\"xml\\\",i),n=o}else o+=1,n=pos}})),e.on(\\\"end\\\",(function(){console.log(\\\"end\\\")})),e},r.transformStream=function(e){const t=n(39);\\\"string\\\"==typeof e&&(e=e.length+2);var i=e||0,o=\\\"\\\";return t({readableObjectMode:!0},(function(e,t,n){o+=e;for(var s=0;;){if(!(i=o.indexOf(\\\"<\\\",i)+1))return i=s,n();if(\\\"/\\\"!==o[i+1]){var a=r(o,{pos:i-1,parseNode:!0,setPos:!0});if((i=a.pos)>o.length-1||i<s)return o=o.slice(s),i=0,s=0,n();this.push(a),s=i}else i+=1,s=pos}n()}))},e.exports=r,r.xml=r},function(e,t,n){\\\"use strict\\\";var r=n(53),i=n(12),o=n(58),s=n(59),a=n(60),u=n(61),c=n(62),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:\\\"\\\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&(\\\"string\\\"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):\\\"[object ArrayBuffer]\\\"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==s.Z_OK))throw new Error(a[n])}function h(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}f.prototype.push=function(e,t){var n,a,u,c,f,h=this.strm,d=this.options.chunkSize,p=this.options.dictionary,b=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,\\\"string\\\"==typeof e?h.input=o.binstring2buf(e):\\\"[object ArrayBuffer]\\\"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(n=r.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===s.Z_BUF_ERROR&&!0===b&&(n=s.Z_OK,b=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||(\\\"string\\\"===this.options.to?(u=o.utf8border(h.output,h.next_out),c=h.next_out-u,f=o.buf2string(h.output,u),h.next_out=c,h.avail_out=d-c,c&&i.arraySet(h.output,h.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(b=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),h.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===s.Z_OK&&(\\\"string\\\"===this.options.to?this.result=this.chunks.join(\\\"\\\"):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,n){\\\"use strict\\\";var r=n(8);class i extends r.a{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const t of this._observers)t.next(e)}error(e){for(const t of this._observers)t.error(e)}complete(){for(const e of this._observers)e.complete()}}t.a=i},function(e,t,n){\\\"use strict\\\";n.d(t,\\\"a\\\",(function(){return i}));const r=()=>{};function i(){let e,t=!1,n=r;return[new Promise(r=>{t?r(e):n=r}),r=>{t=!0,e=r,n()}]}},function(e,t,n){\\\"use strict\\\";n.d(t,\\\"a\\\",(function(){return i}));var r=n(1);function i(e){return e&&\\\"object\\\"==typeof e&&e[r.d]}},function(e,t,n){var r=n(0),i=n(15),o=e.exports;for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);function a(e){if(\\\"string\\\"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol=\\\"https:\\\"),\\\"https:\\\"!==e.protocol)throw new Error('Protocol \\\"'+e.protocol+'\\\" not supported. Expected \\\"https:\\\"');return e}o.request=function(e,t){return e=a(e),r.request.call(this,e,t)},o.get=function(e,t){return e=a(e),r.get.call(this,e,t)}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance\\\")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(){throw new TypeError(\\\"Invalid attempt to destructure non-iterable instance\\\")}},function(e,t,n){(function(t){var r=n(40).Transform,i=n(50).inherits;function o(e){r.call(this,e),this._destroyed=!1}function s(e,t,n){n(null,e)}function a(e){return function(t,n,r){return\\\"function\\\"==typeof t&&(r=n,n=t,t={}),\\\"function\\\"!=typeof n&&(n=s),\\\"function\\\"!=typeof r&&(r=null),e(t,n,r)}}i(o,r),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var n=this;t.nextTick((function(){e&&n.emit(\\\"error\\\",e),n.emit(\\\"close\\\")}))}},e.exports=a((function(e,t,n){var r=new o(e);return r._transform=t,n&&(r._flush=n),r})),e.exports.ctor=a((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=Object.assign({},e,t),o.call(this,this.options)}return i(r,o),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),e.exports.obj=a((function(e,t,n){var r=new o(Object.assign({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this,n(2))},function(e,t,n){(t=e.exports=n(18)).Stream=t,t.Readable=t,t.Writable=n(23),t.Duplex=n(6),t.Transform=n(25),t.PassThrough=n(48),t.finished=n(14),t.pipeline=n(49)},function(e,t){},function(e,t,n){\\\"use strict\\\";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\\\"value\\\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(0).Buffer,a=n(43).inspect,u=a&&a.custom||\\\"inspect\\\";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,(n=[{key:\\\"push\\\",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:\\\"unshift\\\",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:\\\"shift\\\",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:\\\"clear\\\",value:function(){this.head=this.tail=null,this.length=0}},{key:\\\"join\\\",value:function(e){if(0===this.length)return\\\"\\\";for(var t=this.head,n=\\\"\\\"+t.data;t=t.next;)n+=e+t.data;return n}},{key:\\\"concat\\\",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:\\\"consume\\\",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:\\\"first\\\",value:function(){return this.head.data}},{key:\\\"_getString\\\",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:\\\"_getBuffer\\\",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),c&&o(t,c),e}()},function(e,t){},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&\\\"true\\\"===String(n).toLowerCase()}e.exports=function(e,t){if(n(\\\"noDeprecation\\\"))return e;var r=!1;return function(){if(!r){if(n(\\\"throwDeprecation\\\"))throw new Error(t);n(\\\"traceDeprecation\\\")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(11))},function(e,t,n){var r=n(0),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if(\\\"number\\\"==typeof e)throw new TypeError(\\\"Argument must not be a number\\\");return i(e,t,n)},s.alloc=function(e,t,n){if(\\\"number\\\"!=typeof e)throw new TypeError(\\\"Argument must be a number\\\");var r=i(e);return void 0!==t?\\\"string\\\"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if(\\\"number\\\"!=typeof e)throw new TypeError(\\\"Argument must be a number\\\");return i(e)},s.allocUnsafeSlow=function(e){if(\\\"number\\\"!=typeof e)throw new TypeError(\\\"Argument must be a number\\\");return r.SlowBuffer(e)}},function(e,t,n){\\\"use strict\\\";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(14),s=Symbol(\\\"lastResolve\\\"),a=Symbol(\\\"lastReject\\\"),u=Symbol(\\\"error\\\"),c=Symbol(\\\"ended\\\"),l=Symbol(\\\"lastPromise\\\"),f=Symbol(\\\"handlePromise\\\"),h=Symbol(\\\"stream\\\");function d(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(d(n,!1)))}}function b(e){t.nextTick(p,e)}var m=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise((function(n,r){t.nextTick((function(){e[u]?r(e[u]):n(d(void 0,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(void 0,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[f])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,\\\"return\\\",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(void 0,!0))}))}))})),r),m);e.exports=function(e){var t,n=Object.create(g,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[s]=null,n[a]=null,e(d(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&\\\"ERR_STREAM_PREMATURE_CLOSE\\\"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(d(void 0,!0))),n[c]=!0})),e.on(\\\"readable\\\",b.bind(null,n)),n}}).call(this,n(2))},function(e,t){e.exports=function(){throw new Error(\\\"Readable.from is not available in the browser\\\")}},function(e,t,n){\\\"use strict\\\";e.exports=i;var r=n(25);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(7)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){\\\"use strict\\\";var r;var i=n(5).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on(\\\"close\\\",(function(){a=!0})),void 0===r&&(r=n(14)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&\\\"function\\\"==typeof e.abort}(e)?e.abort():\\\"function\\\"==typeof e.destroy?e.destroy():void o(t||new s(\\\"pipe\\\"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?\\\"function\\\"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o(\\\"streams\\\");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(l)}},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(\\\" \\\")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,(function(e){if(\\\"%%\\\"===e)return\\\"%\\\";if(n>=o)return e;switch(e){case\\\"%s\\\":return String(r[n++]);case\\\"%d\\\":return Number(r[n++]);case\\\"%j\\\":try{return JSON.stringify(r[n++])}catch(e){return\\\"[Circular]\\\"}default:return e}})),u=r[n];n<o;u=r[++n])b(u)||!w(u)?s+=\\\" \\\"+u:s+=\\\" \\\"+a(u);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=a.styles[t];return n?\\\"\\u001b[\\\"+a.colors[n][0]+\\\"m\\\"+e+\\\"\\u001b[\\\"+a.colors[n][1]+\\\"m\\\":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return g(i)||(i=l(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize(\\\"undefined\\\",\\\"undefined\\\");if(g(t)){var n=\\\"'\\\"+JSON.stringify(t).replace(/^\\\"|\\\"$/g,\\\"\\\").replace(/'/g,\\\"\\\\\\\\'\\\").replace(/\\\\\\\\\\\"/g,'\\\"')+\\\"'\\\";return e.stylize(n,\\\"string\\\")}if(m(t))return e.stylize(\\\"\\\"+t,\\\"number\\\");if(p(t))return e.stylize(\\\"\\\"+t,\\\"boolean\\\");if(b(t))return e.stylize(\\\"null\\\",\\\"null\\\")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),k(n)&&(s.indexOf(\\\"message\\\")>=0||s.indexOf(\\\"description\\\")>=0))return f(n);if(0===s.length){if(S(n)){var u=n.name?\\\": \\\"+n.name:\\\"\\\";return e.stylize(\\\"[Function\\\"+u+\\\"]\\\",\\\"special\\\")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),\\\"regexp\\\");if(_(n))return e.stylize(Date.prototype.toString.call(n),\\\"date\\\");if(k(n))return f(n)}var c,w=\\\"\\\",x=!1,C=[\\\"{\\\",\\\"}\\\"];(d(n)&&(x=!0,C=[\\\"[\\\",\\\"]\\\"]),S(n))&&(w=\\\" [Function\\\"+(n.name?\\\": \\\"+n.name:\\\"\\\")+\\\"]\\\");return v(n)&&(w=\\\" \\\"+RegExp.prototype.toString.call(n)),_(n)&&(w=\\\" \\\"+Date.prototype.toUTCString.call(n)),k(n)&&(w=\\\" \\\"+f(n)),0!==s.length||x&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),\\\"regexp\\\"):e.stylize(\\\"[Object]\\\",\\\"special\\\"):(e.seen.push(n),c=x?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)T(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push(\\\"\\\");return i.forEach((function(i){i.match(/^\\\\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,a,s):s.map((function(t){return h(e,n,r,a,t,x)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf(\\\"\\\\n\\\")>=0&&0,e+t.replace(/\\\\u001b\\\\[\\\\d\\\\d?m/g,\\\"\\\").length+1}),0)>60)return n[0]+(\\\"\\\"===t?\\\"\\\":t+\\\"\\\\n \\\")+\\\" \\\"+e.join(\\\",\\\\n  \\\")+\\\" \\\"+n[1];return n[0]+t+\\\" \\\"+e.join(\\\", \\\")+\\\" \\\"+n[1]}(c,w,C)):C[0]+w+C[1]}function f(e){return\\\"[\\\"+Error.prototype.toString.call(e)+\\\"]\\\"}function h(e,t,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize(\\\"[Getter/Setter]\\\",\\\"special\\\"):e.stylize(\\\"[Getter]\\\",\\\"special\\\"):u.set&&(a=e.stylize(\\\"[Setter]\\\",\\\"special\\\")),T(r,i)||(s=\\\"[\\\"+i+\\\"]\\\"),a||(e.seen.indexOf(u.value)<0?(a=b(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf(\\\"\\\\n\\\")>-1&&(a=o?a.split(\\\"\\\\n\\\").map((function(e){return\\\"  \\\"+e})).join(\\\"\\\\n\\\").substr(2):\\\"\\\\n\\\"+a.split(\\\"\\\\n\\\").map((function(e){return\\\"   \\\"+e})).join(\\\"\\\\n\\\")):a=e.stylize(\\\"[Circular]\\\",\\\"special\\\")),y(s)){if(o&&i.match(/^\\\\d+$/))return a;(s=JSON.stringify(\\\"\\\"+i)).match(/^\\\"([a-zA-Z_][a-zA-Z_0-9]*)\\\"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,\\\"name\\\")):(s=s.replace(/'/g,\\\"\\\\\\\\'\\\").replace(/\\\\\\\\\\\"/g,'\\\"').replace(/(^\\\"|\\\"$)/g,\\\"'\\\"),s=e.stylize(s,\\\"string\\\"))}return s+\\\": \\\"+a}function d(e){return Array.isArray(e)}function p(e){return\\\"boolean\\\"==typeof e}function b(e){return null===e}function m(e){return\\\"number\\\"==typeof e}function g(e){return\\\"string\\\"==typeof e}function y(e){return void 0===e}function v(e){return w(e)&&\\\"[object RegExp]\\\"===x(e)}function w(e){return\\\"object\\\"==typeof e&&null!==e}function _(e){return w(e)&&\\\"[object Date]\\\"===x(e)}function k(e){return w(e)&&(\\\"[object Error]\\\"===x(e)||e instanceof Error)}function S(e){return\\\"function\\\"==typeof e}function x(e){return Object.prototype.toString.call(e)}function C(e){return e<10?\\\"0\\\"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(o)&&(o=e.env.NODE_DEBUG||\\\"\\\"),n=n.toUpperCase(),!s[n])if(new RegExp(\\\"\\\\\\\\b\\\"+n+\\\"\\\\\\\\b\\\",\\\"i\\\").test(o)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error(\\\"%s %d: %s\\\",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:\\\"cyan\\\",number:\\\"yellow\\\",boolean:\\\"yellow\\\",undefined:\\\"grey\\\",null:\\\"bold\\\",string:\\\"green\\\",date:\\\"magenta\\\",regexp:\\\"red\\\"},t.isArray=d,t.isBoolean=p,t.isNull=b,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=g,t.isSymbol=function(e){return\\\"symbol\\\"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=w,t.isDate=_,t.isError=k,t.isFunction=S,t.isPrimitive=function(e){return null===e||\\\"boolean\\\"==typeof e||\\\"number\\\"==typeof e||\\\"string\\\"==typeof e||\\\"symbol\\\"==typeof e||void 0===e},t.isBuffer=n(51);var E=[\\\"Jan\\\",\\\"Feb\\\",\\\"Mar\\\",\\\"Apr\\\",\\\"May\\\",\\\"Jun\\\",\\\"Jul\\\",\\\"Aug\\\",\\\"Sep\\\",\\\"Oct\\\",\\\"Nov\\\",\\\"Dec\\\"];function O(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(\\\":\\\");return[e.getDate(),E[e.getMonth()],t].join(\\\" \\\")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log(\\\"%s - %s\\\",O(),t.format.apply(t,arguments))},t.inherits=n(52),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var j=\\\"undefined\\\"!=typeof Symbol?Symbol(\\\"util.promisify.custom\\\"):void 0;function R(e,t){if(!e){var n=new Error(\\\"Promise was rejected with a falsy value\\\");n.reason=e,e=n}return t(e)}t.promisify=function(e){if(\\\"function\\\"!=typeof e)throw new TypeError('The \\\"original\\\" argument must be of type Function');if(j&&e[j]){var t;if(\\\"function\\\"!=typeof(t=e[j]))throw new TypeError('The \\\"util.promisify.custom\\\" argument must be of type Function');return Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),j&&Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=j,t.callbackify=function(t){if(\\\"function\\\"!=typeof t)throw new TypeError('The \\\"original\\\" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(\\\"function\\\"!=typeof i)throw new TypeError(\\\"The last argument must be of type Function\\\");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(R,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(2))},function(e,t){e.exports=function(e){return e&&\\\"object\\\"==typeof e&&\\\"function\\\"==typeof e.copy&&\\\"function\\\"==typeof e.fill&&\\\"function\\\"==typeof e.readUInt8}},function(e,t){\\\"function\\\"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){\\\"use strict\\\";var r=n(12),i=n(54),o=n(55),s=n(56),a=n(57);function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\\\"\\\",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,l(e)):-2}function h(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,f(e))):-2}function d(e,t){var n,r;return e?(r=new c,e.state=r,r.window=null,0!==(n=h(e,t))&&(e.state=null),n):-2}var p,b,m=!0;function g(e){if(m){var t;for(p=new r.Buf32(512),b=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,b,0,e.work,{bits:5}),m=!1}e.lencode=p,e.lenbits=9,e.distcode=b,e.distbits=5}function y(e,t,n,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>i&&(o=i),r.arraySet(s.window,t,n-i,o,s.wnext),(i-=o)?(r.arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}t.inflateReset=f,t.inflateReset2=h,t.inflateResetKeep=l,t.inflateInit=function(e){return d(e,15)},t.inflateInit2=d,t.inflate=function(e,t){var n,c,l,f,h,d,p,b,m,v,w,_,k,S,x,C,E,O,T,j,R,A,P,L,M=0,F=new r.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,b=n.hold,m=n.bits,v=d,w=p,A=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(2&n.wrap&&35615===b){n.check=0,F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0),b=0,m=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg=\\\"incorrect header check\\\",n.mode=30;break}if(8!=(15&b)){e.msg=\\\"unknown compression method\\\",n.mode=30;break}if(m-=4,R=8+(15&(b>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){e.msg=\\\"invalid window size\\\",n.mode=30;break}n.dmax=1<<R,e.adler=n.check=1,n.mode=512&b?10:12,b=0,m=0;break;case 2:for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(n.flags=b,8!=(255&n.flags)){e.msg=\\\"unknown compression method\\\",n.mode=30;break}if(57344&n.flags){e.msg=\\\"unknown header flags set\\\",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0)),b=0,m=0,n.mode=3;case 3:for(;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.head&&(n.head.time=b),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,F[2]=b>>>16&255,F[3]=b>>>24&255,n.check=o(n.check,F,4,0)),b=0,m=0,n.mode=4;case 4:for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0)),b=0,m=0,n.mode=5;case 5:if(1024&n.flags){for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(F[0]=255&b,F[1]=b>>>8&255,n.check=o(n.check,F,2,0)),b=0,m=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((_=n.length)>d&&(_=d),_&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,f,_,R)),512&n.flags&&(n.check=o(n.check,c,_,f)),d-=_,f+=_,n.length-=_),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===d)break e;_=0;do{R=c[f+_++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R))}while(R&&_<d);if(512&n.flags&&(n.check=o(n.check,c,_,f)),d-=_,f+=_,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===d)break e;_=0;do{R=c[f+_++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R))}while(R&&_<d);if(512&n.flags&&(n.check=o(n.check,c,_,f)),d-=_,f+=_,R)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;m<16;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(b!==(65535&n.check)){e.msg=\\\"header crc mismatch\\\",n.mode=30;break}b=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}e.adler=n.check=u(b),b=0,m=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=b,n.bits=m,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&m,m-=7&m,n.mode=27;break}for(;m<3;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}switch(n.last=1&b,m-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(g(n),n.mode=20,6===t){b>>>=2,m-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg=\\\"invalid block type\\\",n.mode=30}b>>>=2,m-=2;break;case 14:for(b>>>=7&m,m-=7&m;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if((65535&b)!=(b>>>16^65535)){e.msg=\\\"invalid stored block lengths\\\",n.mode=30;break}if(n.length=65535&b,b=0,m=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(_=n.length){if(_>d&&(_=d),_>p&&(_=p),0===_)break e;r.arraySet(l,c,f,_,h),d-=_,f+=_,p-=_,h+=_,n.length-=_;break}n.mode=12;break;case 17:for(;m<14;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(n.nlen=257+(31&b),b>>>=5,m-=5,n.ndist=1+(31&b),b>>>=5,m-=5,n.ncode=4+(15&b),b>>>=4,m-=4,n.nlen>286||n.ndist>30){e.msg=\\\"too many length or distance symbols\\\",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;m<3;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.lens[N[n.have++]]=7&b,b>>>=3,m-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},A=a(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,A){e.msg=\\\"invalid code lengths set\\\",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;C=(M=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,E=65535&M,!((x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(E<16)b>>>=x,m-=x,n.lens[n.have++]=E;else{if(16===E){for(L=x+2;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(b>>>=x,m-=x,0===n.have){e.msg=\\\"invalid bit length repeat\\\",n.mode=30;break}R=n.lens[n.have-1],_=3+(3&b),b>>>=2,m-=2}else if(17===E){for(L=x+3;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}m-=x,R=0,_=3+(7&(b>>>=x)),b>>>=3,m-=3}else{for(L=x+7;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}m-=x,R=0,_=11+(127&(b>>>=x)),b>>>=7,m-=7}if(n.have+_>n.nlen+n.ndist){e.msg=\\\"invalid bit length repeat\\\",n.mode=30;break}for(;_--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){e.msg=\\\"invalid code -- missing end-of-block\\\",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},A=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,A){e.msg=\\\"invalid literal/lengths set\\\",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},A=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,A){e.msg=\\\"invalid distances set\\\",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(d>=6&&p>=258){e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=b,n.bits=m,s(e,w),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,b=n.hold,m=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;C=(M=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,E=65535&M,!((x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(C&&0==(240&C)){for(O=x,T=C,j=E;C=(M=n.lencode[j+((b&(1<<O+T)-1)>>O)])>>>16&255,E=65535&M,!(O+(x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}b>>>=O,m-=O,n.back+=O}if(b>>>=x,m-=x,n.back+=x,n.length=E,0===C){n.mode=26;break}if(32&C){n.back=-1,n.mode=12;break}if(64&C){e.msg=\\\"invalid literal/length code\\\",n.mode=30;break}n.extra=15&C,n.mode=22;case 22:if(n.extra){for(L=n.extra;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;C=(M=n.distcode[b&(1<<n.distbits)-1])>>>16&255,E=65535&M,!((x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(0==(240&C)){for(O=x,T=C,j=E;C=(M=n.distcode[j+((b&(1<<O+T)-1)>>O)])>>>16&255,E=65535&M,!(O+(x=M>>>24)<=m);){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}b>>>=O,m-=O,n.back+=O}if(b>>>=x,m-=x,n.back+=x,64&C){e.msg=\\\"invalid distance code\\\",n.mode=30;break}n.offset=E,n.extra=15&C,n.mode=24;case 24:if(n.extra){for(L=n.extra;m<L;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break}n.mode=25;case 25:if(0===p)break e;if(_=w-p,n.offset>_){if((_=n.offset-_)>n.whave&&n.sane){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break}_>n.wnext?(_-=n.wnext,k=n.wsize-_):k=n.wnext-_,_>n.length&&(_=n.length),S=n.window}else S=l,k=h-n.offset,_=n.length;_>p&&(_=p),p-=_,n.length-=_;do{l[h++]=S[k++]}while(--_);0===n.length&&(n.mode=21);break;case 26:if(0===p)break e;l[h++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;m<32;){if(0===d)break e;d--,b|=c[f++]<<m,m+=8}if(w-=p,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?o(n.check,l,w,h-w):i(n.check,l,w,h-w)),w=p,(n.flags?b:u(b))!==n.check){e.msg=\\\"incorrect data check\\\",n.mode=30;break}b=0,m=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;m<32;){if(0===d)break e;d--,b+=c[f++]<<m,m+=8}if(b!==(4294967295&n.total)){e.msg=\\\"incorrect length check\\\",n.mode=30;break}b=0,m=0}n.mode=29;case 29:A=1;break e;case 30:A=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=b,n.bits=m,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&y(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(v-=e.avail_in,w-=e.avail_out,e.total_in+=v,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?o(n.check,l,w,e.next_out-w):i(n.check,l,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===v&&0===w||4===t)&&0===A&&(A=-5),A)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:y(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo=\\\"pako inflate (from Nodeca project)\\\"},function(e,t,n){\\\"use strict\\\";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},function(e,t,n){\\\"use strict\\\";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var o=r,s=i+n;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t,n){\\\"use strict\\\";e.exports=function(e,t){var n,r,i,o,s,a,u,c,l,f,h,d,p,b,m,g,y,v,w,_,k,S,x,C,E;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),o=e.next_out,E=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,b=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(d+=C[r++]<<p,p+=8,d+=C[r++]<<p,p+=8),v=b[d&g];t:for(;;){if(d>>>=w=v>>>24,p-=w,0===(w=v>>>16&255))E[o++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=b[(65535&v)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg=\\\"invalid literal/length code\\\",n.mode=30;break e}_=65535&v,(w&=15)&&(p<w&&(d+=C[r++]<<p,p+=8),_+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=C[r++]<<p,p+=8,d+=C[r++]<<p,p+=8),v=m[d&y];n:for(;;){if(d>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=m[(65535&v)+(d&(1<<w)-1)];continue n}e.msg=\\\"invalid distance code\\\",n.mode=30;break e}if(k=65535&v,p<(w&=15)&&(d+=C[r++]<<p,(p+=8)<w&&(d+=C[r++]<<p,p+=8)),(k+=d&(1<<w)-1)>u){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break e}if(d>>>=w,p-=w,k>(w=o-s)){if((w=k-w)>l&&n.sane){e.msg=\\\"invalid distance too far back\\\",n.mode=30;break e}if(S=0,x=h,0===f){if(S+=c-w,w<_){_-=w;do{E[o++]=h[S++]}while(--w);S=o-k,x=E}}else if(f<w){if(S+=c+f-w,(w-=f)<_){_-=w;do{E[o++]=h[S++]}while(--w);if(S=0,f<_){_-=w=f;do{E[o++]=h[S++]}while(--w);S=o-k,x=E}}}else if(S+=f-w,w<_){_-=w;do{E[o++]=h[S++]}while(--w);S=o-k,x=E}for(;_>2;)E[o++]=x[S++],E[o++]=x[S++],E[o++]=x[S++],_-=3;_&&(E[o++]=x[S++],_>1&&(E[o++]=x[S++]))}else{S=o-k;do{E[o++]=E[S++],E[o++]=E[S++],E[o++]=E[S++],_-=3}while(_>2);_&&(E[o++]=E[S++],_>1&&(E[o++]=E[S++]))}break}}break}}while(r<i&&o<a);r-=_=p>>3,d&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=d,n.bits=p}},function(e,t,n){\\\"use strict\\\";var r=n(12),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,c,l,f,h){var d,p,b,m,g,y,v,w,_,k=h.bits,S=0,x=0,C=0,E=0,O=0,T=0,j=0,R=0,A=0,P=0,L=null,M=0,F=new r.Buf16(16),N=new r.Buf16(16),D=null,I=0;for(S=0;S<=15;S++)F[S]=0;for(x=0;x<u;x++)F[t[n+x]]++;for(O=k,E=15;E>=1&&0===F[E];E--);if(O>E&&(O=E),0===E)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(C=1;C<E&&0===F[C];C++);for(O<C&&(O=C),R=1,S=1;S<=15;S++)if(R<<=1,(R-=F[S])<0)return-1;if(R>0&&(0===e||1!==E))return-1;for(N[1]=0,S=1;S<15;S++)N[S+1]=N[S]+F[S];for(x=0;x<u;x++)0!==t[n+x]&&(f[N[t[n+x]]++]=x);if(0===e?(L=D=f,y=19):1===e?(L=i,M-=257,D=o,I-=257,y=256):(L=s,D=a,y=-1),P=0,x=0,S=C,g=l,T=O,j=0,b=-1,m=(A=1<<O)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){v=S-j,f[x]<y?(w=0,_=f[x]):f[x]>y?(w=D[I+f[x]],_=L[M+f[x]]):(w=96,_=0),d=1<<S-j,C=p=1<<T;do{c[g+(P>>j)+(p-=d)]=v<<24|w<<16|_|0}while(0!==p);for(d=1<<S-1;P&d;)d>>=1;if(0!==d?(P&=d-1,P+=d):P=0,x++,0==--F[S]){if(S===E)break;S=t[n+f[x]]}if(S>O&&(P&m)!==b){for(0===j&&(j=O),g+=C,R=1<<(T=S-j);T+j<E&&!((R-=F[T+j])<=0);)T++,R<<=1;if(A+=1<<T,1===e&&A>852||2===e&&A>592)return 1;c[b=P&m]=O<<24|T<<16|g-l|0}}return 0!==P&&(c[g+P]=S-j<<24|64<<16|0),h.bits=O,0}},function(e,t,n){\\\"use strict\\\";var r=n(12),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function u(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n=\\\"\\\",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,t.string2buf=function(e){var t,n,i,o,s,a=e.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),s=0,o=0;s<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,o,a=t||e.length,c=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if((o=s[i])>4)c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},function(e,t,n){\\\"use strict\\\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){\\\"use strict\\\";e.exports={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"}},function(e,t,n){\\\"use strict\\\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){\\\"use strict\\\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\\\"\\\",this.comment=\\\"\\\",this.hcrc=0,this.done=!1}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function s(...e){if(!s.enabled)return;const t=s,i=Number(new Date),o=i-(n||i);t.diff=o,t.prev=n,t.curr=i,n=i,e[0]=r.coerce(e[0]),\\\"string\\\"!=typeof e[0]&&e.unshift(\\\"%O\\\");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if(\\\"%%\\\"===n)return n;a++;const o=r.formatters[i];if(\\\"function\\\"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=i,s.extend=o,\\\"function\\\"==typeof r.init&&r.init(s),r.instances.push(s),s}function i(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){const n=r(this.namespace+(void 0===t?\\\":\\\":t)+e);return n.log=this.log,n}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\\\\.\\\\*\\\\?$/,\\\"*\\\")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(s),...r.skips.map(s).map(e=>\\\"-\\\"+e)].join(\\\",\\\");return r.enable(\\\"\\\"),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=(\\\"string\\\"==typeof e?e:\\\"\\\").split(/[\\\\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&(\\\"-\\\"===(e=n[t].replace(/\\\\*/g,\\\".*?\\\"))[0]?r.skips.push(new RegExp(\\\"^\\\"+e.substr(1)+\\\"$\\\")):r.names.push(new RegExp(\\\"^\\\"+e+\\\"$\\\")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if(\\\"*\\\"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(64),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+\\\" \\\"+r+(i?\\\"s\\\":\\\"\\\")}e.exports=function(e,t){t=t||{};var a=typeof e;if(\\\"string\\\"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\\\\d+)?\\\\.?\\\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||\\\"ms\\\").toLowerCase()){case\\\"years\\\":case\\\"year\\\":case\\\"yrs\\\":case\\\"yr\\\":case\\\"y\\\":return 315576e5*s;case\\\"weeks\\\":case\\\"week\\\":case\\\"w\\\":return 6048e5*s;case\\\"days\\\":case\\\"day\\\":case\\\"d\\\":return s*o;case\\\"hours\\\":case\\\"hour\\\":case\\\"hrs\\\":case\\\"hr\\\":case\\\"h\\\":return s*i;case\\\"minutes\\\":case\\\"minute\\\":case\\\"mins\\\":case\\\"min\\\":case\\\"m\\\":return s*r;case\\\"seconds\\\":case\\\"second\\\":case\\\"secs\\\":case\\\"sec\\\":case\\\"s\\\":return s*n;case\\\"milliseconds\\\":case\\\"millisecond\\\":case\\\"msecs\\\":case\\\"msec\\\":case\\\"ms\\\":return s;default:return}}(e);if(\\\"number\\\"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return s(e,t,o,\\\"day\\\");if(t>=i)return s(e,t,i,\\\"hour\\\");if(t>=r)return s(e,t,r,\\\"minute\\\");if(t>=n)return s(e,t,n,\\\"second\\\");return e+\\\" ms\\\"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+\\\"d\\\";if(t>=i)return Math.round(e/i)+\\\"h\\\";if(t>=r)return Math.round(e/r)+\\\"m\\\";if(t>=n)return Math.round(e/n)+\\\"s\\\";return e+\\\"ms\\\"}(e);throw new Error(\\\"val is not a non-empty string or a valid number. val=\\\"+JSON.stringify(e))}},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var s=\\\"object\\\"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,l=/[^\\\\x20-\\\\x7E]/,f=/[\\\\x2E\\\\u3002\\\\uFF0E\\\\uFF61]/g,h={overflow:\\\"Overflow: input needs wider integers to process\\\",\\\"not-basic\\\":\\\"Illegal input >= 0x80 (not a basic code point)\\\",\\\"invalid-input\\\":\\\"Invalid input\\\"},d=Math.floor,p=String.fromCharCode;function b(e){throw new RangeError(h[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function g(e,t){var n=e.split(\\\"@\\\"),r=\\\"\\\";return n.length>1&&(r=n[0]+\\\"@\\\",e=n[1]),r+m((e=e.replace(f,\\\".\\\")).split(\\\".\\\"),t).join(\\\".\\\")}function y(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function v(e){return m(e,(function(e){var t=\\\"\\\";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join(\\\"\\\")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;r+=36)e=d(e/35);return d(r+36*e/(e+38))}function k(e){var t,n,r,i,o,s,a,c,l,f,h,p=[],m=e.length,g=0,y=128,w=72;for((n=e.lastIndexOf(\\\"-\\\"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&b(\\\"not-basic\\\"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=g,s=1,a=36;i>=m&&b(\\\"invalid-input\\\"),((c=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>d((u-g)/s))&&b(\\\"overflow\\\"),g+=c*s,!(c<(l=a<=w?1:a>=w+26?26:a-w));a+=36)s>d(u/(f=36-l))&&b(\\\"overflow\\\"),s*=f;w=_(g-o,t=p.length+1,0==o),d(g/t)>u-y&&b(\\\"overflow\\\"),y+=d(g/t),g%=t,p.splice(g++,0,y)}return v(p)}function S(e){var t,n,r,i,o,s,a,c,l,f,h,m,g,v,k,S=[];for(m=(e=y(e)).length,t=128,n=0,o=72,s=0;s<m;++s)(h=e[s])<128&&S.push(p(h));for(r=i=S.length,i&&S.push(\\\"-\\\");r<m;){for(a=u,s=0;s<m;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>d((u-n)/(g=r+1))&&b(\\\"overflow\\\"),n+=(a-t)*g,t=a,s=0;s<m;++s)if((h=e[s])<t&&++n>u&&b(\\\"overflow\\\"),h==t){for(c=n,l=36;!(c<(f=l<=o?1:l>=o+26?26:l-o));l+=36)k=c-f,v=36-f,S.push(p(w(f+k%v,0))),c=d(k/v);S.push(p(w(c,0))),o=_(n,g,r==i),n=0,++r}++n,++t}return S.join(\\\"\\\")}a={version:\\\"1.4.1\\\",ucs2:{decode:y,encode:v},decode:k,encode:S,toASCII:function(e){return g(e,(function(e){return l.test(e)?\\\"xn--\\\"+S(e):e}))},toUnicode:function(e){return g(e,(function(e){return c.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(66)(e),n(11))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\\\"loaded\\\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\\\"id\\\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){\\\"use strict\\\";e.exports={isString:function(e){return\\\"string\\\"==typeof e},isObject:function(e){return\\\"object\\\"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){\\\"use strict\\\";t.decode=t.parse=n(69),t.encode=t.stringify=n(70)},function(e,t,n){\\\"use strict\\\";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||\\\"&\\\",n=n||\\\"=\\\";var s={};if(\\\"string\\\"!=typeof e||0===e.length)return s;var a=/\\\\+/g;e=e.split(t);var u=1e3;o&&\\\"number\\\"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,b=e[l].replace(a,\\\"%20\\\"),m=b.indexOf(n);m>=0?(f=b.substr(0,m),h=b.substr(m+1)):(f=b,h=\\\"\\\"),d=decodeURIComponent(f),p=decodeURIComponent(h),r(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(e){return\\\"[object Array]\\\"===Object.prototype.toString.call(e)}},function(e,t,n){\\\"use strict\\\";var r=function(e){switch(typeof e){case\\\"string\\\":return e;case\\\"boolean\\\":return e?\\\"true\\\":\\\"false\\\";case\\\"number\\\":return isFinite(e)?e:\\\"\\\";default:return\\\"\\\"}};e.exports=function(e,t,n,a){return t=t||\\\"&\\\",n=n||\\\"=\\\",null===e&&(e=void 0),\\\"object\\\"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):\\\"\\\"};var i=Array.isArray||function(e){return\\\"[object Array]\\\"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){\\\"use strict\\\";n.r(t);var r=n(27),i=n.n(r),o=n(28),s=n.n(o);n(29);const a={315:\\\"Artist\\\",258:\\\"BitsPerSample\\\",265:\\\"CellLength\\\",264:\\\"CellWidth\\\",320:\\\"ColorMap\\\",259:\\\"Compression\\\",33432:\\\"Copyright\\\",306:\\\"DateTime\\\",338:\\\"ExtraSamples\\\",266:\\\"FillOrder\\\",289:\\\"FreeByteCounts\\\",288:\\\"FreeOffsets\\\",291:\\\"GrayResponseCurve\\\",290:\\\"GrayResponseUnit\\\",316:\\\"HostComputer\\\",270:\\\"ImageDescription\\\",257:\\\"ImageLength\\\",256:\\\"ImageWidth\\\",271:\\\"Make\\\",281:\\\"MaxSampleValue\\\",280:\\\"MinSampleValue\\\",272:\\\"Model\\\",254:\\\"NewSubfileType\\\",274:\\\"Orientation\\\",262:\\\"PhotometricInterpretation\\\",284:\\\"PlanarConfiguration\\\",296:\\\"ResolutionUnit\\\",278:\\\"RowsPerStrip\\\",277:\\\"SamplesPerPixel\\\",305:\\\"Software\\\",279:\\\"StripByteCounts\\\",273:\\\"StripOffsets\\\",255:\\\"SubfileType\\\",263:\\\"Threshholding\\\",282:\\\"XResolution\\\",283:\\\"YResolution\\\",326:\\\"BadFaxLines\\\",327:\\\"CleanFaxData\\\",343:\\\"ClipPath\\\",328:\\\"ConsecutiveBadFaxLines\\\",433:\\\"Decode\\\",434:\\\"DefaultImageColor\\\",269:\\\"DocumentName\\\",336:\\\"DotRange\\\",321:\\\"HalftoneHints\\\",346:\\\"Indexed\\\",347:\\\"JPEGTables\\\",285:\\\"PageName\\\",297:\\\"PageNumber\\\",317:\\\"Predictor\\\",319:\\\"PrimaryChromaticities\\\",532:\\\"ReferenceBlackWhite\\\",339:\\\"SampleFormat\\\",340:\\\"SMinSampleValue\\\",341:\\\"SMaxSampleValue\\\",559:\\\"StripRowCounts\\\",330:\\\"SubIFDs\\\",292:\\\"T4Options\\\",293:\\\"T6Options\\\",325:\\\"TileByteCounts\\\",323:\\\"TileLength\\\",324:\\\"TileOffsets\\\",322:\\\"TileWidth\\\",301:\\\"TransferFunction\\\",318:\\\"WhitePoint\\\",344:\\\"XClipPathUnits\\\",286:\\\"XPosition\\\",529:\\\"YCbCrCoefficients\\\",531:\\\"YCbCrPositioning\\\",530:\\\"YCbCrSubSampling\\\",345:\\\"YClipPathUnits\\\",287:\\\"YPosition\\\",37378:\\\"ApertureValue\\\",40961:\\\"ColorSpace\\\",36868:\\\"DateTimeDigitized\\\",36867:\\\"DateTimeOriginal\\\",34665:\\\"Exif IFD\\\",36864:\\\"ExifVersion\\\",33434:\\\"ExposureTime\\\",41728:\\\"FileSource\\\",37385:\\\"Flash\\\",40960:\\\"FlashpixVersion\\\",33437:\\\"FNumber\\\",42016:\\\"ImageUniqueID\\\",37384:\\\"LightSource\\\",37500:\\\"MakerNote\\\",37377:\\\"ShutterSpeedValue\\\",37510:\\\"UserComment\\\",33723:\\\"IPTC\\\",34675:\\\"ICC Profile\\\",700:\\\"XMP\\\",42112:\\\"GDAL_METADATA\\\",42113:\\\"GDAL_NODATA\\\",34377:\\\"Photoshop\\\",33550:\\\"ModelPixelScale\\\",33922:\\\"ModelTiepoint\\\",34264:\\\"ModelTransformation\\\",34735:\\\"GeoKeyDirectory\\\",34736:\\\"GeoDoubleParams\\\",34737:\\\"GeoAsciiParams\\\"},u={};for(const e in a)a.hasOwnProperty(e)&&(u[a[e]]=parseInt(e,10));u.BitsPerSample,u.ExtraSamples,u.SampleFormat,u.StripByteCounts,u.StripOffsets,u.StripRowCounts,u.TileByteCounts,u.TileOffsets;const c={1:\\\"BYTE\\\",2:\\\"ASCII\\\",3:\\\"SHORT\\\",4:\\\"LONG\\\",5:\\\"RATIONAL\\\",6:\\\"SBYTE\\\",7:\\\"UNDEFINED\\\",8:\\\"SSHORT\\\",9:\\\"SLONG\\\",10:\\\"SRATIONAL\\\",11:\\\"FLOAT\\\",12:\\\"DOUBLE\\\",13:\\\"IFD\\\",16:\\\"LONG8\\\",17:\\\"SLONG8\\\",18:\\\"IFD8\\\"},l={};for(const e in c)c.hasOwnProperty(e)&&(l[c[e]]=parseInt(e,10));const f={1024:\\\"GTModelTypeGeoKey\\\",1025:\\\"GTRasterTypeGeoKey\\\",1026:\\\"GTCitationGeoKey\\\",2048:\\\"GeographicTypeGeoKey\\\",2049:\\\"GeogCitationGeoKey\\\",2050:\\\"GeogGeodeticDatumGeoKey\\\",2051:\\\"GeogPrimeMeridianGeoKey\\\",2052:\\\"GeogLinearUnitsGeoKey\\\",2053:\\\"GeogLinearUnitSizeGeoKey\\\",2054:\\\"GeogAngularUnitsGeoKey\\\",2055:\\\"GeogAngularUnitSizeGeoKey\\\",2056:\\\"GeogEllipsoidGeoKey\\\",2057:\\\"GeogSemiMajorAxisGeoKey\\\",2058:\\\"GeogSemiMinorAxisGeoKey\\\",2059:\\\"GeogInvFlatteningGeoKey\\\",2060:\\\"GeogAzimuthUnitsGeoKey\\\",2061:\\\"GeogPrimeMeridianLongGeoKey\\\",2062:\\\"GeogTOWGS84GeoKey\\\",3072:\\\"ProjectedCSTypeGeoKey\\\",3073:\\\"PCSCitationGeoKey\\\",3074:\\\"ProjectionGeoKey\\\",3075:\\\"ProjCoordTransGeoKey\\\",3076:\\\"ProjLinearUnitsGeoKey\\\",3077:\\\"ProjLinearUnitSizeGeoKey\\\",3078:\\\"ProjStdParallel1GeoKey\\\",3079:\\\"ProjStdParallel2GeoKey\\\",3080:\\\"ProjNatOriginLongGeoKey\\\",3081:\\\"ProjNatOriginLatGeoKey\\\",3082:\\\"ProjFalseEastingGeoKey\\\",3083:\\\"ProjFalseNorthingGeoKey\\\",3084:\\\"ProjFalseOriginLongGeoKey\\\",3085:\\\"ProjFalseOriginLatGeoKey\\\",3086:\\\"ProjFalseOriginEastingGeoKey\\\",3087:\\\"ProjFalseOriginNorthingGeoKey\\\",3088:\\\"ProjCenterLongGeoKey\\\",3089:\\\"ProjCenterLatGeoKey\\\",3090:\\\"ProjCenterEastingGeoKey\\\",3091:\\\"ProjCenterNorthingGeoKey\\\",3092:\\\"ProjScaleAtNatOriginGeoKey\\\",3093:\\\"ProjScaleAtCenterGeoKey\\\",3094:\\\"ProjAzimuthAngleGeoKey\\\",3095:\\\"ProjStraightVertPoleLongGeoKey\\\",3096:\\\"ProjRectifiedGridAngleGeoKey\\\",4096:\\\"VerticalCSTypeGeoKey\\\",4097:\\\"VerticalCitationGeoKey\\\",4098:\\\"VerticalDatumGeoKey\\\",4099:\\\"VerticalUnitsGeoKey\\\"},h={};for(const e in f)f.hasOwnProperty(e)&&(h[f[e]]=parseInt(e,10));function d(e,t){let n=e.length-t,r=0;do{for(let n=t;n>0;n--)e[r+t]+=e[r],r++;n-=t}while(n>0)}function p(e,t,n){let r=0,i=e.length;const o=i/n;for(;i>t;){for(let n=t;n>0;--n)e[r+t]+=e[r],++r;i-=t}const s=e.slice();for(let t=0;t<o;++t)for(let r=0;r<n;++r)e[n*t+r]=s[(n-r-1)*o+t]}class b{decode(e,t){const n=this.decodeBlock(t),r=e.Predictor||1;if(1!==r){const t=!e.StripOffsets;return function(e,t,n,r,i,o){if(!t||1===t)return e;for(let e=0;e<i.length;++e){if(i[e]%8!=0)throw new Error(\\\"When decoding with predictor, only multiple of 8 bits are supported.\\\");if(i[e]!==i[0])throw new Error(\\\"When decoding with predictor, all samples must have the same size.\\\")}const s=i[0]/8,a=2===o?1:i.length;for(let o=0;o<r&&!(o*a*n*s>=e.byteLength);++o){let r;if(2===t){switch(i[0]){case 8:r=new Uint8Array(e,o*a*n*s,a*n*s);break;case 16:r=new Uint16Array(e,o*a*n*s,a*n*s/2);break;case 32:r=new Uint32Array(e,o*a*n*s,a*n*s/4);break;default:throw new Error(`Predictor 2 not allowed with ${i[0]} bits per sample.`)}d(r,a)}else 3===t&&(r=new Uint8Array(e,o*a*n*s,a*n*s),p(r,a,s))}return e}(n,r,t?e.TileWidth:e.ImageWidth,t?e.TileLength:e.RowsPerStrip||e.ImageLength,e.BitsPerSample,e.PlanarConfiguration)}return n}}class m extends b{decodeBlock(e){return e}}function g(e,t){for(let n=t.length-1;n>=0;n--)e.push(t[n]);return e}function y(e){const t=new Uint16Array(4093),n=new Uint8Array(4093);for(let e=0;e<=257;e++)t[e]=4096,n[e]=e;let r=258,i=9,o=0;function s(){r=258,i=9}function a(e){const t=function(e,t,n){const r=t%8,i=Math.floor(t/8),o=8-r,s=t+n-8*(i+1);let a=8*(i+2)-(t+n);const u=8*(i+2)-t;if(a=Math.max(0,a),i>=e.length)return console.warn(\\\"ran off the end of the buffer before finding EOI_CODE (end on input code)\\\"),257;let c=e[i]&2**(8-r)-1;c<<=n-o;let l=c;if(i+1<e.length){let t=e[i+1]>>>a;t<<=Math.max(0,n-u),l+=t}if(s>8&&i+2<e.length){const r=8*(i+3)-(t+n);l+=e[i+2]>>>r}return l}(e,o,i);return o+=i,t}function u(e,i){return n[r]=i,t[r]=e,r++,r-1}function c(e){const r=[];for(let i=e;4096!==i;i=t[i])r.push(n[i]);return r}const l=[];s();const f=new Uint8Array(e);let h,d=a(f);for(;257!==d;){if(256===d){for(s(),d=a(f);256===d;)d=a(f);if(257===d)break;if(d>256)throw new Error(`corrupted code at scanline ${d}`);g(l,c(d)),h=d}else if(d<r){const e=c(d);g(l,e),u(h,e[e.length-1]),h=d}else{const e=c(h);if(!e)throw new Error(`Bogus entry. Not in dictionary, ${h} / ${r}, position: ${o}`);g(l,e),l.push(e[e.length-1]),u(h,e[e.length-1]),h=d}r+1>=2**i&&(12===i?h=void 0:i++),d=a(f)}return new Uint8Array(l)}class v extends b{decodeBlock(e){return y(e).buffer}}const w=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function _(e,t){let n=0;const r=[];let i=16;for(;i>0&&!e[i-1];)--i;r.push({children:[],index:0});let o,s=r[0];for(let a=0;a<i;a++){for(let i=0;i<e[a];i++){for(s=r.pop(),s.children[s.index]=t[n];s.index>0;)s=r.pop();for(s.index++,r.push(s);r.length<=a;)r.push(o={children:[],index:0}),s.children[s.index]=o.children,s=o;n++}a+1<i&&(r.push(o={children:[],index:0}),s.children[s.index]=o.children,s=o)}return r[0].children}function k(e,t,n,r,i,o,s,a,u){const{mcusPerLine:c,progressive:l}=n,f=t;let h=t,d=0,p=0;function b(){if(p>0)return p--,d>>p&1;if(d=e[h++],255===d){const t=e[h++];if(t)throw new Error(`unexpected marker: ${(d<<8|t).toString(16)}`)}return p=7,d>>>7}function m(e){let t,n=e;for(;null!==(t=b());){if(n=n[t],\\\"number\\\"==typeof n)return n;if(\\\"object\\\"!=typeof n)throw new Error(\\\"invalid huffman sequence\\\")}return null}function g(e){let t=e,n=0;for(;t>0;){const e=b();if(null===e)return;n=n<<1|e,--t}return n}function y(e){const t=g(e);return t>=1<<e-1?t:t+(-1<<e)+1}let v=0;let _,k=0;function S(e,t,n,r,i){const o=n%c,s=(n/c|0)*e.v+r,a=o*e.h+i;t(e,e.blocks[s][a])}function x(e,t,n){const r=n/e.blocksPerLine|0,i=n%e.blocksPerLine;t(e,e.blocks[r][i])}const C=r.length;let E,O,T,j,R,A;A=l?0===o?0===a?function(e,t){const n=m(e.huffmanTableDC),r=0===n?0:y(n)<<u;e.pred+=r,t[0]=e.pred}:function(e,t){t[0]|=b()<<u}:0===a?function(e,t){if(v>0)return void v--;let n=o;const r=s;for(;n<=r;){const r=m(e.huffmanTableAC),i=15&r,o=r>>4;if(0===i){if(o<15){v=g(o)+(1<<o)-1;break}n+=16}else{n+=o,t[w[n]]=y(i)*(1<<u),n++}}}:function(e,t){let n=o;const r=s;let i=0;for(;n<=r;){const r=w[n],o=t[r]<0?-1:1;switch(k){case 0:{const t=m(e.huffmanTableAC),n=15&t;if(i=t>>4,0===n)i<15?(v=g(i)+(1<<i),k=4):(i=16,k=1);else{if(1!==n)throw new Error(\\\"invalid ACn encoding\\\");_=y(n),k=i?2:3}continue}case 1:case 2:t[r]?t[r]+=(b()<<u)*o:(i--,0===i&&(k=2===k?3:0));break;case 3:t[r]?t[r]+=(b()<<u)*o:(t[r]=_<<u,k=0);break;case 4:t[r]&&(t[r]+=(b()<<u)*o)}n++}4===k&&(v--,0===v&&(k=0))}:function(e,t){const n=m(e.huffmanTableDC),r=0===n?0:y(n);e.pred+=r,t[0]=e.pred;let i=1;for(;i<64;){const n=m(e.huffmanTableAC),r=15&n,o=n>>4;if(0===r){if(o<15)break;i+=16}else{i+=o,t[w[i]]=y(r),i++}}};let P,L,M=0;L=1===C?r[0].blocksPerLine*r[0].blocksPerColumn:c*n.mcusPerColumn;const F=i||L;for(;M<L;){for(O=0;O<C;O++)r[O].pred=0;if(v=0,1===C)for(E=r[0],R=0;R<F;R++)x(E,A,M),M++;else for(R=0;R<F;R++){for(O=0;O<C;O++){E=r[O];const{h:e,v:t}=E;for(T=0;T<t;T++)for(j=0;j<e;j++)S(E,A,M,T,j)}if(M++,M===L)break}if(p=0,P=e[h]<<8|e[h+1],P<65280)throw new Error(\\\"marker was not found\\\");if(!(P>=65488&&P<=65495))break;h+=2}return h-f}function S(e,t){const n=[],{blocksPerLine:r,blocksPerColumn:i}=t,o=r<<3,s=new Int32Array(64),a=new Uint8Array(64);function u(e,n,r){const i=t.quantizationTable;let o,s,a,u,c,l,f,h,d;const p=r;let b;for(b=0;b<64;b++)p[b]=e[b]*i[b];for(b=0;b<8;++b){const e=8*b;0!==p[1+e]||0!==p[2+e]||0!==p[3+e]||0!==p[4+e]||0!==p[5+e]||0!==p[6+e]||0!==p[7+e]?(o=5793*p[0+e]+128>>8,s=5793*p[4+e]+128>>8,a=p[2+e],u=p[6+e],c=2896*(p[1+e]-p[7+e])+128>>8,h=2896*(p[1+e]+p[7+e])+128>>8,l=p[3+e]<<4,f=p[5+e]<<4,d=o-s+1>>1,o=o+s+1>>1,s=d,d=3784*a+1567*u+128>>8,a=1567*a-3784*u+128>>8,u=d,d=c-f+1>>1,c=c+f+1>>1,f=d,d=h+l+1>>1,l=h-l+1>>1,h=d,d=o-u+1>>1,o=o+u+1>>1,u=d,d=s-a+1>>1,s=s+a+1>>1,a=d,d=2276*c+3406*h+2048>>12,c=3406*c-2276*h+2048>>12,h=d,d=799*l+4017*f+2048>>12,l=4017*l-799*f+2048>>12,f=d,p[0+e]=o+h,p[7+e]=o-h,p[1+e]=s+f,p[6+e]=s-f,p[2+e]=a+l,p[5+e]=a-l,p[3+e]=u+c,p[4+e]=u-c):(d=5793*p[0+e]+512>>10,p[0+e]=d,p[1+e]=d,p[2+e]=d,p[3+e]=d,p[4+e]=d,p[5+e]=d,p[6+e]=d,p[7+e]=d)}for(b=0;b<8;++b){const e=b;0!==p[8+e]||0!==p[16+e]||0!==p[24+e]||0!==p[32+e]||0!==p[40+e]||0!==p[48+e]||0!==p[56+e]?(o=5793*p[0+e]+2048>>12,s=5793*p[32+e]+2048>>12,a=p[16+e],u=p[48+e],c=2896*(p[8+e]-p[56+e])+2048>>12,h=2896*(p[8+e]+p[56+e])+2048>>12,l=p[24+e],f=p[40+e],d=o-s+1>>1,o=o+s+1>>1,s=d,d=3784*a+1567*u+2048>>12,a=1567*a-3784*u+2048>>12,u=d,d=c-f+1>>1,c=c+f+1>>1,f=d,d=h+l+1>>1,l=h-l+1>>1,h=d,d=o-u+1>>1,o=o+u+1>>1,u=d,d=s-a+1>>1,s=s+a+1>>1,a=d,d=2276*c+3406*h+2048>>12,c=3406*c-2276*h+2048>>12,h=d,d=799*l+4017*f+2048>>12,l=4017*l-799*f+2048>>12,f=d,p[0+e]=o+h,p[56+e]=o-h,p[8+e]=s+f,p[48+e]=s-f,p[16+e]=a+l,p[40+e]=a-l,p[24+e]=u+c,p[32+e]=u-c):(d=5793*r[b+0]+8192>>14,p[0+e]=d,p[8+e]=d,p[16+e]=d,p[24+e]=d,p[32+e]=d,p[40+e]=d,p[48+e]=d,p[56+e]=d)}for(b=0;b<64;++b){const e=128+(p[b]+8>>4);n[b]=e<0?0:e>255?255:e}}for(let e=0;e<i;e++){const i=e<<3;for(let e=0;e<8;e++)n.push(new Uint8Array(o));for(let o=0;o<r;o++){u(t.blocks[e][o],a,s);let r=0;const c=o<<3;for(let e=0;e<8;e++){const t=n[i+e];for(let e=0;e<8;e++)t[c+e]=a[r++]}}}return n}class x{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(e){let t=0;function n(){const n=e[t]<<8|e[t+1];return t+=2,n}function r(){const r=n(),i=e.subarray(t,t+r-2);return t+=i.length,i}function i(e){let t,n,r=0,i=0;for(n in e.components)e.components.hasOwnProperty(n)&&(t=e.components[n],r<t.h&&(r=t.h),i<t.v&&(i=t.v));const o=Math.ceil(e.samplesPerLine/8/r),s=Math.ceil(e.scanLines/8/i);for(n in e.components)if(e.components.hasOwnProperty(n)){t=e.components[n];const a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/r),u=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),c=o*t.h,l=s*t.v,f=[];for(let e=0;e<l;e++){const e=[];for(let t=0;t<c;t++)e.push(new Int32Array(64));f.push(e)}t.blocksPerLine=a,t.blocksPerColumn=u,t.blocks=f}e.maxH=r,e.maxV=i,e.mcusPerLine=o,e.mcusPerColumn=s}let o=n();if(65496!==o)throw new Error(\\\"SOI not found\\\");for(o=n();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const e=r();65504===o&&74===e[0]&&70===e[1]&&73===e[2]&&70===e[3]&&0===e[4]&&(this.jfif={version:{major:e[5],minor:e[6]},densityUnits:e[7],xDensity:e[8]<<8|e[9],yDensity:e[10]<<8|e[11],thumbWidth:e[12],thumbHeight:e[13],thumbData:e.subarray(14,14+3*e[12]*e[13])}),65518===o&&65===e[0]&&100===e[1]&&111===e[2]&&98===e[3]&&101===e[4]&&0===e[5]&&(this.adobe={version:e[6],flags0:e[7]<<8|e[8],flags1:e[9]<<8|e[10],transformCode:e[11]});break}case 65499:{const r=n()+t-2;for(;t<r;){const r=e[t++],i=new Int32Array(64);if(r>>4==0)for(let n=0;n<64;n++){i[w[n]]=e[t++]}else{if(r>>4!=1)throw new Error(\\\"DQT: invalid table spec\\\");for(let e=0;e<64;e++){i[w[e]]=n()}}this.quantizationTables[15&r]=i}break}case 65472:case 65473:case 65474:{n();const r={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:n(),samplesPerLine:n(),components:{},componentsOrder:[]},s=e[t++];let a;for(let n=0;n<s;n++){a=e[t];const n=e[t+1]>>4,i=15&e[t+1],o=e[t+2];r.componentsOrder.push(a),r.components[a]={h:n,v:i,quantizationIdx:o},t+=3}i(r),this.frames.push(r);break}case 65476:{const r=n();for(let n=2;n<r;){const r=e[t++],i=new Uint8Array(16);let o=0;for(let n=0;n<16;n++,t++)i[n]=e[t],o+=i[n];const s=new Uint8Array(o);for(let n=0;n<o;n++,t++)s[n]=e[t];n+=17+o,r>>4==0?this.huffmanTablesDC[15&r]=_(i,s):this.huffmanTablesAC[15&r]=_(i,s)}break}case 65501:n(),this.resetInterval=n();break;case 65498:{n();const r=e[t++],i=[],o=this.frames[0];for(let n=0;n<r;n++){const n=o.components[e[t++]],r=e[t++];n.huffmanTableDC=this.huffmanTablesDC[r>>4],n.huffmanTableAC=this.huffmanTablesAC[15&r],i.push(n)}const s=e[t++],a=e[t++],u=e[t++],c=k(e,t,o,i,this.resetInterval,s,a,u>>4,15&u);t+=c;break}case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error(`unknown JPEG marker ${o.toString(16)}`)}o=n()}}getResult(){const{frames:e}=this;if(0===this.frames.length)throw new Error(\\\"no frames were decoded\\\");this.frames.length>1&&console.warn(\\\"more than one frame is not supported\\\");for(let e=0;e<this.frames.length;e++){const t=this.frames[e].components;for(const e of Object.keys(t))t[e].quantizationTable=this.quantizationTables[t[e].quantizationIdx],delete t[e].quantizationIdx}const t=e[0],{components:n,componentsOrder:r}=t,i=[],o=t.samplesPerLine,s=t.scanLines;for(let e=0;e<r.length;e++){const o=n[r[e]];i.push({lines:S(0,o),scaleX:o.h/t.maxH,scaleY:o.v/t.maxV})}const a=new Uint8Array(o*s*i.length);let u=0;for(let e=0;e<s;++e)for(let t=0;t<o;++t)for(let n=0;n<i.length;++n){const r=i[n];a[u]=r.lines[0|e*r.scaleY][0|t*r.scaleX],++u}return a}}class C extends b{constructor(e){super(),this.reader=new x,e.JPEGTables&&this.reader.parse(e.JPEGTables)}decodeBlock(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}var E=n(30);class O extends b{decodeBlock(e){return Object(E.inflate)(new Uint8Array(e)).buffer}}class T extends b{decodeBlock(e){const t=new DataView(e),n=[];for(let r=0;r<e.byteLength;++r){let e=t.getInt8(r);if(e<0){const i=t.getUint8(r+1);e=-e;for(let t=0;t<=e;++t)n.push(i);r+=1}else{for(let i=0;i<=e;++i)n.push(t.getUint8(r+i+1));r+=e+1}}return new Uint8Array(n).buffer}}function j(e){switch(e.Compression){case void 0:case 1:return new m;case 5:return new v;case 6:throw new Error(\\\"old style JPEG compression is not supported.\\\");case 7:return new C(e);case 8:case 32946:return new O;case 32773:return new T;default:throw new Error(`Unknown compression method identifier: ${e.Compression}`)}}let R;function A(){return R||(R=function(){try{throw new Error}catch(e){const t=(\\\"\\\"+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\\\/\\\\/[^)\\\\n]+/g);if(t)return(\\\"\\\"+t[0]).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\\\/\\\\/.+)?\\\\/[^/]+(?:\\\\?.*)?$/,\\\"$1\\\")+\\\"/\\\"}return\\\"/\\\"}()),R}const P=\\\"undefined\\\"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,L=e=>/^(file|https?:)?\\\\/\\\\//i.test(e);function M(e){const t=new Blob([e],{type:\\\"application/javascript\\\"});return URL.createObjectURL(t)}\\\"undefined\\\"==typeof Worker||Worker;var F,N=n(3),D=n.n(N),I=n(31),U=n(73),B=n(8);function G(e){return Promise.all(e.map(e=>{const t=e=>({status:\\\"fulfilled\\\",value:e}),n=e=>({status:\\\"rejected\\\",reason:e}),r=Promise.resolve(e);try{return r.then(t,n)}catch(e){return Promise.reject(e)}}))}!function(e){e.initialized=\\\"initialized\\\",e.taskCanceled=\\\"taskCanceled\\\",e.taskCompleted=\\\"taskCompleted\\\",e.taskFailed=\\\"taskFailed\\\",e.taskQueued=\\\"taskQueued\\\",e.taskQueueDrained=\\\"taskQueueDrained\\\",e.taskStart=\\\"taskStart\\\",e.terminated=\\\"terminated\\\"}(F||(F={}));var z=n(1);function q(e){throw Error(e)}const K={errors:e=>e[z.a]||q(\\\"Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\\\"),events:e=>e[z.b]||q(\\\"Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\\\"),terminate:e=>e[z.c]()};var W=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};let H=1;class Z{constructor(e,t){this.eventSubject=new I.a,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const n=\\\"number\\\"==typeof t?{size:t}:t||{},{size:r=P}=n;var i;this.debug=D()(`threads:pool:${i=n.name||String(H++),i.replace(/\\\\W/g,\\\" \\\").trim().replace(/\\\\s+/g,\\\"-\\\")}`),this.options=n,this.workers=function(e,t){return function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}(t).map(()=>({init:e(),runningTasks:[]}))}(e,r),this.eventObservable=Object(U.a)(B.a.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:F.initialized,size:this.workers.length}),e=>{this.debug(\\\"Error while initializing pool worker:\\\",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){const{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return W(this,void 0,void 0,(function*(){const n=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${n}...`),this.eventSubject.next({type:F.taskStart,taskID:t.id,workerID:n});try{const r=yield t.run(yield e.init);this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:F.taskCompleted,returnValue:r,taskID:t.id,workerID:n})}catch(e){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:F.taskFailed,taskID:t.id,error:e,workerID:n})}}))}run(e,t){return W(this,void 0,void 0,(function*(){const n=(()=>W(this,void 0,void 0,(function*(){var r;yield(r=0,new Promise(e=>setTimeout(e,r)));try{yield this.runPoolTask(e,t)}finally{e.runningTasks=e.runningTasks.filter(e=>e!==n),this.isClosing||this.scheduleWork()}})))();e.runningTasks.push(n)}))}scheduleWork(){this.debug(\\\"Attempt de-queueing a task in order to run it...\\\");const e=this.findIdlingWorker();if(!e)return;const t=this.taskQueue.shift();if(!t)return this.debug(\\\"Task queue is empty\\\"),void this.eventSubject.next({type:F.taskQueueDrained});this.run(e,t)}taskCompletion(e){return new Promise((t,n)=>{const r=this.events().subscribe(i=>{i.type===F.taskCompleted&&i.taskID===e?(r.unsubscribe(),t(i.returnValue)):i.type===F.taskFailed&&i.taskID===e?(r.unsubscribe(),n(i.error)):i.type===F.terminated&&(r.unsubscribe(),n(Error(\\\"Pool has been terminated before task was run.\\\")))})})}settled(e=!1){return W(this,void 0,void 0,(function*(){const t=()=>{return e=this.workers,t=e=>e.runningTasks,e.reduce((e,n)=>[...e,...t(n)],[]);var e,t},n=[],r=this.eventObservable.subscribe(e=>{e.type===F.taskFailed&&n.push(e.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):e&&0===this.taskQueue.length?(yield G(t()),n):(yield new Promise((e,t)=>{const n=this.eventObservable.subscribe({next(t){t.type===F.taskQueueDrained&&(n.unsubscribe(),e())},error:t})}),yield G(t()),r.unsubscribe(),n)}))}completed(e=!1){return W(this,void 0,void 0,(function*(){const t=this.settled(e),n=new Promise((e,n)=>{const r=this.eventObservable.subscribe({next(i){i.type===F.taskQueueDrained?(r.unsubscribe(),e(t)):i.type===F.taskFailed&&(r.unsubscribe(),n(i.error))},error:n})}),r=yield Promise.race([t,n]);if(r.length>0)throw r[0]}))}events(){return this.eventObservable}queue(e){const{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error(\\\"Cannot schedule pool tasks after terminate() has been called.\\\");if(this.initErrors.length>0)throw this.initErrors[0];const n=()=>this.taskCompletion(i.id);let r;const i={id:this.nextTaskID++,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(e=>e!==i),this.eventSubject.next({type:F.taskCanceled,taskID:i.id}))},get then(){if(!r){const e=n();r=e.then.bind(e)}return r}};if(this.taskQueue.length>=t)throw Error(\\\"Maximum number of pool tasks queued. Refusing to queue another one.\\\\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.\\\");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:F.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(e){return W(this,void 0,void 0,(function*(){this.isClosing=!0,e||(yield this.completed(!0)),this.eventSubject.next({type:F.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>W(this,void 0,void 0,(function*(){return K.terminate(yield e.init)}))))}))}}function V(e,t){return new Z(e,t)}Z.EventType=F,V.EventType=F;n(26);\\\"undefined\\\"!=typeof navigator&&navigator.hardwareConcurrency;n(0),n(34),n(15);function $(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function Y(e){const t={};for(const n in e)if(e.hasOwnProperty(n)){t[e[n]]=n}return t}function Q(e,t){const n=[];for(let r=0;r<e;r++)n.push(t(r));return n}const J=Y(a),X=Y(f),ee={};$(ee,J),$(ee,X);Y(c);const te={nextZero:(e,t)=>{let n=t;for(;0!==e[n];)n++;return n},readUshort:(e,t)=>e[t]<<8|e[t+1],readShort:(e,t)=>{const n=te.ui8;return n[0]=e[t+1],n[1]=e[t+0],te.i16[0]},readInt:(e,t)=>{const n=te.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],te.i32[0]},readUint:(e,t)=>{const n=te.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],te.ui32[0]},readASCII:(e,t,n)=>n.map(n=>String.fromCharCode(e[t+n])).join(\\\"\\\"),readFloat:(e,t)=>{const n=te.ui8;return Q(4,r=>{n[r]=e[t+3-r]}),te.fl32[0]},readDouble:(e,t)=>{const n=te.ui8;return Q(8,r=>{n[r]=e[t+7-r]}),te.fl64[0]},writeUshort:(e,t,n)=>{e[t]=n>>8&255,e[t+1]=255&n},writeUint:(e,t,n)=>{e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=n>>0&255},writeASCII:(e,t,n)=>{Q(n.length,r=>{e[t+r]=n.charCodeAt(r)})},ui8:new Uint8Array(8)};te.fl64=new Float64Array(te.ui8.buffer),te.writeDouble=(e,t,n)=>{te.fl64[0]=n,Q(8,n=>{e[t+n]=te.ui8[7-n]})};Error;function ne(e,t,n){var r=function(e){return j(e)}(t).decode(t,n);e.postMessage([r],[r])}\\\"undefined\\\"!=typeof self&&self.addEventListener(\\\"message\\\",(function(e){var t=s()(e.data),n=t[0],r=t.slice(1);switch(n){case\\\"decode\\\":ne.apply(void 0,[self].concat(i()(r)))}}))},,function(e,t,n){\\\"use strict\\\";var r=n(8),i=n(31);var o=function(e){\\\"function\\\"==typeof e?e():e&&\\\"function\\\"==typeof e.unsubscribe&&e.unsubscribe()};t.a=function(e){const t=new i.a;let n,s=0;return new r.a(r=>{n||(n=e.subscribe(t));const i=t.subscribe(r);return s++,()=>{s--,i.unsubscribe(),0===s&&(o(n),n=void 0)}})}}]);\\n//# sourceMappingURL=cbf2dc001846ff1ba8e4.decoder.worker.js.map\", null);\n};","module.exports = require(\"@babel/runtime/helpers/typeof\");","module.exports = require(\"fast-xml-parser\");","'use strict';\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};","import GL from '@luma.gl/constants';\n\nexport const MAX_COLOR_INTENSITY = 255;\n\nexport const DEFAULT_COLOR_OFF = [0, 0, 0];\n\nexport const MAX_SLIDERS_AND_CHANNELS = 6;\n\nexport const DTYPE_VALUES = {\n  '<u1': {\n    format: GL.R8UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_BYTE,\n    max: 2 ** 8 - 1,\n    TypedArray: Uint8Array\n  },\n  '<u2': {\n    format: GL.R16UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_SHORT,\n    max: 2 ** 16 - 1,\n    TypedArray: Uint16Array\n  },\n  '<u4': {\n    format: GL.R32UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_INT,\n    max: 2 ** 32 - 1,\n    TypedArray: Uint32Array\n  },\n  '<f4': {\n    format: GL.R32F,\n    dataFormat: GL.RED,\n    type: GL.FLOAT,\n    max: 2 ** 31 - 1,\n    TypedArray: Float32Array\n  }\n};\n","import {\n  MAX_COLOR_INTENSITY,\n  DEFAULT_COLOR_OFF,\n  MAX_SLIDERS_AND_CHANNELS,\n  DTYPE_VALUES\n} from '../constants';\n\nexport function range(len) {\n  return [...Array(len).keys()];\n}\n\nexport function padWithDefault(arr, defaultValue, padWidth) {\n  for (let i = 0; i < padWidth; i += 1) {\n    arr.push(defaultValue);\n  }\n  return arr;\n}\n\nexport function padColorsAndSliders({\n  sliderValues,\n  colorValues,\n  channelIsOn,\n  domain,\n  dtype\n}) {\n  const lengths = [sliderValues.length, colorValues.length];\n  if (lengths.every(l => l !== lengths[0])) {\n    throw Error('Inconsistent number of slider values and colors provided');\n  }\n\n  const colors = colorValues.map((color, i) =>\n    channelIsOn[i] ? color.map(c => c / MAX_COLOR_INTENSITY) : DEFAULT_COLOR_OFF\n  );\n  const maxSliderValue = (domain && domain[1]) || DTYPE_VALUES[dtype].max;\n  const sliders = sliderValues.map((slider, i) =>\n    channelIsOn[i] ? slider : [maxSliderValue, maxSliderValue]\n  );\n  // Need to pad sliders and colors with default values (required by shader)\n  const padSize = MAX_SLIDERS_AND_CHANNELS - colors.length;\n  if (padSize < 0) {\n    throw Error(`${lengths} channels passed in, but only 6 are allowed.`);\n  }\n\n  const paddedColorValues = padWithDefault(colors, DEFAULT_COLOR_OFF, padSize);\n  const paddedSliderValues = padWithDefault(\n    sliders,\n    [maxSliderValue, maxSliderValue],\n    padSize\n  );\n  const paddedColorsAndSliders = {\n    paddedSliderValues: paddedSliderValues.reduce(\n      (acc, val) => acc.concat(val),\n      []\n    ), // flatten for use on shaders\n    paddedColorValues: paddedColorValues.reduce(\n      (acc, val) => acc.concat(val),\n      []\n    )\n  };\n\n  return paddedColorsAndSliders;\n}\n","/* eslint-disable prefer-destructuring */\n// A lot of this codes inherits paradigms form DeckGL that\n// we live in place for now, hence some of the not-destructuring\nimport GL from '@luma.gl/constants';\nimport { COORDINATE_SYSTEM, Layer, project32, picking } from '@deck.gl/core';\nimport { Model, Geometry, Texture2D } from '@luma.gl/core';\nimport vs from './xr-layer-vertex.glsl';\nimport fsColormap from './xr-layer-fragment-colormap.glsl';\nimport fs from './xr-layer-fragment.glsl';\nimport { DTYPE_VALUES } from '../../constants';\nimport { padColorsAndSliders } from '../utils';\n\nconst defaultProps = {\n  pickable: true,\n  coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n  channelData: { type: 'array', value: {}, async: true },\n  bounds: { type: 'array', value: [0, 0, 1, 1], compare: true },\n  colorValues: { type: 'array', value: [], compare: true },\n  sliderValues: { type: 'array', value: [], compare: true },\n  channelIsOn: { type: 'array', value: [], compare: true },\n  opacity: { type: 'number', value: 1, compare: true },\n  dtype: { type: 'string', value: '<u2', compare: true },\n  colormap: { type: 'string', value: '', compare: true }\n};\n\n/**\n * This layer serves as the workhorse of the project, handling all the rendering.  Much of it is\n * adapted from BitmapLayer in DeckGL.\n * XR = eXtended Range i.e more than the standard 8-bit RGBA data format\n * (16/32 bit floats/ints/uints with more than 3/4 channels).\n */\nexport default class XRLayer extends Layer {\n  /**\n   * This function chooses a shader (colormapping or not) and\n   * replaces `usampler` with `sampler` if the data is not an unsigned integer\n   */\n  getShaders() {\n    const { colormap, dtype } = this.props;\n    const fragmentShaderColormap = colormap\n      ? fsColormap.replace('colormapFunction', colormap)\n      : fs;\n    const fragmentShaderDtype =\n      dtype === '<f4'\n        ? fragmentShaderColormap.replace(/usampler/g, 'sampler')\n        : fragmentShaderColormap;\n    return super.getShaders({\n      vs,\n      fs: fragmentShaderDtype,\n      modules: [project32, picking]\n    });\n  }\n\n  /**\n   * This function initializes the internal state.\n   */\n  initializeState() {\n    const attributeManager = this.getAttributeManager();\n    attributeManager.add({\n      positions: {\n        size: 3,\n        type: GL.DOUBLE,\n        fp64: this.use64bitPositions(),\n        update: this.calculatePositions,\n        noAlloc: true\n      }\n    });\n    this.setState({\n      numInstances: 1,\n      positions: new Float64Array(12)\n    });\n  }\n\n  /**\n   * This function finalizes state by clearing all textures from the WebGL context\n   */\n  finalizeState() {\n    super.finalizeState();\n\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach(tex => tex && tex.delete());\n    }\n  }\n\n  /**\n   * This function updates state by retriggering model creation (shader compilation and attribute binding)\n   * and loading any textures that need be loading.\n   */\n  updateState({ props, oldProps, changeFlags }) {\n    // setup model first\n    if (changeFlags.extensionsChanged || props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      this.setState({ model: this._getModel(gl) });\n\n      this.getAttributeManager().invalidateAll();\n    }\n    if (props.channelData !== oldProps.channelData) {\n      this.loadTexture(props.channelData);\n    }\n    const attributeManager = this.getAttributeManager();\n    if (props.bounds !== oldProps.bounds) {\n      attributeManager.invalidate('positions');\n    }\n  }\n\n  /**\n   * This function creates the luma.gl model.\n   */\n  _getModel(gl) {\n    if (!gl) {\n      return null;\n    }\n\n    /*\n       0,0 --- 1,0\n        |       |\n       0,1 --- 1,1\n     */\n    return new Model(gl, {\n      ...this.getShaders(),\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: GL.TRIANGLE_FAN,\n        vertexCount: 4,\n        attributes: {\n          texCoords: new Float32Array([0, 1, 0, 0, 1, 0, 1, 1])\n        }\n      }),\n      isInstanced: false\n    });\n  }\n\n  /**\n   * This function generates view positions for use as a vec3 in the shader\n   */\n  calculatePositions(attributes) {\n    const { positions } = this.state;\n    const { bounds } = this.props;\n    // bounds as [minX, minY, maxX, maxY]\n    /*\n      (minX0, maxY3) ---- (maxX2, maxY3)\n             |                  |\n             |                  |\n             |                  |\n      (minX0, minY1) ---- (maxX2, minY1)\n   */\n    positions[0] = bounds[0];\n    positions[1] = bounds[1];\n    positions[2] = 0;\n\n    positions[3] = bounds[0];\n    positions[4] = bounds[3];\n    positions[5] = 0;\n\n    positions[6] = bounds[2];\n    positions[7] = bounds[3];\n    positions[8] = 0;\n\n    positions[9] = bounds[2];\n    positions[10] = bounds[1];\n    positions[11] = 0;\n\n    // eslint-disable-next-line  no-param-reassign\n    attributes.value = positions;\n  }\n\n  /**\n   * This function runs the shaders and draws to the canvas\n   */\n  draw({ uniforms }) {\n    const { textures, model } = this.state;\n    if (textures && model) {\n      const {\n        sliderValues,\n        colorValues,\n        opacity,\n        domain,\n        dtype,\n        channelIsOn\n      } = this.props;\n      // Check number of textures not null.\n      const numTextures = Object.values(textures).filter(t => t).length;\n      // Slider values and color values can come in before textures since their data is async.\n      // Thus we pad based on the number of textures bound.\n      const { paddedSliderValues, paddedColorValues } = padColorsAndSliders({\n        sliderValues: sliderValues.slice(0, numTextures),\n        colorValues: colorValues.slice(0, numTextures),\n        channelIsOn: channelIsOn.slice(0, numTextures),\n        domain,\n        dtype\n      });\n      model\n        .setUniforms({\n          ...uniforms,\n          colorValues: paddedColorValues,\n          sliderValues: paddedSliderValues,\n          opacity,\n          ...textures\n        })\n        .draw();\n    }\n  }\n\n  /**\n   * This function loads all textures from incoming resolved promises/data from the loaders by calling `dataToTexture`\n   */\n  loadTexture(channelData) {\n    const textures = {\n      channel0: null,\n      channel1: null,\n      channel2: null,\n      channel3: null,\n      channel4: null,\n      channel5: null\n    };\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach(tex => tex && tex.delete());\n    }\n    if (\n      channelData &&\n      Object.keys(channelData).length > 0 &&\n      channelData.data\n    ) {\n      channelData.data.forEach((d, i) => {\n        textures[`channel${i}`] = this.dataToTexture(\n          d,\n          channelData.width,\n          channelData.height\n        );\n      }, this);\n      this.setState({ textures });\n    }\n  }\n\n  /**\n   * This function creates textures from the data\n   */\n  dataToTexture(data, width, height) {\n    const { dtype } = this.props;\n    const { format, dataFormat, type } = DTYPE_VALUES[dtype];\n    const texture = new Texture2D(this.context.gl, {\n      width,\n      height,\n      data,\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE\n      },\n      format,\n      dataFormat,\n      type\n    });\n    return texture;\n  }\n}\n\nXRLayer.layerName = 'XRLayer';\nXRLayer.defaultProps = defaultProps;\n","export default \"#version 300 es\\n#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;\\nprecision highp int;\\nprecision highp usampler2D;\\n#define GLSLIFY 1\\n\\nvec4 jet (float x_17) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\\n  const float e2 = 0.375;\\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\\n  const float e3 = 0.625;\\n  const vec4 v3 = vec4(1,1,0,1);\\n  const float e4 = 0.875;\\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_17);\\n  float a1 = smoothstep(e1,e2,x_17);\\n  float a2 = smoothstep(e2,e3,x_17);\\n  float a3 = smoothstep(e3,e4,x_17);\\n  float a4 = smoothstep(e4,e5,x_17);\\n  return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)\\n  ))));\\n}\\n\\nvec4 hsv (float x_16) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 0.169;\\n  const vec4 v1 = vec4(0.9921568627450981,1,0.00784313725490196,1);\\n  const float e2 = 0.173;\\n  const vec4 v2 = vec4(0.9686274509803922,1,0.00784313725490196,1);\\n  const float e3 = 0.337;\\n  const vec4 v3 = vec4(0,0.9882352941176471,0.01568627450980392,1);\\n  const float e4 = 0.341;\\n  const vec4 v4 = vec4(0,0.9882352941176471,0.0392156862745098,1);\\n  const float e5 = 0.506;\\n  const vec4 v5 = vec4(0.00392156862745098,0.9764705882352941,1,1);\\n  const float e6 = 0.671;\\n  const vec4 v6 = vec4(0.00784313725490196,0,0.9921568627450981,1);\\n  const float e7 = 0.675;\\n  const vec4 v7 = vec4(0.03137254901960784,0,0.9921568627450981,1);\\n  const float e8 = 0.839;\\n  const vec4 v8 = vec4(1,0,0.984313725490196,1);\\n  const float e9 = 0.843;\\n  const vec4 v9 = vec4(1,0,0.9607843137254902,1);\\n  const float e10 = 1.0;\\n  const vec4 v10 = vec4(1,0,0.023529411764705882,1);\\n  float a0 = smoothstep(e0,e1,x_16);\\n  float a1 = smoothstep(e1,e2,x_16);\\n  float a2 = smoothstep(e2,e3,x_16);\\n  float a3 = smoothstep(e3,e4,x_16);\\n  float a4 = smoothstep(e4,e5,x_16);\\n  float a5 = smoothstep(e5,e6,x_16);\\n  float a6 = smoothstep(e6,e7,x_16);\\n  float a7 = smoothstep(e7,e8,x_16);\\n  float a8 = smoothstep(e8,e9,x_16);\\n  float a9 = smoothstep(e9,e10,x_16);\\n  return max(mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_16)*step(x_16,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_16)*step(x_16,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_16)*step(x_16,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_16)*step(x_16,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_16)*step(x_16,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_16)*step(x_16,e7),\\n    max(mix(v7,v8,a7)*step(e7,x_16)*step(x_16,e8),\\n    max(mix(v8,v9,a8)*step(e8,x_16)*step(x_16,e9),mix(v9,v10,a9)*step(e9,x_16)*step(x_16,e10)\\n  )))))))));\\n}\\n\\nvec4 hot (float x_13) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.3;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.6;\\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_13);\\n  float a1 = smoothstep(e1,e2,x_13);\\n  float a2 = smoothstep(e2,e3,x_13);\\n  return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)\\n  ));\\n}\\n\\nvec4 cool (float x_18) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_18);\\n  float a1 = smoothstep(e1,e2,x_18);\\n  float a2 = smoothstep(e2,e3,x_18);\\n  float a3 = smoothstep(e3,e4,x_18);\\n  float a4 = smoothstep(e4,e5,x_18);\\n  float a5 = smoothstep(e5,e6,x_18);\\n  float a6 = smoothstep(e6,e7,x_18);\\n  float a7 = smoothstep(e7,e8,x_18);\\n  return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8)\\n  )))))));\\n}\\n\\nvec4 spring (float x_24) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_24);\\n  return mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1);\\n}\\n\\nvec4 summer (float x_5) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0.4,1);\\n  float a0 = smoothstep(e0,e1,x_5);\\n  return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);\\n}\\n\\nvec4 autumn (float x_25) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_25);\\n  return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);\\n}\\n\\nvec4 winter (float x_12) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_12);\\n  return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);\\n}\\n\\nvec4 bone (float x_10) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.376;\\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\\n  const float e2 = 0.753;\\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_10);\\n  float a1 = smoothstep(e1,e2,x_10);\\n  float a2 = smoothstep(e2,e3,x_10);\\n  return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2),mix(v2,v3,a2)*step(e2,x_10)*step(x_10,e3)\\n  ));\\n}\\n\\nvec4 copper (float x_15) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.804;\\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\\n  const float e2 = 1.0;\\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_15);\\n  float a1 = smoothstep(e1,e2,x_15);\\n  return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2)\\n  );\\n}\\n\\nvec4 greys (float x_4) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_4);\\n  return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);\\n}\\n\\nvec4 yignbu (float x_32) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);\\n  const float e3 = 0.375;\\n  const vec4 v3 = vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);\\n  const float e5 = 0.625;\\n  const vec4 v5 = vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);\\n  const float e7 = 0.875;\\n  const vec4 v7 = vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(1,1,0.8509803921568627,1);\\n  float a0 = smoothstep(e0,e1,x_32);\\n  float a1 = smoothstep(e1,e2,x_32);\\n  float a2 = smoothstep(e2,e3,x_32);\\n  float a3 = smoothstep(e3,e4,x_32);\\n  float a4 = smoothstep(e4,e5,x_32);\\n  float a5 = smoothstep(e5,e6,x_32);\\n  float a6 = smoothstep(e6,e7,x_32);\\n  float a7 = smoothstep(e7,e8,x_32);\\n  return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8)\\n  )))))));\\n}\\n\\nvec4 greens (float x_41) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.26666666666666666,0.10588235294117647,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.42745098039215684,0.17254901960784313,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);\\n  const float e3 = 0.375;\\n  const vec4 v3 = vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);\\n  const float e5 = 0.625;\\n  const vec4 v5 = vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);\\n  const float e7 = 0.875;\\n  const vec4 v7 = vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);\\n  float a0 = smoothstep(e0,e1,x_41);\\n  float a1 = smoothstep(e1,e2,x_41);\\n  float a2 = smoothstep(e2,e3,x_41);\\n  float a3 = smoothstep(e3,e4,x_41);\\n  float a4 = smoothstep(e4,e5,x_41);\\n  float a5 = smoothstep(e5,e6,x_41);\\n  float a6 = smoothstep(e6,e7,x_41);\\n  float a7 = smoothstep(e7,e8,x_41);\\n  return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8)\\n  )))))));\\n}\\n\\nvec4 yiorrd (float x_23) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.5019607843137255,0,0.14901960784313725,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0.7411764705882353,0,0.14901960784313725,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);\\n  const float e3 = 0.375;\\n  const vec4 v3 = vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);\\n  const float e5 = 0.625;\\n  const vec4 v5 = vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);\\n  const float e7 = 0.875;\\n  const vec4 v7 = vec4(1,0.9294117647058824,0.6274509803921569,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(1,1,0.8,1);\\n  float a0 = smoothstep(e0,e1,x_23);\\n  float a1 = smoothstep(e1,e2,x_23);\\n  float a2 = smoothstep(e2,e3,x_23);\\n  float a3 = smoothstep(e3,e4,x_23);\\n  float a4 = smoothstep(e4,e5,x_23);\\n  float a5 = smoothstep(e5,e6,x_23);\\n  float a6 = smoothstep(e6,e7,x_23);\\n  float a7 = smoothstep(e7,e8,x_23);\\n  return max(mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_23)*step(x_23,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_23)*step(x_23,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_23)*step(x_23,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_23)*step(x_23,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_23)*step(x_23,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_23)*step(x_23,e7),mix(v7,v8,a7)*step(e7,x_23)*step(x_23,e8)\\n  )))))));\\n}\\n\\nvec4 bluered (float x_34) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_34);\\n  return mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1);\\n}\\n\\nvec4 rdbu (float x_1) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);\\n  const float e1 = 0.35;\\n  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);\\n  const float e2 = 0.5;\\n  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);\\n  const float e3 = 0.6;\\n  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);\\n  const float e4 = 0.7;\\n  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_1);\\n  float a1 = smoothstep(e1,e2,x_1);\\n  float a2 = smoothstep(e2,e3,x_1);\\n  float a3 = smoothstep(e3,e4,x_1);\\n  float a4 = smoothstep(e4,e5,x_1);\\n  return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)\\n  ))));\\n}\\n\\nvec4 picnic (float x_42) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 0.1;\\n  const vec4 v1 = vec4(0.2,0.6,1,1);\\n  const float e2 = 0.2;\\n  const vec4 v2 = vec4(0.4,0.8,1,1);\\n  const float e3 = 0.3;\\n  const vec4 v3 = vec4(0.6,0.8,1,1);\\n  const float e4 = 0.4;\\n  const vec4 v4 = vec4(0.8,0.8,1,1);\\n  const float e5 = 0.5;\\n  const vec4 v5 = vec4(1,1,1,1);\\n  const float e6 = 0.6;\\n  const vec4 v6 = vec4(1,0.8,1,1);\\n  const float e7 = 0.7;\\n  const vec4 v7 = vec4(1,0.6,1,1);\\n  const float e8 = 0.8;\\n  const vec4 v8 = vec4(1,0.4,0.8,1);\\n  const float e9 = 0.9;\\n  const vec4 v9 = vec4(1,0.4,0.4,1);\\n  const float e10 = 1.0;\\n  const vec4 v10 = vec4(1,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_42);\\n  float a1 = smoothstep(e1,e2,x_42);\\n  float a2 = smoothstep(e2,e3,x_42);\\n  float a3 = smoothstep(e3,e4,x_42);\\n  float a4 = smoothstep(e4,e5,x_42);\\n  float a5 = smoothstep(e5,e6,x_42);\\n  float a6 = smoothstep(e6,e7,x_42);\\n  float a7 = smoothstep(e7,e8,x_42);\\n  float a8 = smoothstep(e8,e9,x_42);\\n  float a9 = smoothstep(e9,e10,x_42);\\n  return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),\\n    max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),\\n    max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10)\\n  )))))))));\\n}\\n\\nvec4 rainbow (float x_31) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.5882352941176471,0,0.35294117647058826,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0,0.7843137254901961,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0,0.09803921568627451,1,1);\\n  const float e3 = 0.375;\\n  const vec4 v3 = vec4(0,0.596078431372549,1,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.17254901960784313,1,0.5882352941176471,1);\\n  const float e5 = 0.625;\\n  const vec4 v5 = vec4(0.592156862745098,1,0,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(1,0.9176470588235294,0,1);\\n  const float e7 = 0.875;\\n  const vec4 v7 = vec4(1,0.43529411764705883,0,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(1,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_31);\\n  float a1 = smoothstep(e1,e2,x_31);\\n  float a2 = smoothstep(e2,e3,x_31);\\n  float a3 = smoothstep(e3,e4,x_31);\\n  float a4 = smoothstep(e4,e5,x_31);\\n  float a5 = smoothstep(e5,e6,x_31);\\n  float a6 = smoothstep(e6,e7,x_31);\\n  float a7 = smoothstep(e7,e8,x_31);\\n  return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8)\\n  )))))));\\n}\\n\\nvec4 portland (float x_38) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.047058823529411764,0.2,0.5137254901960784,1);\\n  const float e1 = 0.25;\\n  const vec4 v1 = vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);\\n  const float e2 = 0.5;\\n  const vec4 v2 = vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);\\n  const float e3 = 0.75;\\n  const vec4 v3 = vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);\\n  const float e4 = 1.0;\\n  const vec4 v4 = vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);\\n  float a0 = smoothstep(e0,e1,x_38);\\n  float a1 = smoothstep(e1,e2,x_38);\\n  float a2 = smoothstep(e2,e3,x_38);\\n  float a3 = smoothstep(e3,e4,x_38);\\n  return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4)\\n  )));\\n}\\n\\nvec4 blackbody (float x_21) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.2;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.4;\\n  const vec4 v2 = vec4(0.9019607843137255,0.8235294117647058,0,1);\\n  const float e3 = 0.7;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  const float e4 = 1.0;\\n  const vec4 v4 = vec4(0.6274509803921569,0.7843137254901961,1,1);\\n  float a0 = smoothstep(e0,e1,x_21);\\n  float a1 = smoothstep(e1,e2,x_21);\\n  float a2 = smoothstep(e2,e3,x_21);\\n  float a3 = smoothstep(e3,e4,x_21);\\n  return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4)\\n  )));\\n}\\n\\nvec4 earth (float x_0) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5098039215686274,1);\\n  const float e1 = 0.1;\\n  const vec4 v1 = vec4(0,0.7058823529411765,0.7058823529411765,1);\\n  const float e2 = 0.2;\\n  const vec4 v2 = vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);\\n  const float e3 = 0.4;\\n  const vec4 v3 = vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);\\n  const float e4 = 0.6;\\n  const vec4 v4 = vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_0);\\n  float a1 = smoothstep(e1,e2,x_0);\\n  float a2 = smoothstep(e2,e3,x_0);\\n  float a3 = smoothstep(e3,e4,x_0);\\n  float a4 = smoothstep(e4,e5,x_0);\\n  return max(mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_0)*step(x_0,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_0)*step(x_0,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_0)*step(x_0,e4),mix(v4,v5,a4)*step(e4,x_0)*step(x_0,e5)\\n  ))));\\n}\\n\\nvec4 electric (float x_9) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.15;\\n  const vec4 v1 = vec4(0.11764705882352941,0,0.39215686274509803,1);\\n  const float e2 = 0.4;\\n  const vec4 v2 = vec4(0.47058823529411764,0,0.39215686274509803,1);\\n  const float e3 = 0.6;\\n  const vec4 v3 = vec4(0.6274509803921569,0.35294117647058826,0,1);\\n  const float e4 = 0.8;\\n  const vec4 v4 = vec4(0.9019607843137255,0.7843137254901961,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(1,0.9803921568627451,0.8627450980392157,1);\\n  float a0 = smoothstep(e0,e1,x_9);\\n  float a1 = smoothstep(e1,e2,x_9);\\n  float a2 = smoothstep(e2,e3,x_9);\\n  float a3 = smoothstep(e3,e4,x_9);\\n  float a4 = smoothstep(e4,e5,x_9);\\n  return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)\\n  ))));\\n}\\n\\nvec4 alpha (float x_29) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,1,1,0);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_29);\\n  return mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1);\\n}\\n\\nvec4 viridis (float x_3) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\\n  float a0 = smoothstep(e0,e1,x_3);\\n  float a1 = smoothstep(e1,e2,x_3);\\n  float a2 = smoothstep(e2,e3,x_3);\\n  float a3 = smoothstep(e3,e4,x_3);\\n  float a4 = smoothstep(e4,e5,x_3);\\n  float a5 = smoothstep(e5,e6,x_3);\\n  float a6 = smoothstep(e6,e7,x_3);\\n  float a7 = smoothstep(e7,e8,x_3);\\n  return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8)\\n  )))))));\\n}\\n\\nvec4 inferno (float x_22) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\\n  float a0 = smoothstep(e0,e1,x_22);\\n  float a1 = smoothstep(e1,e2,x_22);\\n  float a2 = smoothstep(e2,e3,x_22);\\n  float a3 = smoothstep(e3,e4,x_22);\\n  float a4 = smoothstep(e4,e5,x_22);\\n  float a5 = smoothstep(e5,e6,x_22);\\n  float a6 = smoothstep(e6,e7,x_22);\\n  float a7 = smoothstep(e7,e8,x_22);\\n  return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8)\\n  )))))));\\n}\\n\\nvec4 magma (float x_30) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\\n  float a0 = smoothstep(e0,e1,x_30);\\n  float a1 = smoothstep(e1,e2,x_30);\\n  float a2 = smoothstep(e2,e3,x_30);\\n  float a3 = smoothstep(e3,e4,x_30);\\n  float a4 = smoothstep(e4,e5,x_30);\\n  float a5 = smoothstep(e5,e6,x_30);\\n  float a6 = smoothstep(e6,e7,x_30);\\n  float a7 = smoothstep(e7,e8,x_30);\\n  return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8)\\n  )))))));\\n}\\n\\nvec4 plasma (float x_33) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\\n  float a0 = smoothstep(e0,e1,x_33);\\n  float a1 = smoothstep(e1,e2,x_33);\\n  float a2 = smoothstep(e2,e3,x_33);\\n  float a3 = smoothstep(e3,e4,x_33);\\n  float a4 = smoothstep(e4,e5,x_33);\\n  float a5 = smoothstep(e5,e6,x_33);\\n  float a6 = smoothstep(e6,e7,x_33);\\n  float a7 = smoothstep(e7,e8,x_33);\\n  return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8)\\n  )))))));\\n}\\n\\nvec4 warm (float x_14) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.6745098039215687,0,0.7333333333333333,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.8588235294117647,0,0.6666666666666666,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(1,0,0.5098039215686274,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(1,0.24705882352941178,0.2901960784313726,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(1,0.4823529411764706,0,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9176470588235294,0.6901960784313725,0,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.7450980392156863,0.8941176470588236,0,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_14);\\n  float a1 = smoothstep(e1,e2,x_14);\\n  float a2 = smoothstep(e2,e3,x_14);\\n  float a3 = smoothstep(e3,e4,x_14);\\n  float a4 = smoothstep(e4,e5,x_14);\\n  float a5 = smoothstep(e5,e6,x_14);\\n  float a6 = smoothstep(e6,e7,x_14);\\n  float a7 = smoothstep(e7,e8,x_14);\\n  return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8)\\n  )))))));\\n}\\n\\nvec4 rainbow_soft_4276763523 (float x_43) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.1;\\n  const vec4 v1 = vec4(0.7803921568627451,0,0.7058823529411765,1);\\n  const float e2 = 0.2;\\n  const vec4 v2 = vec4(1,0,0.4745098039215686,1);\\n  const float e3 = 0.3;\\n  const vec4 v3 = vec4(1,0.4235294117647059,0,1);\\n  const float e4 = 0.4;\\n  const vec4 v4 = vec4(0.8705882352941177,0.7607843137254902,0,1);\\n  const float e5 = 0.5;\\n  const vec4 v5 = vec4(0.5882352941176471,1,0,1);\\n  const float e6 = 0.6;\\n  const vec4 v6 = vec4(0,1,0.21568627450980393,1);\\n  const float e7 = 0.7;\\n  const vec4 v7 = vec4(0,0.9647058823529412,0.5882352941176471,1);\\n  const float e8 = 0.8;\\n  const vec4 v8 = vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);\\n  const float e9 = 0.9;\\n  const vec4 v9 = vec4(0.403921568627451,0.2,0.9215686274509803,1);\\n  const float e10 = 1.0;\\n  const vec4 v10 = vec4(0.48627450980392156,0,0.7294117647058823,1);\\n  float a0 = smoothstep(e0,e1,x_43);\\n  float a1 = smoothstep(e1,e2,x_43);\\n  float a2 = smoothstep(e2,e3,x_43);\\n  float a3 = smoothstep(e3,e4,x_43);\\n  float a4 = smoothstep(e4,e5,x_43);\\n  float a5 = smoothstep(e5,e6,x_43);\\n  float a6 = smoothstep(e6,e7,x_43);\\n  float a7 = smoothstep(e7,e8,x_43);\\n  float a8 = smoothstep(e8,e9,x_43);\\n  float a9 = smoothstep(e9,e10,x_43);\\n  return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),\\n    max(mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8),\\n    max(mix(v8,v9,a8)*step(e8,x_43)*step(x_43,e9),mix(v9,v10,a9)*step(e9,x_43)*step(x_43,e10)\\n  )))))))));\\n}\\n\\nvec4 bathymetry (float x_36) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.996078431372549,0.8,1);\\n  float a0 = smoothstep(e0,e1,x_36);\\n  float a1 = smoothstep(e1,e2,x_36);\\n  float a2 = smoothstep(e2,e3,x_36);\\n  float a3 = smoothstep(e3,e4,x_36);\\n  float a4 = smoothstep(e4,e5,x_36);\\n  float a5 = smoothstep(e5,e6,x_36);\\n  float a6 = smoothstep(e6,e7,x_36);\\n  float a7 = smoothstep(e7,e8,x_36);\\n  return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8)\\n  )))))));\\n}\\n\\nvec4 cdom (float x_7) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);\\n  float a0 = smoothstep(e0,e1,x_7);\\n  float a1 = smoothstep(e1,e2,x_7);\\n  float a2 = smoothstep(e2,e3,x_7);\\n  float a3 = smoothstep(e3,e4,x_7);\\n  float a4 = smoothstep(e4,e5,x_7);\\n  float a5 = smoothstep(e5,e6,x_7);\\n  float a6 = smoothstep(e6,e7,x_7);\\n  float a7 = smoothstep(e7,e8,x_7);\\n  return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8)\\n  )))))));\\n}\\n\\nvec4 chlorophyll (float x_6) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);\\n  float a0 = smoothstep(e0,e1,x_6);\\n  float a1 = smoothstep(e1,e2,x_6);\\n  float a2 = smoothstep(e2,e3,x_6);\\n  float a3 = smoothstep(e3,e4,x_6);\\n  float a4 = smoothstep(e4,e5,x_6);\\n  float a5 = smoothstep(e5,e6,x_6);\\n  float a6 = smoothstep(e6,e7,x_6);\\n  float a7 = smoothstep(e7,e8,x_6);\\n  return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8)\\n  )))))));\\n}\\n\\nvec4 density (float x_19) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\\n  float a0 = smoothstep(e0,e1,x_19);\\n  float a1 = smoothstep(e1,e2,x_19);\\n  float a2 = smoothstep(e2,e3,x_19);\\n  float a3 = smoothstep(e3,e4,x_19);\\n  float a4 = smoothstep(e4,e5,x_19);\\n  float a5 = smoothstep(e5,e6,x_19);\\n  float a6 = smoothstep(e6,e7,x_19);\\n  float a7 = smoothstep(e7,e8,x_19);\\n  return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8)\\n  )))))));\\n}\\n\\nvec4 freesurface_blue_3154355989 (float x_35) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);\\n  float a0 = smoothstep(e0,e1,x_35);\\n  float a1 = smoothstep(e1,e2,x_35);\\n  float a2 = smoothstep(e2,e3,x_35);\\n  float a3 = smoothstep(e3,e4,x_35);\\n  float a4 = smoothstep(e4,e5,x_35);\\n  float a5 = smoothstep(e5,e6,x_35);\\n  float a6 = smoothstep(e6,e7,x_35);\\n  float a7 = smoothstep(e7,e8,x_35);\\n  return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8)\\n  )))))));\\n}\\n\\nvec4 freesurface_red_1679163293 (float x_20) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);\\n  float a0 = smoothstep(e0,e1,x_20);\\n  float a1 = smoothstep(e1,e2,x_20);\\n  float a2 = smoothstep(e2,e3,x_20);\\n  float a3 = smoothstep(e3,e4,x_20);\\n  float a4 = smoothstep(e4,e5,x_20);\\n  float a5 = smoothstep(e5,e6,x_20);\\n  float a6 = smoothstep(e6,e7,x_20);\\n  float a7 = smoothstep(e7,e8,x_20);\\n  return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8)\\n  )))))));\\n}\\n\\nvec4 oxygen (float x_11) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);\\n  float a0 = smoothstep(e0,e1,x_11);\\n  float a1 = smoothstep(e1,e2,x_11);\\n  float a2 = smoothstep(e2,e3,x_11);\\n  float a3 = smoothstep(e3,e4,x_11);\\n  float a4 = smoothstep(e4,e5,x_11);\\n  float a5 = smoothstep(e5,e6,x_11);\\n  float a6 = smoothstep(e6,e7,x_11);\\n  float a7 = smoothstep(e7,e8,x_11);\\n  return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8)\\n  )))))));\\n}\\n\\nvec4 par (float x_28) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.2,0.0784313725490196,0.09411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);\\n  float a0 = smoothstep(e0,e1,x_28);\\n  float a1 = smoothstep(e1,e2,x_28);\\n  float a2 = smoothstep(e2,e3,x_28);\\n  float a3 = smoothstep(e3,e4,x_28);\\n  float a4 = smoothstep(e4,e5,x_28);\\n  float a5 = smoothstep(e5,e6,x_28);\\n  float a6 = smoothstep(e6,e7,x_28);\\n  float a7 = smoothstep(e7,e8,x_28);\\n  return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8)\\n  )))))));\\n}\\n\\nvec4 phase (float x_39) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);\\n  float a0 = smoothstep(e0,e1,x_39);\\n  float a1 = smoothstep(e1,e2,x_39);\\n  float a2 = smoothstep(e2,e3,x_39);\\n  float a3 = smoothstep(e3,e4,x_39);\\n  float a4 = smoothstep(e4,e5,x_39);\\n  float a5 = smoothstep(e5,e6,x_39);\\n  float a6 = smoothstep(e6,e7,x_39);\\n  float a7 = smoothstep(e7,e8,x_39);\\n  return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8)\\n  )))))));\\n}\\n\\nvec4 salinity (float x_26) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);\\n  float a0 = smoothstep(e0,e1,x_26);\\n  float a1 = smoothstep(e1,e2,x_26);\\n  float a2 = smoothstep(e2,e3,x_26);\\n  float a3 = smoothstep(e3,e4,x_26);\\n  float a4 = smoothstep(e4,e5,x_26);\\n  float a5 = smoothstep(e5,e6,x_26);\\n  float a6 = smoothstep(e6,e7,x_26);\\n  float a7 = smoothstep(e7,e8,x_26);\\n  return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8)\\n  )))))));\\n}\\n\\nvec4 temperature (float x_8) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.01568627450980392,0.13725490196078433,0.2,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.09019607843137255,0.2,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);\\n  float a0 = smoothstep(e0,e1,x_8);\\n  float a1 = smoothstep(e1,e2,x_8);\\n  float a2 = smoothstep(e2,e3,x_8);\\n  float a3 = smoothstep(e3,e4,x_8);\\n  float a4 = smoothstep(e4,e5,x_8);\\n  float a5 = smoothstep(e5,e6,x_8);\\n  float a6 = smoothstep(e6,e7,x_8);\\n  float a7 = smoothstep(e7,e8,x_8);\\n  return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8)\\n  )))))));\\n}\\n\\nvec4 turbidity (float x_40) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);\\n  float a0 = smoothstep(e0,e1,x_40);\\n  float a1 = smoothstep(e1,e2,x_40);\\n  float a2 = smoothstep(e2,e3,x_40);\\n  float a3 = smoothstep(e3,e4,x_40);\\n  float a4 = smoothstep(e4,e5,x_40);\\n  float a5 = smoothstep(e5,e6,x_40);\\n  float a6 = smoothstep(e6,e7,x_40);\\n  float a7 = smoothstep(e7,e8,x_40);\\n  return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8)\\n  )))))));\\n}\\n\\nvec4 velocity_blue_297387650 (float x_2) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_2);\\n  float a1 = smoothstep(e1,e2,x_2);\\n  float a2 = smoothstep(e2,e3,x_2);\\n  float a3 = smoothstep(e3,e4,x_2);\\n  float a4 = smoothstep(e4,e5,x_2);\\n  float a5 = smoothstep(e5,e6,x_2);\\n  float a6 = smoothstep(e6,e7,x_2);\\n  float a7 = smoothstep(e7,e8,x_2);\\n  return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8)\\n  )))))));\\n}\\n\\nvec4 velocity_green_2558432129 (float x_27) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(1,0.9921568627450981,0.803921568627451,1);\\n  float a0 = smoothstep(e0,e1,x_27);\\n  float a1 = smoothstep(e1,e2,x_27);\\n  float a2 = smoothstep(e2,e3,x_27);\\n  float a3 = smoothstep(e3,e4,x_27);\\n  float a4 = smoothstep(e4,e5,x_27);\\n  float a5 = smoothstep(e5,e6,x_27);\\n  float a6 = smoothstep(e6,e7,x_27);\\n  float a7 = smoothstep(e7,e8,x_27);\\n  return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8)\\n  )))))));\\n}\\n\\nvec4 cubehelix (float x_37) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.07;\\n  const vec4 v1 = vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);\\n  const float e2 = 0.13;\\n  const vec4 v2 = vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);\\n  const float e3 = 0.2;\\n  const vec4 v3 = vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);\\n  const float e4 = 0.27;\\n  const vec4 v4 = vec4(0.6313725490196078,0,0.5764705882352941,1);\\n  const float e5 = 0.33;\\n  const vec4 v5 = vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);\\n  const float e6 = 0.4;\\n  const vec4 v6 = vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);\\n  const float e7 = 0.47;\\n  const vec4 v7 = vec4(1,0.11372549019607843,0.3803921568627451,1);\\n  const float e8 = 0.53;\\n  const vec4 v8 = vec4(1,0.21176470588235294,0.27058823529411763,1);\\n  const float e9 = 0.6;\\n  const vec4 v9 = vec4(1,0.3333333333333333,0.1803921568627451,1);\\n  const float e10 = 0.67;\\n  const vec4 v10 = vec4(1,0.47058823529411764,0.13333333333333333,1);\\n  const float e11 = 0.73;\\n  const vec4 v11 = vec4(1,0.615686274509804,0.1450980392156863,1);\\n  const float e12 = 0.8;\\n  const vec4 v12 = vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);\\n  const float e13 = 0.87;\\n  const vec4 v13 = vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);\\n  const float e14 = 0.93;\\n  const vec4 v14 = vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);\\n  const float e15 = 1.0;\\n  const vec4 v15 = vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);\\n  float a0 = smoothstep(e0,e1,x_37);\\n  float a1 = smoothstep(e1,e2,x_37);\\n  float a2 = smoothstep(e2,e3,x_37);\\n  float a3 = smoothstep(e3,e4,x_37);\\n  float a4 = smoothstep(e4,e5,x_37);\\n  float a5 = smoothstep(e5,e6,x_37);\\n  float a6 = smoothstep(e6,e7,x_37);\\n  float a7 = smoothstep(e7,e8,x_37);\\n  float a8 = smoothstep(e8,e9,x_37);\\n  float a9 = smoothstep(e9,e10,x_37);\\n  float a10 = smoothstep(e10,e11,x_37);\\n  float a11 = smoothstep(e11,e12,x_37);\\n  float a12 = smoothstep(e12,e13,x_37);\\n  float a13 = smoothstep(e13,e14,x_37);\\n  float a14 = smoothstep(e14,e15,x_37);\\n  return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),\\n    max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),\\n    max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),\\n    max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),\\n    max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),\\n    max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),\\n    max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),\\n    max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)\\n  ))))))))))))));\\n}\\n\\n// our texture\\nuniform usampler2D channel0;\\nuniform usampler2D channel1;\\nuniform usampler2D channel2;\\nuniform usampler2D channel3;\\nuniform usampler2D channel4;\\nuniform usampler2D channel5;\\n\\n// range\\nuniform vec2 sliderValues[6];\\n\\n// opacity\\nuniform float opacity;\\nuniform float divisor;\\n\\nin vec2 vTexCoord;\\n\\nout vec4 color;\\n\\nvoid main() {\\n  float intensityValue0 = (float(texture(channel0, vTexCoord).r) - sliderValues[0][0]) / sliderValues[0][1];\\n  float intensityValue1 = (float(texture(channel1, vTexCoord).r) - sliderValues[1][0]) / sliderValues[1][1];\\n  float intensityValue2 = (float(texture(channel2, vTexCoord).r) - sliderValues[2][0]) / sliderValues[2][1];\\n  float intensityValue3 = (float(texture(channel3, vTexCoord).r) - sliderValues[3][0]) / sliderValues[3][1];\\n  float intensityValue4 = (float(texture(channel4, vTexCoord).r) - sliderValues[4][0]) / sliderValues[4][1];\\n  float intensityValue5 = (float(texture(channel5, vTexCoord).r) - sliderValues[5][0]) / sliderValues[5][1];\\n\\n  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\\n  float intensityCombo = 0.0;\\n  for(int i = 0; i < 6; i++) {\\n    intensityCombo += max(0.0,intensityArray[i]);\\n  }\\n  color = vec4(colormapFunction(min(1.0,intensityCombo)).xyz, opacity);\\n}\\n\";","export default \"#version 300 es\\n#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;\\nprecision highp int;\\nprecision highp usampler2D;\\n#define GLSLIFY 1\\n\\n// our texture\\nuniform usampler2D channel0;\\nuniform usampler2D channel1;\\nuniform usampler2D channel2;\\nuniform usampler2D channel3;\\nuniform usampler2D channel4;\\nuniform usampler2D channel5;\\n\\n// range\\nuniform vec2 sliderValues[6];\\n\\n// color\\nuniform vec3 colorValues[6];\\n\\n// opacity\\nuniform float opacity;\\n\\nin vec2 vTexCoord;\\n\\nout vec4 color;\\n\\nvec3 hsv2rgb(vec3 c)\\n{\\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\\n}\\n\\nvec3 rgb2hsv(vec3 rgb) {\\n \\tfloat Cmax = max(rgb.r, max(rgb.g, rgb.b));\\n \\tfloat Cmin = min(rgb.r, min(rgb.g, rgb.b));\\n \\tfloat delta = Cmax - Cmin;\\n\\n \\tvec3 hsv = vec3(0., 0., Cmax);\\n\\n \\tif (Cmax > Cmin) {\\n \\t\\thsv.y = delta / Cmax;\\n\\n \\t\\tif (rgb.r == Cmax) {\\n      hsv.x = (rgb.g - rgb.b) / delta;\\n    }\\n \\t\\telse {\\n \\t\\t\\tif (rgb.g == Cmax){\\n        hsv.x = 2. + (rgb.b - rgb.r) / delta;\\n      }\\n \\t\\t\\telse {\\n        hsv.x = 4. + (rgb.r - rgb.g) / delta;\\n      }\\n \\t\\t}\\n \\t\\thsv.x = fract(hsv.x / 6.);\\n \\t}\\n \\treturn hsv;\\n }\\n\\nvoid main() {\\n  float intensityValue0 = (float(texture(channel0, vTexCoord).r) - sliderValues[0][0]) / sliderValues[0][1];\\n  float intensityValue1 = (float(texture(channel1, vTexCoord).r) - sliderValues[1][0]) / sliderValues[1][1];\\n  float intensityValue2 = (float(texture(channel2, vTexCoord).r) - sliderValues[2][0]) / sliderValues[2][1];\\n  float intensityValue3 = (float(texture(channel3, vTexCoord).r) - sliderValues[3][0]) / sliderValues[3][1];\\n  float intensityValue4 = (float(texture(channel4, vTexCoord).r) - sliderValues[4][0]) / sliderValues[4][1];\\n  float intensityValue5 = (float(texture(channel5, vTexCoord).r) - sliderValues[5][0]) / sliderValues[5][1];\\n\\n  vec3 rgbCombo = vec3(0.0);\\n  vec3 hsvCombo = vec3(0.0);\\n  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\\n\\n  for(int i = 0; i < 6; i++) {\\n    hsvCombo = rgb2hsv(vec3(colorValues[i]));\\n    hsvCombo = vec3(hsvCombo.xy, max(0.0,intensityArray[i]));\\n    rgbCombo += hsv2rgb(hsvCombo);\\n  }\\n\\n  color = vec4(rgbCombo, opacity);\\n  geometry.uv = vTexCoord;\\n  DECKGL_FILTER_COLOR(color, geometry);\\n}\\n\";","export default \"#version 300 es\\n#define GLSLIFY 1\\n#define SHADER_NAME xr-layer-vertex-shader\\n\\nin vec2 texCoords;\\nin vec3 positions;\\nin vec3 positions64Low;\\nin vec3 instancePickingColors;\\n\\nout vec2 vTexCoord;\\n\\nvoid main(void) {\\n  geometry.worldPosition = positions;\\n  geometry.uv = texCoords;\\n  geometry.pickingColor = instancePickingColors;\\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  vTexCoord = texCoords;\\n  vec4 color = vec4(0.0);\\n  DECKGL_FILTER_COLOR(color, geometry);\\n}\\n\";","import XRLayer from './XRLayer';\n\nexport default XRLayer;\n","import { TileLayer } from '@deck.gl/geo-layers';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core';\nimport { renderSubLayers } from './utils';\n\nconst defaultProps = {\n  ...TileLayer.defaultProps,\n  pickable: true,\n  coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n  sliderValues: { type: 'array', value: [], compare: true },\n  colorValues: { type: 'array', value: [], compare: true },\n  channelIsOn: { type: 'array', value: [], compare: true },\n  minZoom: { type: 'number', value: 0, compare: true },\n  maxZoom: { type: 'number', value: 0, compare: true },\n  renderSubLayers: { type: 'function', value: renderSubLayers, compare: false },\n  opacity: { type: 'number', value: 1, compare: true },\n  colormap: { type: 'string', value: '', compare: true },\n  dtype: { type: 'string', value: '<u2', compare: true },\n  domain: { type: 'array', value: [], compare: true },\n  viewportId: { type: 'string', value: '', compare: true }\n};\n\n/**\n * This layer serves as a proxy of sorts to the rendering done in renderSubLayers, reacting to viewport changes in a custom manner.\n */\nexport default class VivViewerLayerBase extends TileLayer {\n  /**\n   * This function allows us to controls which viewport gets to update the Tileset2D.\n   * This is a uniquely TileLayer issue since it updates based on viewport updates thanks\n   * to its ability to handle zoom-pan loading.  Essentially, with a picture-in-picture,\n   * this prevents it from detecting the update of some other viewport that is unwanted.\n   */\n  _updateTileset() {\n    if (!this.props.viewportId) {\n      super._updateTileset();\n    }\n    if (\n      (this.props.viewportId &&\n        this.context.viewport.id === this.props.viewportId) ||\n      // I don't know why, but DeckGL doesn't recognize multiple views on the first pass\n      // so we force update on the first pass by checking if there is a viewport in the tileset.\n      !this.state.tileset._viewport\n    ) {\n      super._updateTileset();\n    }\n  }\n}\n\nVivViewerLayerBase.layerName = 'VivViewerLayerBase';\nVivViewerLayerBase.defaultProps = defaultProps;\n","import XRLayer from '../XRLayer';\n\nexport function range(len) {\n  return [...Array(len).keys()];\n}\n\nexport function renderSubLayers(props) {\n  const {\n    bbox: { left, top, right, bottom }\n  } = props.tile;\n  const {\n    colorValues,\n    sliderValues,\n    channelIsOn,\n    visible,\n    opacity,\n    data,\n    colormap,\n    dtype,\n    id,\n    onHover,\n    pickable\n  } = props;\n  // Only render in positive coorinate system\n  if ([left, top, right, bottom].some(v => v < 0)) {\n    return null;\n  }\n  const xrl = new XRLayer({\n    id: `XRLayer-${left}-${top}-${right}-${bottom}-${id}`,\n    bounds: [left, bottom, right, top],\n    channelData: data,\n    pickable,\n    // Uncomment to help debugging - shades the tile being hovered over.\n    // autoHighlight: true,\n    // highlightColor: [80, 80, 80, 50],\n    data: null,\n    sliderValues,\n    colorValues,\n    channelIsOn,\n    opacity,\n    visible,\n    dtype,\n    colormap,\n    onHover\n  });\n  return xrl;\n}\n","import quickselect from 'quickselect';\n\nexport function isInTileBounds({\n  x,\n  y,\n  z,\n  width,\n  height,\n  tileSize,\n  numLevels\n}) {\n  const xInBounds = x < Math.ceil(width / (tileSize * 2 ** z)) && x >= 0;\n  const yInBounds = y < Math.ceil(height / (tileSize * 2 ** z)) && y >= 0;\n  const zInBounds = z >= 0 && z < numLevels;\n  return xInBounds && yInBounds && zInBounds;\n}\n\nexport function guessRgb(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return shape.length > 2 && (lastDimSize === 3 || lastDimSize === 4);\n}\n\n/**\n * Pads TypedArray on right and bottom with zeros out to target width\n * and target height respectively.\n * @param {Object} tile { data: TypedArray, width: number, height: number}\n * @param {Object} targetWidth number\n * @param {Object} targetHeight number\n * @returns {TypedArray} TypedArray\n */\nexport function padTileWithZeros(tile, targetWidth, targetHeight) {\n  const { data, width, height } = tile;\n  // Create new TypedArray with same constructor as source\n  const padded = new data.constructor(targetWidth * targetHeight);\n  // Take strips (rows) from original tile data and fill padded tile using\n  // multiples of the tileSize as the offset.\n  for (let i = 0; i < height; i += 1) {\n    const offset = i * width;\n    const strip = data.subarray(offset, offset + width);\n    padded.set(strip, i * targetWidth);\n  }\n  return padded;\n}\n\n/**\n * Flips the bytes of TypedArray in place. Used to flipendianess\n * Adapted from https://github.com/zbjornson/node-bswap/blob/master/bswap.js\n * @param {TypedArray} src\n * @returns {void}\n */\nexport function byteSwapInplace(src) {\n  const b = src.BYTES_PER_ELEMENT;\n  const flipper = new Uint8Array(src.buffer, src.byteOffset, src.length * b);\n  const numFlips = b / 2;\n  const endByteIndex = b - 1;\n  let t = 0;\n  for (let i = 0; i < flipper.length; i += b) {\n    for (let j = 0; j < numFlips; j += 1) {\n      t = flipper[i + j];\n      flipper[i + j] = flipper[i + endByteIndex - j];\n      flipper[i + endByteIndex - j] = t;\n    }\n  }\n}\n\n/**\n * Returns actual image stats for static imagery and an estimate via a downsampled version of image pyramids.\n * This is helpful for generating histograms of your channel data, or scaling your sliders down to a reasonable range.\n * @param {Object} args\n * @param {Object} args.loader A valid loader object.\n * @param {Array} args.loaderSelection Array of valid dimension selections\n * @returns {Array} List of { mean, domain, sd, data, q1, q3 } objects.\n */\nexport async function getChannelStats({ loader, loaderSelection }) {\n  const z = loader.isPyramid ? loader.numLevels - 1 : 0;\n  const rasters = await loader.getRaster({ z, loaderSelection });\n  const { data } = rasters;\n  const channelStats = data.map(arr => {\n    let len = arr.length;\n    let min = Infinity;\n    let max = -Infinity;\n    let total = 0;\n    // Range (min/max).\n    // eslint-disable-next-line no-plusplus\n    while (len--) {\n      if (arr[len] < min) {\n        min = arr[len];\n      }\n      if (arr[len] > max) {\n        max = arr[len];\n      }\n      total += arr[len];\n    }\n\n    // Mean.\n    const mean = total / arr.length;\n\n    // Standard Deviation.\n    len = arr.length;\n    let sumSquared = 0;\n    // eslint-disable-next-line no-plusplus\n    while (len--) {\n      sumSquared += (arr[len] - mean) ** 2;\n    }\n    const sd = (sumSquared / arr.length) ** 0.5;\n\n    // Median, and quartiles via quickselect: https://en.wikipedia.org/wiki/Quickselect.\n    // Odd number lengths should round down the index.\n    const mid = Math.floor(arr.length / 2);\n    const firstQuartileLocation = Math.floor(arr.length / 4);\n    const thirdQuartileLocation = 3 * Math.floor(arr.length / 4);\n    quickselect(arr, mid);\n    const median = arr[mid];\n    quickselect(arr, firstQuartileLocation, 0, mid);\n    const q1 = arr[firstQuartileLocation];\n    quickselect(arr, thirdQuartileLocation, mid, arr.length - 1);\n    const q3 = arr[thirdQuartileLocation];\n    return { mean, sd, q1, q3, median, data: arr, domain: [min, max] };\n  });\n  return channelStats;\n}\n","import { CompositeLayer, COORDINATE_SYSTEM } from '@deck.gl/core';\nimport XRLayer from './XRLayer';\nimport { padTileWithZeros } from '../loaders/utils';\n\nconst defaultProps = {\n  pickable: true,\n  coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n  sliderValues: { type: 'array', value: [], compare: true },\n  channelIsOn: { type: 'array', value: [], compare: true },\n  colorValues: { type: 'array', value: [], compare: true },\n  loaderSelection: { type: 'array', value: [], compare: true },\n  colormap: { type: 'string', value: '', compare: true },\n  domain: { type: 'array', value: [], compare: true },\n  translate: { type: 'array', value: [0, 0], compare: true },\n  scale: { type: 'number', value: 1, compare: true },\n  loader: {\n    type: 'object',\n    value: {\n      getRaster: async () => ({ data: [], height: 0, width: 0 }),\n      dtype: '<u2'\n    },\n    compare: true\n  },\n  z: { type: 'number', value: 0, compare: true }\n};\n\nfunction scaleBounds({ width, height, translate, scale }) {\n  const [left, top] = translate;\n  const right = width * scale + left;\n  const bottom = height * scale + top;\n  return [left, bottom, right, top];\n}\n\n/*\n * For some reason data of uneven length fails to be converted to a texture (Issue #144).\n * Here we pad the width of tile by one if the data is uneven in length, which seemingly\n * fixes the rendering. This is not ideal since padding the tile makes a copy of underlying\n * buffer, but without digging deeper into the WebGL it is a reasonable fix.\n */\nfunction padEven(data, width, height) {\n  const targetWidth = (width * height) % 2 === 0 ? width : width + 1;\n  const padded = data.map(d =>\n    padTileWithZeros({ data: d, width, height }, targetWidth, height)\n  );\n  return { data: padded, width: targetWidth, height };\n}\n\n/**\n * This layer wraps XRLayer and generates a static image\n * @param {Object} props\n * @param {Array} props.sliderValues List of [begin, end] values to control each channel's ramp function.\n * @param {Array} props.colorValues List of [r, g, b] values for each channel.\n * @param {Array} props.channelIsOn List of boolean values for each channel for whether or not it is visible.\n * @param {number} props.opacity Opacity of the layer.\n * @param {string} props.colormap String indicating a colormap (default: '').  The full list of options is here: https://github.com/glslify/glsl-colormap#glsl-colormap\n * @param {Array} props.domain Override for the possible max/min values (i.e something different than 65535 for uint16/'<u2').\n * @param {string} props.viewportId Id for the current view.\n * @param {Array} props.translate Translate transformation to be applied to the bounds after scaling.\n * @param {number} props.scale Scaling factor for this layer to be used against the dimensions of the loader's `getRaster`.\n * @param {Object} props.loader Loader to be used for fetching data.  It must implement/return `getRaster` and `dtype`.\n * @param {String} props.onHover Hook function from deck.gl to handle hover objects.\n */\nexport default class StaticImageLayer extends CompositeLayer {\n  initializeState() {\n    const { loader, z, loaderSelection } = this.props;\n    loader.getRaster({ z, loaderSelection }).then(({ data, width, height }) => {\n      this.setState(padEven(data, width, height));\n    });\n  }\n\n  updateState({ changeFlags, props, oldProps }) {\n    const { propsChanged } = changeFlags;\n    const loaderChanged =\n      typeof propsChanged === 'string' && propsChanged.includes('props.loader');\n    const loaderSelectionChanged =\n      props.loaderSelection !== oldProps.loaderSelection;\n    if (loaderChanged || loaderSelectionChanged) {\n      // Only fetch new data to render if loader has changed\n      const { loader, z, loaderSelection } = this.props;\n      loader\n        .getRaster({ z, loaderSelection })\n        .then(({ data, width, height }) => {\n          this.setState(padEven(data, width, height));\n        });\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getPickingInfo({ info, sourceLayer }) {\n    // eslint-disable-next-line no-param-reassign\n    info.sourceLayer = sourceLayer;\n    // eslint-disable-next-line no-param-reassign\n    info.tile = sourceLayer.props.tile;\n    return info;\n  }\n\n  renderLayers() {\n    const {\n      loader,\n      visible,\n      opacity,\n      colormap,\n      sliderValues,\n      colorValues,\n      channelIsOn,\n      translate,\n      scale,\n      z,\n      domain,\n      pickable,\n      id\n    } = this.props;\n    const { dtype } = loader;\n    const { data, width, height } = this.state;\n    if (!(width && height)) return null;\n    const bounds = scaleBounds({\n      width,\n      height,\n      translate,\n      scale\n    });\n    return new XRLayer({\n      channelData: Promise.resolve({ data, width, height }),\n      pickable,\n      bounds,\n      sliderValues,\n      colorValues,\n      channelIsOn,\n      domain,\n      id: `XR-Static-Layer-${0}-${height}-${width}-${0}-${z}-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      opacity,\n      visible,\n      dtype,\n      colormap\n    });\n  }\n}\n\nStaticImageLayer.layerName = 'StaticImageLayer';\nStaticImageLayer.defaultProps = defaultProps;\n","import { CompositeLayer } from '@deck.gl/core';\nimport VivViewerLayerBase from './VivViewerLayerBase';\nimport StaticImageLayer from '../StaticImageLayer';\n\nconst defaultProps = {\n  pickable: true,\n  onHover: { type: 'function', value: null, compare: false }\n};\n\n/**\n * This layer generates a VivViewerLayer (tiled) and a StaticImageLayer (background for the tiled layer)\n * @param {Object} props\n * @param {Array} props.sliderValues List of [begin, end] values to control each channel's ramp function.\n * @param {Array} props.colorValues List of [r, g, b] values for each channel.\n * @param {Array} props.channelIsOn List of boolean values for each channel for whether or not it is visible.\n * @param {number} props.opacity Opacity of the layer.\n * @param {string} props.colormap String indicating a colormap (default: '').  The full list of options is here: https://github.com/glslify/glsl-colormap#glsl-colormap\n * @param {Array} props.domain Override for the possible max/min values (i.e something different than 65535 for uint16/'<u2').\n * @param {string} props.viewportId Id for the current view.\n * @param {Object} props.loader Loader to be used for fetching data.  It must implement/return `getTile`, `dtype`, `numLevels`, and `tileSize`, and `getRaster`.\n * @param {Array} props.loaderSelection Selection to be used for fetching data.\n * @param {String} props.id Unique identifier for this layer.\n * @param {String} props.onTileError Custom override for handle tile fetching errors.\n * @param {String} props.onHover Hook function from deck.gl to handle hover objects.\n */\n\nexport default class VivViewerLayer extends CompositeLayer {\n  renderLayers() {\n    const {\n      loader,\n      sliderValues,\n      colorValues,\n      channelIsOn,\n      loaderSelection,\n      domain,\n      opacity,\n      colormap,\n      viewportId,\n      onTileError,\n      onHover,\n      pickable,\n      id\n    } = this.props;\n    const { tileSize, numLevels, dtype } = loader;\n    const getTileData = async ({ x, y, z }) => {\n      const tile = await loader.getTile({\n        x,\n        y,\n        z: -z,\n        loaderSelection\n      });\n      if (tile) {\n        if (tile.width !== tileSize || tile.height !== tileSize) {\n          console.warn(\n            `Tile data  { width: ${tile.width}, height: ${tile.height} } does not match tilesize: ${tileSize}`\n          );\n        }\n      }\n      return tile;\n    };\n    const tiledLayer = new VivViewerLayerBase({\n      id: `Tiled-Image-${id}`,\n      getTileData,\n      dtype,\n      tileSize,\n      minZoom: -(numLevels - 1),\n      colorValues,\n      sliderValues,\n      channelIsOn,\n      domain,\n      // We want a no-overlap caching strategy with an opacity < 1 to prevent\n      // multiple rendered sublayers (some of which have been cached) from overlapping\n      refinementStrategy: opacity === 1 ? 'best-available' : 'no-overlap',\n      // TileLayer checks `changeFlags.updateTriggersChanged.getTileData` to see if tile cache\n      // needs to be re-created. We want to trigger this behavior if the loader changes.\n      // https://github.com/uber/deck.gl/blob/3f67ea6dfd09a4d74122f93903cb6b819dd88d52/modules/geo-layers/src/tile-layer/tile-layer.js#L50\n      updateTriggers: {\n        getTileData: [loader, loaderSelection]\n      },\n      onTileError: onTileError || loader.onTileError,\n      opacity,\n      colormap,\n      viewportId,\n      onHover,\n      pickable\n    });\n    // This gives us a background image and also solves the current\n    // minZoom funny business.  We don't use it for the background if we have an opacity\n    // paramteter set to anything but 1, but we always use it for situations where\n    // we are zoomed out too far.\n    const implementsGetRaster = typeof loader.getRaster === 'function';\n    const baseLayer =\n      implementsGetRaster &&\n      new StaticImageLayer(this.props, {\n        id: `Background-Image-${id}`,\n        scale: 2 ** (numLevels - 1),\n        visible:\n          opacity === 1 ||\n          (-numLevels > this.context.viewport.zoom &&\n            (!viewportId || this.context.viewport.id === viewportId)),\n        z: numLevels - 1,\n        pickable: true,\n        onHover\n      });\n    const layers = [baseLayer, tiledLayer];\n    return layers;\n  }\n}\n\nVivViewerLayer.layerName = 'VivViewerLayer';\nVivViewerLayer.defaultProps = defaultProps;\n","import VivViewerLayer from './VivViewerLayer';\n\nexport default VivViewerLayer;\n","import { CompositeLayer, COORDINATE_SYSTEM } from '@deck.gl/core';\nimport { PolygonLayer } from '@deck.gl/layers';\nimport StaticImageLayer from './StaticImageLayer';\n\nconst defaultProps = {\n  pickable: true,\n  loader: {\n    type: 'object',\n    value: {\n      getRaster: async () => ({ data: [], height: 0, width: 0 }),\n      getRasterSize: () => ({ height: 0, width: 0 }),\n      dtype: '<u2'\n    },\n    compare: true\n  },\n  id: { type: 'string', value: '', compare: true },\n  boundingBox: {\n    type: 'array',\n    value: [\n      [0, 0],\n      [0, 1],\n      [1, 1],\n      [1, 0]\n    ],\n    compare: true\n  },\n  boundingBoxColor: { type: 'array', value: [255, 0, 0], compare: true },\n  boundingBoxOutlineWidth: { type: 'number', value: 50, compare: true },\n  viewportOutlineColor: { type: 'array', value: [255, 190, 0], compare: true },\n  viewportOutlineWidth: { type: 'number', value: 400, compare: true },\n  overviewScale: { type: 'number', value: 1, compare: true }\n};\n\n/**\n * This layer wraps a StaticImageLayer as an overview, as well as a bounding box of the detail view and a polygon boundary for the view\n * @param {Object} props\n * @param {Array} props.sliderValues List of [begin, end] values to control each channel's ramp function.\n * @param {Array} props.colorValues List of [r, g, b] values for each channel.\n * @param {Array} props.channelIsOn List of boolean values for each channel for whether or not it is visible.\n * @param {number} props.opacity Opacity of the layer.\n * @param {string} props.colormap String indicating a colormap (default: '').  The full list of options is here: https://github.com/glslify/glsl-colormap#glsl-colormap\n * @param {Array} props.domain Override for the possible max/min values (i.e something different than 65535 for uint16/'<u2').\n * @param {Object} props.loader Loader to be used for fetching data.  It must implement/return `getRaster` and `dtype`.\n * @param {Array} props.boundingBoxColor [r, g, b] color of the bounding box (default: [255, 0, 0]).\n * @param {number} props.boundingBoxOutlineWidth Width of the bounding box (default: 50).\n * @param {Array} props.viewportOutlineColor [r, g, b] color of the outline (default: [255, 190, 0]).\n * @param {number} props.viewportOutlineWidth Viewport outline width (default: 400).\n */\nexport default class OverviewLayer extends CompositeLayer {\n  renderLayers() {\n    const {\n      loader,\n      id,\n      boundingBox,\n      boundingBoxColor,\n      boundingBoxOutlineWidth,\n      viewportOutlineColor,\n      viewportOutlineWidth,\n      overviewScale\n    } = this.props;\n    const { numLevels } = loader;\n    const { width, height } = loader.getRasterSize({\n      z: 0\n    });\n    const overview = new StaticImageLayer(this.props, {\n      id: `viewport-${id}`,\n      scale: 2 ** (numLevels - 1) * overviewScale,\n      z: numLevels - 1\n    });\n    const boundingBoxOutline = new PolygonLayer({\n      id: `bounding-box-overview-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: [boundingBox],\n      getPolygon: f => f,\n      filled: false,\n      stroked: true,\n      getLineColor: boundingBoxColor,\n      getLineWidth: boundingBoxOutlineWidth\n    });\n    const viewportOutline = new PolygonLayer({\n      id: `viewport-outline-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: [\n        [\n          [0, 0],\n          [width * overviewScale, 0],\n          [width * overviewScale, height * overviewScale],\n          [0, height * overviewScale]\n        ]\n      ],\n      getPolygon: f => f,\n      filled: false,\n      stroked: true,\n      getLineColor: viewportOutlineColor,\n      getLineWidth: viewportOutlineWidth\n    });\n    const layers = [overview, boundingBoxOutline, viewportOutline];\n    return layers;\n  }\n}\n\nOverviewLayer.layerName = 'OverviewLayer';\nOverviewLayer.defaultProps = defaultProps;\n","import { OrthographicView } from '@deck.gl/core';\n\nexport function getVivId(id) {\n  return `-#${id}#`;\n}\n/**\n * Create a boudning box from a viewport based on passed-in viewState.\n * @param {viewState} Object The viewState for a certain viewport.\n * @returns {View} The DeckGL View for this viewport.\n */\nexport function makeBoundingBox(viewState) {\n  const viewport = new OrthographicView().makeViewport({\n    // From the current `detail` viewState, we need its projection matrix (actually the inverse).\n    viewState,\n    height: viewState.height,\n    width: viewState.width\n  });\n  // Use the inverse of the projection matrix to map screen to the view space.\n  return [\n    viewport.unproject([0, 0]),\n    viewport.unproject([viewport.width, 0]),\n    viewport.unproject([viewport.width, viewport.height]),\n    viewport.unproject([0, viewport.height])\n  ];\n}\n","import { CompositeLayer, COORDINATE_SYSTEM } from '@deck.gl/core';\nimport { LineLayer, TextLayer } from '@deck.gl/layers';\nimport { range } from './utils';\nimport { makeBoundingBox } from '../views/utils';\n\nfunction getPosition(boundingBox, position, length) {\n  const viewLength = boundingBox[2][0] - boundingBox[0][0];\n  switch (position) {\n    case 'bottom-right': {\n      const yCoord =\n        boundingBox[2][1] - (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = boundingBox[2][0] - viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    case 'top-right': {\n      const yCoord = (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = boundingBox[2][0] - viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    case 'top-left': {\n      const yCoord = (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    case 'bottom-left': {\n      const yCoord =\n        boundingBox[2][1] - (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    default: {\n      throw new Error(`Position ${position} not found`);\n    }\n  }\n}\n\nconst defaultProps = {\n  pickable: true,\n  viewState: {\n    type: 'object',\n    value: { zoom: 0, target: [0, 0, 0] },\n    compare: true\n  },\n  unit: { type: 'string', value: '', compare: true },\n  size: { type: 'number', value: 1, compare: true },\n  position: { type: 'string', value: 'bottom-right', compare: true },\n  length: { type: 'number', value: 0.085, compare: true }\n};\n\n/**\n * This layer creates a scale bar using three LineLayers and a TextLayer.\n * Looks like: |--------| made up of three LineLayers (left tick, right tick, center length bar) and a bottom TextLayer\n * @param {Object} props\n * @param {String} props.unit Physical unit size per pixel at full resolution.\n * @param {Number} props.size Physical size of a pixel.\n * @param {Array} props.boundingBox Boudning box of the view in which this should render.\n * @param {id} props.id Id from the parent layer.\n * @param {ViewState} props.viewState The current viewState for the desired view.  We cannot internally use this.context.viewport because it is one frame behind:\n * https://github.com/visgl/deck.gl/issues/4504\n * @param {ViewState} props.length Value from 0 to 1 representing the portion of the view to be used for the length part of the scale bar.\n */\nexport default class ScaleBarLayer extends CompositeLayer {\n  renderLayers() {\n    const { id, unit, size, position, viewState, length } = this.props;\n    const boundingBox = makeBoundingBox(viewState);\n    const { zoom } = viewState;\n    const viewLength = boundingBox[2][0] - boundingBox[0][0];\n    const barLength = viewLength * 0.05;\n    // This is a good heuristic for stopping the bar tick marks from getting too small\n    // and/or the text squishing up into the bar.\n    const barHeight = Math.max(\n      2 ** (-zoom + 1.5),\n      (boundingBox[2][1] - boundingBox[0][1]) * 0.007\n    );\n    const numUnits = barLength * size;\n    const [yCoord, xLeftCoord] = getPosition(boundingBox, position, length);\n    const lengthBar = new LineLayer({\n      id: `scale-bar-length-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: [\n        [\n          [xLeftCoord, yCoord],\n          [xLeftCoord + barLength, yCoord]\n        ]\n      ],\n      getSourcePosition: d => d[0],\n      getTargetPosition: d => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const tickBoundsLeft = new LineLayer({\n      id: `scale-bar-height-left-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: [\n        [\n          [xLeftCoord, yCoord - barHeight],\n          [xLeftCoord, yCoord + barHeight]\n        ]\n      ],\n      getSourcePosition: d => d[0],\n      getTargetPosition: d => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const tickBoundsRight = new LineLayer({\n      id: `scale-bar-height-right-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: [\n        [\n          [xLeftCoord + barLength, yCoord - barHeight],\n          [xLeftCoord + barLength, yCoord + barHeight]\n        ]\n      ],\n      getSourcePosition: d => d[0],\n      getTargetPosition: d => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const textLayer = new TextLayer({\n      id: `units-label-layer-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: [\n        {\n          text: String(numUnits).slice(0, 5) + unit,\n          position: [xLeftCoord + barLength * 0.5, yCoord + barHeight * 4]\n        }\n      ],\n      getColor: [220, 220, 220, 255],\n      getSize: 11,\n      sizeUnits: 'meters',\n      sizeScale: 2 ** -zoom,\n      characterSet: [...unit.split(''), ...range(10).map(i => String(i)), '.']\n    });\n    return [lengthBar, tickBoundsLeft, tickBoundsRight, textLayer];\n  }\n}\n\nScaleBarLayer.layerName = 'ScaleBarLayer';\nScaleBarLayer.defaultProps = defaultProps;\n","import React, { PureComponent } from 'react';\nimport DeckGL from '@deck.gl/react';\nimport { getVivId } from '../views/utils';\n\n// Taken from https://stackoverflow.com/a/31732310/8060591\nfunction isSafari() {\n  return (\n    navigator.vendor &&\n    navigator.vendor.indexOf('Apple') > -1 &&\n    navigator.userAgent &&\n    navigator.userAgent.indexOf('CriOS') === -1 &&\n    navigator.userAgent.indexOf('FxiOS') === -1\n  );\n}\n\n/**\n * This component handles rendering the various views within the DeckGL contenxt.\n * @param {Object} props\n * @param {Array} props.layerProps  Props for the layers in each view.\n * @param {Array} props.randomize Whether or not to randomize which view goes first (for dynamic rendering).\n * @param {VivView} props.views Various VivViews to render.\n * */\nexport default class VivViewer extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewStates: {}\n    };\n    const { viewStates } = this.state;\n    const { views, viewStateHook } = this.props;\n    views.forEach(view => {\n      viewStates[view.id] = view.filterViewState({\n        viewState: view.initialViewState\n      });\n    });\n    this._onViewStateChange = this._onViewStateChange.bind(this);\n    this._viewStateHook = viewStateHook;\n    this.layerFilter = this.layerFilter.bind(this);\n    this.onHover = this.onHover.bind(this);\n    this.deck = React.createRef();\n    const { hoverHooks } = this.props;\n    const { initVivView } = hoverHooks;\n    if (initVivView) {\n      initVivView({deck: this.deck});\n    }\n  }\n\n  /**\n   * This prevents only the `draw` call of a layer from firing,\n   * but not other layer lifecycle methods.  Nonetheless, it is\n   * still useful.\n   * @param {Layer} layer Layer being updated.\n   * @param {Viewport} viewport Viewport being updated.\n   * @returns {boolean} Whether or not this layer should be drawn in this viewport.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  layerFilter({ layer, viewport }) {\n    return layer.id.includes(getVivId(viewport.id));\n  }\n\n  /**\n   * This updates the viewState as a callback to the viewport changing in DeckGL\n   * (hence the need for storing viewState in state).\n   */\n  _onViewStateChange({ viewId, viewState, oldViewState }) {\n    // Save the view state and trigger rerender.\n    const { views } = this.props;\n    this.setState(prevState => {\n      const viewStates = {};\n      views.forEach(view => {\n        const currentViewState = prevState.viewStates[view.id];\n        viewStates[view.id] = view.filterViewState({\n          viewState: { ...viewState, id: viewId },\n          oldViewState,\n          currentViewState\n        });\n      });\n      if(this._viewStateHook){\n        this._viewStateHook(viewId, viewState, oldViewState)\n      }\n      return { viewStates };\n    });\n  }\n\n  /**\n   * This updates the viewStates' height and width with the newest height and\n   * width on any call where the viewStates changes (i.e resize events),\n   * using the previous state (falling back on the view's initial state) for target x and y, zoom level etc.\n   */\n  static getDerivedStateFromProps(props, prevState) {\n    const { views } = props;\n    // Update internal viewState on view changes as well as height and width changes.\n    // Maybe we should add x/y too?\n    if (\n      views.some(\n        view =>\n          !prevState.viewStates[view.id] ||\n          view.initialViewState.height !==\n            prevState.viewStates[view.id].height ||\n          view.initialViewState.width !== prevState.viewStates[view.id].width\n      )\n    ) {\n      const viewStates = {};\n      views.forEach(view => {\n        const { height, width } = view.initialViewState;\n        const currentViewState = prevState.viewStates[view.id];\n        viewStates[view.id] = view.filterViewState({\n          viewState: {\n            ...(currentViewState || view.initialViewState),\n            height,\n            width,\n            id: view.id\n          }\n        });\n      });\n      return { viewStates };\n    }\n    return prevState;\n  }\n\n  // eslint-disable-next-line consistent-return\n  onHover({ sourceLayer, coordinate, layer }) {\n    if (!coordinate) {\n      return null;\n    }\n    const { hoverHooks } = this.props;\n    if (!hoverHooks) {\n      return null;\n    }\n    const { handleValue } = hoverHooks;\n    if (!handleValue) {\n      return null;\n    }\n    const { channelData, bounds } = sourceLayer.props;\n    if (!channelData) {\n      return null;\n    }\n    const { data, width } = channelData;\n    if (!data) {\n      return null;\n    }\n    let dataCoords;\n    // This is currently a work-around for: https://github.com/visgl/deck.gl/pull/4526.\n    // Once this is fixed we can make something more robust.\n    if (sourceLayer.id.includes('Background')) {\n      const { numLevels } = layer.props.loader;\n      // The zoomed out layer needs to use the fixed zoom at which it is rendered (i.e numLevels - 1).\n      const layerZoomScale = Math.max(1, 2 ** Math.floor(numLevels - 1));\n      dataCoords = [\n        Math.floor((coordinate[0] - bounds[0]) / layerZoomScale),\n        Math.floor((coordinate[1] - bounds[3]) / layerZoomScale)\n      ];\n    } else {\n      // Using floor means that as we zoom out, we are scaling by the zoom just passed, not the one coming.\n      const { zoom } = layer.context.viewport;\n      const layerZoomScale = Math.max(1, 2 ** Math.floor(-zoom));\n      dataCoords = [\n        Math.floor((coordinate[0] - bounds[0]) / layerZoomScale),\n        Math.floor((coordinate[1] - bounds[3]) / layerZoomScale)\n      ];\n    }\n    const hoverData = data.map(d => d[dataCoords[1] * width + dataCoords[0]]);\n    handleValue(hoverData);\n  }\n\n  /**\n   * This renders the layers in the DeckGL context.\n   */\n  _renderLayers() {\n    const { onHover } = this;\n    const { viewStates } = this.state;\n    const { views, layerProps } = this.props;\n    return views.map((view, i) =>\n      view.getLayers({\n        viewStates,\n        props: {\n          ...layerProps[i],\n          onHover\n        }\n      })\n    );\n  }\n\n  render() {\n    /* eslint-disable react/destructuring-assignment */\n    const { views, randomize } = this.props;\n    const { viewStates } = this.state;\n    const deckGLViews = views.map(view => view.getDeckGlView());\n    // DeckGL seems to use the first view more than the second for updates\n    // so this forces it to use the others more evenly.  This isn't perfect,\n    // but I am not sure what else to do.  The DeckGL render hooks don't help,\n    // but maybe useEffect() would help?  I couldn't work it out as\n    // The issue is that I'm not sure how React would distinguish between forced updates\n    // from permuting the views array and \"real\" updates like zoom/pan.\n    // I tried keeping a counter but I couldn't figure out resetting it\n    // without triggering a re-render.\n    if (randomize) {\n      const random = Math.random();\n      const holdFirstElement = deckGLViews[0];\n      // weight has to go to 1.5 because we use Math.round().\n      const randomWieghted = random * 1.49;\n      const randomizedIndex = Math.round(randomWieghted * (views.length - 1));\n      deckGLViews[0] = deckGLViews[randomizedIndex];\n      deckGLViews[randomizedIndex] = holdFirstElement;\n    }\n    return !isSafari() ? (\n      <DeckGL\n        ref={this.deck}\n        glOptions={{ webgl2: true }}\n        layerFilter={this.layerFilter}\n        layers={this._renderLayers()}\n        onViewStateChange={this._onViewStateChange}\n        views={deckGLViews}\n        viewState={viewStates}\n        getCursor={({ isDragging }) => {\n          return isDragging ? 'grabbing' : 'crosshair';\n        }}\n      />\n    ) : (\n      <div className=\"viv-error\">\n        <p>\n          Safari does not support WebGL2, which Viv requires. Please use Chrome\n          or Firefox.\n        </p>\n      </div>\n    );\n    /* eslint-disable react/destructuring-assignment */\n  }\n}\n","// eslint-disable-next-line max-classes-per-file\nimport { OrthographicView } from '@deck.gl/core';\n\n/**\n * This class generates a layer and a view for use in the VivViewer\n * @param {Object} args\n * @param {Object} args.viewState ViewState object\n * @param {string} args.id Id for the current view\n * @param {number} args.x X (top-left) location on the screen for the current view\n * @param {number} args.y Y (top-left) location on the screen for the current view\n */\nexport default class VivView {\n  constructor({ initialViewState, x = 0, y = 0, controller = true }) {\n    const { height, width, id } = initialViewState;\n    this.width = width;\n    this.height = height;\n    this.initialViewState = initialViewState;\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.controller = controller;\n  }\n\n  /**\n   * Create a DeckGL view based on this class.\n   * @returns {View} The DeckGL View for this class.\n   */\n  getDeckGlView() {\n    const { height, width, id, x, y, controller } = this;\n    return new OrthographicView({\n      id,\n      controller,\n      height,\n      width,\n      x,\n      y\n    });\n  }\n\n  /**\n   * Create a viewState for this class, checking the id to make sure this class and veiwState match.\n   * @param {Object} args\n   * @param {ViewState} args.ViewState ViewState object.\n   * @returns {ViewState} ViewState for this class (or null by default if the ids do not match).\n   */\n  filterViewState({ viewState }) {\n    const { id } = this;\n    return viewState.id === id ? viewState : null;\n  }\n\n  /**\n   * Create a layer for this instance.\n   * @param {Object} args\n   * @param {ViewState} args.viewStates ViewStates for all current views.\n   * @param {number} args.props Props for this instance.\n   * @returns {Layer} Instance of a layer.\n   */\n  // eslint-disable-next-line class-methods-use-this,no-unused-vars\n  getLayers({ viewStates, props }) {}\n}\n","import { VivViewerLayer, StaticImageLayer, ScaleBarLayer } from '../layers';\nimport VivView from './VivView';\nimport { getVivId } from './utils';\n\n/**\n * This class generates a VivViewerLayer and a view for use in the VivViewer as a detailed view.\n * */\nexport default class DetailView extends VivView {\n  getLayers({ props, viewStates }) {\n    const { loader } = props;\n    const { id } = this;\n    const layerViewState = viewStates[id];\n    const layers = [];\n\n    const detailLayer = loader.isPyramid\n      ? new VivViewerLayer(props, {\n          id: `${loader.type}${getVivId(id)}`,\n          viewportId: id\n        })\n      : new StaticImageLayer(props, {\n          id: `${loader.type}${getVivId(id)}`,\n          viewportId: id\n        });\n    layers.push(detailLayer);\n\n    const { physicalSizes } = loader;\n    if (physicalSizes) {\n      const { x } = physicalSizes;\n      const { unit, value } = x;\n      if (unit && value) {\n        layers.push(\n          new ScaleBarLayer({\n            id: getVivId(id),\n            loader,\n            unit,\n            size: value,\n            viewState: layerViewState\n          })\n        );\n      }\n    }\n\n    return layers;\n  }\n}\n","import { OrthographicView } from '@deck.gl/core';\nimport VivView from './VivView';\nimport { OverviewLayer } from '../layers';\nimport { makeBoundingBox, getVivId } from './utils';\n\n/**\n * This class generates a OverviewLayer and a view for use in the VivViewer as an overview to a Detailview (they must be used in conjection)\n * @param {Object} args\n * @param {Object} args.viewState ViewState object.\n * @param {Object} props.loader Loader to be used for inferring zoom level and fetching data.  It must have the properies `dtype`, `numLevels`, and `tileSize` and implement `getTile` and `getRaster`.\n * @param {number} args.detailHeight Height of the detail view.\n * @param {number} args.detailWidth Width of the detail view.\n * @param {number} args.scale Scale of this viewport relative to the detail. Default is .2.\n * @param {number} args.margin Margin to be offset from the the corner of the other viewport. Default is 25.\n * @param {string} args.position Location of the viewport - one of \"bottom-right\", \"top-right\", \"top-left\", \"bottom-left.\"  Default is 'bottom-right'.\n * @param {number} args.minimumWidth Absolute lower bound for how small the viewport should scale. Default is 150.\n * @param {number} args.maximumWidth Absolute upper bound for how large the viewport should scale. Default is 350.\n * */\nexport default class OverviewView extends VivView {\n  constructor({\n    initialViewState,\n    loader,\n    detailHeight,\n    detailWidth,\n    scale = 0.2,\n    margin = 25,\n    position = 'bottom-right',\n    minimumWidth = 150,\n    maximumWidth = 350\n  }) {\n    super({ initialViewState });\n    this.margin = margin;\n    this.loader = loader;\n    this.position = position;\n    this.detailHeight = detailHeight;\n    this.detailWidth = detailWidth;\n    this._setHeightWidthScale({\n      detailWidth,\n      scale,\n      minimumWidth,\n      maximumWidth\n    });\n    this._setXY();\n  }\n\n  /**\n   * Set the image-pixel scale and height and width based on detail view.\n   */\n  _setHeightWidthScale({ detailWidth, scale, minimumWidth, maximumWidth }) {\n    const { loader } = this;\n    const { numLevels } = loader;\n    const { width: rasterWidth, height: rasterHeight } = loader.getRasterSize({\n      z: 0\n    });\n    const heightWidthRatio = rasterHeight / rasterWidth;\n    this.width = Math.min(\n      maximumWidth,\n      Math.max(detailWidth * scale, minimumWidth)\n    );\n    this.height = this.width * heightWidthRatio;\n    this.scale = (2 ** (numLevels - 1) / rasterWidth) * this.width;\n    this._imageWidth = rasterWidth;\n    this._imageHeight = rasterHeight;\n  }\n\n  /**\n   * Set the x and y (top left corner) of this overview relative to the detail.\n   */\n  _setXY() {\n    const { height, width, margin, position, detailWidth, detailHeight } = this;\n    switch (position) {\n      case 'bottom-right': {\n        this.x = detailWidth - width - margin;\n        this.y = detailHeight - height - margin;\n        break;\n      }\n      case 'top-right': {\n        this.x = detailWidth - width - margin;\n        this.y = margin;\n        break;\n      }\n      case 'top-left': {\n        this.x = margin;\n        this.y = margin;\n        break;\n      }\n      case 'bottom-left': {\n        this.x = margin;\n        this.y = detailHeight - height - margin;\n        break;\n      }\n      default: {\n        throw new Error(\n          `overviewLocation prop needs to be one of ['bottom-right', 'top-right', 'top-left', 'bottom-left']`\n        );\n      }\n    }\n  }\n\n  getDeckGlView() {\n    const { x, y, id, height, width } = this;\n    return new OrthographicView({\n      id,\n      controller: false,\n      height,\n      width,\n      x,\n      y,\n      clear: true\n    });\n  }\n\n  filterViewState({ viewState }) {\n    // Scale the view as the overviewScale changes with screen resizing - basically, do not react to any view state changes.\n    const {\n      _imageWidth,\n      _imageHeight,\n      scale,\n      id,\n      loader,\n      height,\n      width\n    } = this;\n    const { numLevels } = loader;\n    return {\n      ...viewState,\n      height,\n      width,\n      id,\n      target: [(_imageWidth * scale) / 2, (_imageHeight * scale) / 2, 0],\n      zoom: -(numLevels - 1)\n    };\n  }\n\n  getLayers({ viewStates, props }) {\n    const { detail } = viewStates;\n    if (!detail) {\n      throw new Error('Overview requires a viewState with id detail');\n    }\n    const { id, scale, loader } = this;\n    // Scale the bounding box.\n    const boundingBox = makeBoundingBox(detail).map(coords =>\n      coords.map(e => e * scale)\n    );\n    const overviewLayer = new OverviewLayer(props, {\n      id: `${loader.type}${getVivId(id)}`,\n      boundingBox,\n      overviewScale: scale\n    });\n    return [overviewLayer];\n  }\n}\n","import { PolygonLayer } from '@deck.gl/layers';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core';\n\nimport { VivViewerLayer, StaticImageLayer, ScaleBarLayer } from '../layers';\nimport VivView from './VivView';\nimport { getVivId, makeBoundingBox } from './utils';\n/**\n * This class generates a VivViewerLayer and a view for use in the SideBySideViewer.\n * It is linked with its other views as controlled by `linkedIds`, `zoomLock`, and `panLock` parameters.\n * @param {Object} args\n * @param {Object} args.viewState ViewState object\n * @param {string} args.id Id for the current view\n * @param {number} args.x X (top-left) location on the screen for the current view\n * @param {number} args.y Y (top-left) location on the screen for the current view\n * @param {Array} args.linkedIds Ids of the other views to which this could be locked via zoom/pan.\n * @param {Boolean} args.panLock Whether or not we lock pan.\n * @param {Boolean} args.zoomLock Whether or not we lock zoom.\n * @param {Array} args.viewportOutlineColor Outline color of the border (default [255, 255, 255])\n * @param {number} args.viewportOutlineWidth Default outline width (default 10)\n * */\nexport default class SideBySideView extends VivView {\n  constructor({\n    initialViewState,\n    x,\n    y,\n    linkedIds = [],\n    panLock = true,\n    zoomLock = true,\n    viewportOutlineColor = [255, 255, 255],\n    viewportOutlineWidth = 10\n  }) {\n    super({ initialViewState, x, y });\n    this.linkedIds = linkedIds;\n    this.panLock = panLock;\n    this.zoomLock = zoomLock;\n    this.viewportOutlineColor = viewportOutlineColor;\n    this.viewportOutlineWidth = viewportOutlineWidth;\n  }\n\n  filterViewState({ viewState, oldViewState, currentViewState }) {\n    const { id: viewStateId } = viewState;\n    const { id, linkedIds, panLock, zoomLock } = this;\n    if (\n      oldViewState &&\n      linkedIds.indexOf(viewStateId) !== -1 &&\n      (zoomLock || panLock)\n    ) {\n      const thisViewState = {\n        height: currentViewState.height,\n        width: currentViewState.width,\n        target: [],\n        zoom: null\n      };\n      const [currentX, currentY] = currentViewState.target;\n      if (zoomLock) {\n        const dZoom = viewState.zoom - oldViewState.zoom;\n        thisViewState.zoom = currentViewState.zoom + dZoom;\n      } else {\n        thisViewState.zoom = currentViewState.zoom;\n      }\n      if (panLock) {\n        const [oldX, oldY] = oldViewState.target;\n        const [newX, newY] = viewState.target;\n        const dx = newX - oldX;\n        const dy = newY - oldY;\n        thisViewState.target.push(currentX + dx);\n        thisViewState.target.push(currentY + dy);\n      } else {\n        thisViewState.target.push(currentX);\n        thisViewState.target.push(currentY);\n      }\n      return {\n        id,\n        target: thisViewState.target,\n        zoom: thisViewState.zoom,\n        height: thisViewState.height,\n        width: thisViewState.width\n      };\n    }\n    return viewState.id === id\n      ? {\n          id,\n          target: viewState.target,\n          zoom: viewState.zoom,\n          height: viewState.height,\n          width: viewState.width\n        }\n      : {\n          id,\n          target: currentViewState.target,\n          zoom: currentViewState.zoom,\n          height: currentViewState.height,\n          width: currentViewState.width\n        };\n  }\n\n  getLayers({ props, viewStates }) {\n    const { loader } = props;\n    const { id, viewportOutlineColor, viewportOutlineWidth } = this;\n    const layerViewState = viewStates[id];\n    const boundingBox = makeBoundingBox(layerViewState);\n    const layers = [];\n\n    const detailLayer = loader.isPyramid\n      ? new VivViewerLayer(props, {\n          id: `${loader.type}${getVivId(id)}`,\n          viewportId: id\n        })\n      : new StaticImageLayer(props, {\n          id: `${loader.type}${getVivId(id)}`,\n          viewportId: id\n        });\n    layers.push(detailLayer);\n\n    const border = new PolygonLayer({\n      id: `viewport-outline-${loader.type}${getVivId(id)}`,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: [boundingBox],\n      getPolygon: f => f,\n      filled: false,\n      stroked: true,\n      getLineColor: viewportOutlineColor,\n      getLineWidth: viewportOutlineWidth * 2 ** -layerViewState.zoom\n    });\n    layers.push(border);\n\n    const { physicalSizes } = loader;\n    if (physicalSizes) {\n      const { x } = physicalSizes;\n      const { unit, value } = x;\n      if (unit && value) {\n        layers.push(\n          new ScaleBarLayer({\n            id: getVivId(id),\n            loader,\n            unit,\n            size: value,\n            viewState: layerViewState\n          })\n        );\n      }\n    }\n\n    return layers;\n  }\n}\n","import React from 'react';\nimport VivViewer from './VivViewer';\nimport { DetailView, OverviewView } from '../views';\n\n/**\n * This component provides a component for an overview-detail VivViewer of an image (i.e picture-in-picture).\n * @param {Object} props\n * @param {Array} props.sliderValues List of [begin, end] values to control each channel's ramp function.\n * @param {Array} props.colorValues List of [r, g, b] values for each channel.\n * @param {Array} props.channelIsOn List of boolean values for each channel for whether or not it is visible.\n * @param {string} props.colormap String indicating a colormap (default: '').  The full list of options is here: https://github.com/glslify/glsl-colormap#glsl-colormap\n * @param {Object} props.loader Loader to be used for fetching data.  It must have the properies `dtype`, `numLevels`, and `tileSize` and implement `getTile` and `getRaster`.\n * @param {Array} props.loaderSelection Selection to be used for fetching data.\n * @param {Object} props.overview Allows you to pass settings into the OverviewView: { scale, margin, position, minimumWidth, maximumWidth,\n * boundingBoxColor, boundingBoxOutlineWidth, viewportOutlineColor, viewportOutlineWidth}.\n * @param {Boolean} props.overviewOn Whether or not to show the OverviewView.\n * @param {Object} props.hoverHooks Object including the allowable hooks - right now only accepting a function with key handleValue like { handleValue: (valueArray) => {} }\n */\n\nconst PictureInPictureViewer = props => {\n  const {\n    loader,\n    sliderValues,\n    colorValues,\n    channelIsOn,\n    initialViewState,\n    colormap,\n    overview,\n    overviewOn,\n    loaderSelection,\n    hoverHooks,\n    viewStateHook,\n    controller,\n  } = props;\n  const detailViewState = { ...initialViewState, id: 'detail' };\n  const detailView = new DetailView({ initialViewState: detailViewState, controller });\n  const layerConfig = {\n    loader,\n    sliderValues,\n    colorValues,\n    channelIsOn,\n    loaderSelection,\n    colormap\n  };\n  const views = [detailView];\n  const layerProps = [layerConfig];\n  if (overviewOn && loader) {\n    const overviewViewState = { ...initialViewState, id: 'overview' };\n    const overviewView = new OverviewView({\n      initialViewState: overviewViewState,\n      loader,\n      detailHeight: initialViewState.height,\n      detailWidth: initialViewState.width,\n      ...overview\n    });\n    views.push(overviewView);\n    layerProps.push(layerConfig);\n  }\n  if (!loader) return null;\n  return (\n    <VivViewer viewStateHook={viewStateHook} layerProps={layerProps} views={views} hoverHooks={hoverHooks} />\n  );\n};\n\nexport default PictureInPictureViewer;\n","import React from 'react';\nimport VivViewer from './VivViewer';\nimport { SideBySideView } from '../views';\n\n/**\n * This component provides a side-by-side VivViewer with linked zoom/pan.\n * @param {Object} props\n * @param {Array} props.sliderValues List of [begin, end] values to control each channel's ramp function.\n * @param {Array} props.colorValues List of [r, g, b] values for each channel.\n * @param {Array} props.channelIsOn List of boolean values for each channel for whether or not it is visible.\n * @param {string} props.colormap String indicating a colormap (default: '').  The full list of options is here: https://github.com/glslify/glsl-colormap#glsl-colormap\n * @param {Object} props.loader Loader to be used for fetching data.  It must have the properies `dtype`, `numLevels`, and `tileSize` and implement `getTile` and `getRaster`.\n * @param {Array} props.loaderSelection Selection to be used for fetching data.\n * @param {Boolean} props.zoomLock Whether or not lock the zooms of the two views.\n * @param {Boolean} props.panLock Whether or not lock the pans of the two views.\n */\nconst SideBySideViewer = props => {\n  const {\n    loader,\n    sliderValues,\n    colorValues,\n    channelIsOn,\n    initialViewState,\n    colormap,\n    panLock,\n    loaderSelection,\n    zoomLock\n  } = props;\n  const detailViewLeft = new SideBySideView({\n    initialViewState: { ...initialViewState, id: 'left' },\n    linkedIds: ['right'],\n    panLock,\n    zoomLock\n  });\n  const detailViewRight = new SideBySideView({\n    initialViewState: { ...initialViewState, id: 'right' },\n    x: initialViewState.width,\n    linkedIds: ['left'],\n    panLock,\n    zoomLock\n  });\n  const layerConfig = {\n    loader,\n    sliderValues,\n    colorValues,\n    channelIsOn,\n    loaderSelection,\n    colormap\n  };\n  const views = [detailViewRight, detailViewLeft];\n  const layerProps = [layerConfig, layerConfig];\n  return loader ? (\n    <VivViewer layerProps={layerProps} views={views} randomize />\n  ) : null;\n};\n\nexport default SideBySideViewer;\n","export const fieldTagNames = {\n  // TIFF Baseline\n  0x013B: 'Artist',\n  0x0102: 'BitsPerSample',\n  0x0109: 'CellLength',\n  0x0108: 'CellWidth',\n  0x0140: 'ColorMap',\n  0x0103: 'Compression',\n  0x8298: 'Copyright',\n  0x0132: 'DateTime',\n  0x0152: 'ExtraSamples',\n  0x010A: 'FillOrder',\n  0x0121: 'FreeByteCounts',\n  0x0120: 'FreeOffsets',\n  0x0123: 'GrayResponseCurve',\n  0x0122: 'GrayResponseUnit',\n  0x013C: 'HostComputer',\n  0x010E: 'ImageDescription',\n  0x0101: 'ImageLength',\n  0x0100: 'ImageWidth',\n  0x010F: 'Make',\n  0x0119: 'MaxSampleValue',\n  0x0118: 'MinSampleValue',\n  0x0110: 'Model',\n  0x00FE: 'NewSubfileType',\n  0x0112: 'Orientation',\n  0x0106: 'PhotometricInterpretation',\n  0x011C: 'PlanarConfiguration',\n  0x0128: 'ResolutionUnit',\n  0x0116: 'RowsPerStrip',\n  0x0115: 'SamplesPerPixel',\n  0x0131: 'Software',\n  0x0117: 'StripByteCounts',\n  0x0111: 'StripOffsets',\n  0x00FF: 'SubfileType',\n  0x0107: 'Threshholding',\n  0x011A: 'XResolution',\n  0x011B: 'YResolution',\n\n  // TIFF Extended\n  0x0146: 'BadFaxLines',\n  0x0147: 'CleanFaxData',\n  0x0157: 'ClipPath',\n  0x0148: 'ConsecutiveBadFaxLines',\n  0x01B1: 'Decode',\n  0x01B2: 'DefaultImageColor',\n  0x010D: 'DocumentName',\n  0x0150: 'DotRange',\n  0x0141: 'HalftoneHints',\n  0x015A: 'Indexed',\n  0x015B: 'JPEGTables',\n  0x011D: 'PageName',\n  0x0129: 'PageNumber',\n  0x013D: 'Predictor',\n  0x013F: 'PrimaryChromaticities',\n  0x0214: 'ReferenceBlackWhite',\n  0x0153: 'SampleFormat',\n  0x0154: 'SMinSampleValue',\n  0x0155: 'SMaxSampleValue',\n  0x022F: 'StripRowCounts',\n  0x014A: 'SubIFDs',\n  0x0124: 'T4Options',\n  0x0125: 'T6Options',\n  0x0145: 'TileByteCounts',\n  0x0143: 'TileLength',\n  0x0144: 'TileOffsets',\n  0x0142: 'TileWidth',\n  0x012D: 'TransferFunction',\n  0x013E: 'WhitePoint',\n  0x0158: 'XClipPathUnits',\n  0x011E: 'XPosition',\n  0x0211: 'YCbCrCoefficients',\n  0x0213: 'YCbCrPositioning',\n  0x0212: 'YCbCrSubSampling',\n  0x0159: 'YClipPathUnits',\n  0x011F: 'YPosition',\n\n  // EXIF\n  0x9202: 'ApertureValue',\n  0xA001: 'ColorSpace',\n  0x9004: 'DateTimeDigitized',\n  0x9003: 'DateTimeOriginal',\n  0x8769: 'Exif IFD',\n  0x9000: 'ExifVersion',\n  0x829A: 'ExposureTime',\n  0xA300: 'FileSource',\n  0x9209: 'Flash',\n  0xA000: 'FlashpixVersion',\n  0x829D: 'FNumber',\n  0xA420: 'ImageUniqueID',\n  0x9208: 'LightSource',\n  0x927C: 'MakerNote',\n  0x9201: 'ShutterSpeedValue',\n  0x9286: 'UserComment',\n\n  // IPTC\n  0x83BB: 'IPTC',\n\n  // ICC\n  0x8773: 'ICC Profile',\n\n  // XMP\n  0x02BC: 'XMP',\n\n  // GDAL\n  0xA480: 'GDAL_METADATA',\n  0xA481: 'GDAL_NODATA',\n\n  // Photoshop\n  0x8649: 'Photoshop',\n\n  // GeoTiff\n  0x830E: 'ModelPixelScale',\n  0x8482: 'ModelTiepoint',\n  0x85D8: 'ModelTransformation',\n  0x87AF: 'GeoKeyDirectory',\n  0x87B0: 'GeoDoubleParams',\n  0x87B1: 'GeoAsciiParams',\n};\n\nexport const fieldTags = {};\nfor (const key in fieldTagNames) {\n  if (fieldTagNames.hasOwnProperty(key)) {\n    fieldTags[fieldTagNames[key]] = parseInt(key, 10);\n  }\n}\n\nexport const fieldTagTypes = {\n  256: 'SHORT',\n  257: 'SHORT',\n  258: 'SHORT',\n  259: 'SHORT',\n  262: 'SHORT',\n  273: 'LONG',\n  274: 'SHORT',\n  277: 'SHORT',\n  278: 'LONG',\n  279: 'LONG',\n  282: 'RATIONAL',\n  283: 'RATIONAL',\n  284: 'SHORT',\n  286: 'SHORT',\n  287: 'RATIONAL',\n  296: 'SHORT',\n  305: 'ASCII',\n  306: 'ASCII',\n  338: 'SHORT',\n  339: 'SHORT',\n  513: 'LONG',\n  514: 'LONG',\n  1024: 'SHORT',\n  1025: 'SHORT',\n  2048: 'SHORT',\n  2049: 'ASCII',\n  33550: 'DOUBLE',\n  33922: 'DOUBLE',\n  34665: 'LONG',\n  34735: 'SHORT',\n  34737: 'ASCII',\n  42113: 'ASCII',\n};\n\nexport const arrayFields = [\n  fieldTags.BitsPerSample,\n  fieldTags.ExtraSamples,\n  fieldTags.SampleFormat,\n  fieldTags.StripByteCounts,\n  fieldTags.StripOffsets,\n  fieldTags.StripRowCounts,\n  fieldTags.TileByteCounts,\n  fieldTags.TileOffsets,\n];\n\nexport const fieldTypeNames = {\n  0x0001: 'BYTE',\n  0x0002: 'ASCII',\n  0x0003: 'SHORT',\n  0x0004: 'LONG',\n  0x0005: 'RATIONAL',\n  0x0006: 'SBYTE',\n  0x0007: 'UNDEFINED',\n  0x0008: 'SSHORT',\n  0x0009: 'SLONG',\n  0x000A: 'SRATIONAL',\n  0x000B: 'FLOAT',\n  0x000C: 'DOUBLE',\n  // IFD offset, suggested by https://owl.phy.queensu.ca/~phil/exiftool/standards.html\n  0x000D: 'IFD',\n  // introduced by BigTIFF\n  0x0010: 'LONG8',\n  0x0011: 'SLONG8',\n  0x0012: 'IFD8',\n};\n\nexport const fieldTypes = {};\nfor (const key in fieldTypeNames) {\n  if (fieldTypeNames.hasOwnProperty(key)) {\n    fieldTypes[fieldTypeNames[key]] = parseInt(key, 10);\n  }\n}\n\nexport const photometricInterpretations = {\n  WhiteIsZero: 0,\n  BlackIsZero: 1,\n  RGB: 2,\n  Palette: 3,\n  TransparencyMask: 4,\n  CMYK: 5,\n  YCbCr: 6,\n\n  CIELab: 8,\n  ICCLab: 9,\n};\n\nexport const ExtraSamplesValues = {\n  Unspecified: 0,\n  Assocalpha: 1,\n  Unassalpha: 2,\n};\n\n\nexport const geoKeyNames = {\n  1024: 'GTModelTypeGeoKey',\n  1025: 'GTRasterTypeGeoKey',\n  1026: 'GTCitationGeoKey',\n  2048: 'GeographicTypeGeoKey',\n  2049: 'GeogCitationGeoKey',\n  2050: 'GeogGeodeticDatumGeoKey',\n  2051: 'GeogPrimeMeridianGeoKey',\n  2052: 'GeogLinearUnitsGeoKey',\n  2053: 'GeogLinearUnitSizeGeoKey',\n  2054: 'GeogAngularUnitsGeoKey',\n  2055: 'GeogAngularUnitSizeGeoKey',\n  2056: 'GeogEllipsoidGeoKey',\n  2057: 'GeogSemiMajorAxisGeoKey',\n  2058: 'GeogSemiMinorAxisGeoKey',\n  2059: 'GeogInvFlatteningGeoKey',\n  2060: 'GeogAzimuthUnitsGeoKey',\n  2061: 'GeogPrimeMeridianLongGeoKey',\n  2062: 'GeogTOWGS84GeoKey',\n  3072: 'ProjectedCSTypeGeoKey',\n  3073: 'PCSCitationGeoKey',\n  3074: 'ProjectionGeoKey',\n  3075: 'ProjCoordTransGeoKey',\n  3076: 'ProjLinearUnitsGeoKey',\n  3077: 'ProjLinearUnitSizeGeoKey',\n  3078: 'ProjStdParallel1GeoKey',\n  3079: 'ProjStdParallel2GeoKey',\n  3080: 'ProjNatOriginLongGeoKey',\n  3081: 'ProjNatOriginLatGeoKey',\n  3082: 'ProjFalseEastingGeoKey',\n  3083: 'ProjFalseNorthingGeoKey',\n  3084: 'ProjFalseOriginLongGeoKey',\n  3085: 'ProjFalseOriginLatGeoKey',\n  3086: 'ProjFalseOriginEastingGeoKey',\n  3087: 'ProjFalseOriginNorthingGeoKey',\n  3088: 'ProjCenterLongGeoKey',\n  3089: 'ProjCenterLatGeoKey',\n  3090: 'ProjCenterEastingGeoKey',\n  3091: 'ProjCenterNorthingGeoKey',\n  3092: 'ProjScaleAtNatOriginGeoKey',\n  3093: 'ProjScaleAtCenterGeoKey',\n  3094: 'ProjAzimuthAngleGeoKey',\n  3095: 'ProjStraightVertPoleLongGeoKey',\n  3096: 'ProjRectifiedGridAngleGeoKey',\n  4096: 'VerticalCSTypeGeoKey',\n  4097: 'VerticalCitationGeoKey',\n  4098: 'VerticalDatumGeoKey',\n  4099: 'VerticalUnitsGeoKey',\n};\n\nexport const geoKeys = {};\nfor (const key in geoKeyNames) {\n  if (geoKeyNames.hasOwnProperty(key)) {\n    geoKeys[geoKeyNames[key]] = parseInt(key, 10);\n  }\n}\n","\nfunction decodeRowAcc(row, stride) {\n  let length = row.length - stride;\n  let offset = 0;\n  do {\n    for (let i = stride; i > 0; i--) {\n      row[offset + stride] += row[offset];\n      offset++;\n    }\n\n    length -= stride;\n  } while (length > 0);\n}\n\nfunction decodeRowFloatingPoint(row, stride, bytesPerSample) {\n  let index = 0;\n  let count = row.length;\n  const wc = count / bytesPerSample;\n\n  while (count > stride) {\n    for (let i = stride; i > 0; --i) {\n      row[index + stride] += row[index];\n      ++index;\n    }\n    count -= stride;\n  }\n\n  const copy = row.slice();\n  for (let i = 0; i < wc; ++i) {\n    for (let b = 0; b < bytesPerSample; ++b) {\n      row[(bytesPerSample * i) + b] = copy[((bytesPerSample - b - 1) * wc) + i];\n    }\n  }\n}\n\nexport function applyPredictor(block, predictor, width, height, bitsPerSample,\n  planarConfiguration) {\n  if (!predictor || predictor === 1) {\n    return block;\n  }\n\n  for (let i = 0; i < bitsPerSample.length; ++i) {\n    if (bitsPerSample[i] % 8 !== 0) {\n      throw new Error('When decoding with predictor, only multiple of 8 bits are supported.');\n    }\n    if (bitsPerSample[i] !== bitsPerSample[0]) {\n      throw new Error('When decoding with predictor, all samples must have the same size.');\n    }\n  }\n\n  const bytesPerSample = bitsPerSample[0] / 8;\n  const stride = planarConfiguration === 2 ? 1 : bitsPerSample.length;\n\n  for (let i = 0; i < height; ++i) {\n    // Last strip will be truncated if height % stripHeight != 0\n    if (i * stride * width * bytesPerSample >= block.byteLength) {\n      break;\n    }\n    let row;\n    if (predictor === 2) { // horizontal prediction\n      switch (bitsPerSample[0]) {\n        case 8:\n          row = new Uint8Array(\n            block, i * stride * width * bytesPerSample, stride * width * bytesPerSample,\n          );\n          break;\n        case 16:\n          row = new Uint16Array(\n            block, i * stride * width * bytesPerSample, stride * width * bytesPerSample / 2,\n          );\n          break;\n        case 32:\n          row = new Uint32Array(\n            block, i * stride * width * bytesPerSample, stride * width * bytesPerSample / 4,\n          );\n          break;\n        default:\n          throw new Error(`Predictor 2 not allowed with ${bitsPerSample[0]} bits per sample.`);\n      }\n      decodeRowAcc(row, stride, bytesPerSample);\n    } else if (predictor === 3) { // horizontal floating point\n      row = new Uint8Array(\n        block, i * stride * width * bytesPerSample, stride * width * bytesPerSample,\n      );\n      decodeRowFloatingPoint(row, stride, bytesPerSample);\n    }\n  }\n  return block;\n}\n","import { applyPredictor } from '../predictor';\n\nexport default class BaseDecoder {\n  decode(fileDirectory, buffer) {\n    const decoded = this.decodeBlock(buffer);\n    const predictor = fileDirectory.Predictor || 1;\n    if (predictor !== 1) {\n      const isTiled = !fileDirectory.StripOffsets;\n      const tileWidth = isTiled ? fileDirectory.TileWidth : fileDirectory.ImageWidth;\n      const tileHeight = isTiled ? fileDirectory.TileLength : (\n        fileDirectory.RowsPerStrip || fileDirectory.ImageLength\n      );\n      return applyPredictor(\n        decoded, predictor, tileWidth, tileHeight, fileDirectory.BitsPerSample,\n        fileDirectory.PlanarConfiguration,\n      );\n    }\n    return decoded;\n  }\n}\n","import BaseDecoder from './basedecoder';\n\n\nexport default class RawDecoder extends BaseDecoder {\n  decodeBlock(buffer) {\n    return buffer;\n  }\n}\n","import BaseDecoder from './basedecoder';\n\n\nconst MIN_BITS = 9;\nconst CLEAR_CODE = 256; // clear code\nconst EOI_CODE = 257; // end of information\nconst MAX_BYTELENGTH = 12;\n\nfunction getByte(array, position, length) {\n  const d = position % 8;\n  const a = Math.floor(position / 8);\n  const de = 8 - d;\n  const ef = (position + length) - ((a + 1) * 8);\n  let fg = (8 * (a + 2)) - (position + length);\n  const dg = ((a + 2) * 8) - position;\n  fg = Math.max(0, fg);\n  if (a >= array.length) {\n    console.warn('ran off the end of the buffer before finding EOI_CODE (end on input code)');\n    return EOI_CODE;\n  }\n  let chunk1 = array[a] & ((2 ** (8 - d)) - 1);\n  chunk1 <<= (length - de);\n  let chunks = chunk1;\n  if (a + 1 < array.length) {\n    let chunk2 = array[a + 1] >>> fg;\n    chunk2 <<= Math.max(0, (length - dg));\n    chunks += chunk2;\n  }\n  if (ef > 8 && a + 2 < array.length) {\n    const hi = ((a + 3) * 8) - (position + length);\n    const chunk3 = array[a + 2] >>> hi;\n    chunks += chunk3;\n  }\n  return chunks;\n}\n\nfunction appendReversed(dest, source) {\n  for (let i = source.length - 1; i >= 0; i--) {\n    dest.push(source[i]);\n  }\n  return dest;\n}\n\nfunction decompress(input) {\n  const dictionaryIndex = new Uint16Array(4093);\n  const dictionaryChar = new Uint8Array(4093);\n  for (let i = 0; i <= 257; i++) {\n    dictionaryIndex[i] = 4096;\n    dictionaryChar[i] = i;\n  }\n  let dictionaryLength = 258;\n  let byteLength = MIN_BITS;\n  let position = 0;\n\n  function initDictionary() {\n    dictionaryLength = 258;\n    byteLength = MIN_BITS;\n  }\n  function getNext(array) {\n    const byte = getByte(array, position, byteLength);\n    position += byteLength;\n    return byte;\n  }\n  function addToDictionary(i, c) {\n    dictionaryChar[dictionaryLength] = c;\n    dictionaryIndex[dictionaryLength] = i;\n    dictionaryLength++;\n    return dictionaryLength - 1;\n  }\n  function getDictionaryReversed(n) {\n    const rev = [];\n    for (let i = n; i !== 4096; i = dictionaryIndex[i]) {\n      rev.push(dictionaryChar[i]);\n    }\n    return rev;\n  }\n\n  const result = [];\n  initDictionary();\n  const array = new Uint8Array(input);\n  let code = getNext(array);\n  let oldCode;\n  while (code !== EOI_CODE) {\n    if (code === CLEAR_CODE) {\n      initDictionary();\n      code = getNext(array);\n      while (code === CLEAR_CODE) {\n        code = getNext(array);\n      }\n\n      if (code === EOI_CODE) {\n        break;\n      } else if (code > CLEAR_CODE) {\n        throw new Error(`corrupted code at scanline ${code}`);\n      } else {\n        const val = getDictionaryReversed(code);\n        appendReversed(result, val);\n        oldCode = code;\n      }\n    } else if (code < dictionaryLength) {\n      const val = getDictionaryReversed(code);\n      appendReversed(result, val);\n      addToDictionary(oldCode, val[val.length - 1]);\n      oldCode = code;\n    } else {\n      const oldVal = getDictionaryReversed(oldCode);\n      if (!oldVal) {\n        throw new Error(`Bogus entry. Not in dictionary, ${oldCode} / ${dictionaryLength}, position: ${position}`);\n      }\n      appendReversed(result, oldVal);\n      result.push(oldVal[oldVal.length - 1]);\n      addToDictionary(oldCode, oldVal[oldVal.length - 1]);\n      oldCode = code;\n    }\n\n    if (dictionaryLength + 1 >= (2 ** byteLength)) {\n      if (byteLength === MAX_BYTELENGTH) {\n        oldCode = undefined;\n      } else {\n        byteLength++;\n      }\n    }\n    code = getNext(array);\n  }\n  return new Uint8Array(result);\n}\n\nexport default class LZWDecoder extends BaseDecoder {\n  decodeBlock(buffer) {\n    return decompress(buffer, false).buffer;\n  }\n}\n","import BaseDecoder from './basedecoder';\n\n/* -*- tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- /\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n/*\n   Copyright 2011 notmasteryet\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n       http://www.apache.org/licenses/LICENSE-2.0\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n// - The JPEG specification can be found in the ITU CCITT Recommendation T.81\n//   (www.w3.org/Graphics/JPEG/itu-t81.pdf)\n// - The JFIF specification can be found in the JPEG File Interchange Format\n//   (www.w3.org/Graphics/JPEG/jfif3.pdf)\n// - The Adobe Application-Specific JPEG markers in the Supporting the DCT Filters\n//   in PostScript Level 2, Technical Note #5116\n//   (partners.adobe.com/public/developer/en/ps/sdk/5116.DCT_Filter.pdf)\n\n\nconst dctZigZag = new Int32Array([\n  0,\n  1, 8,\n  16, 9, 2,\n  3, 10, 17, 24,\n  32, 25, 18, 11, 4,\n  5, 12, 19, 26, 33, 40,\n  48, 41, 34, 27, 20, 13, 6,\n  7, 14, 21, 28, 35, 42, 49, 56,\n  57, 50, 43, 36, 29, 22, 15,\n  23, 30, 37, 44, 51, 58,\n  59, 52, 45, 38, 31,\n  39, 46, 53, 60,\n  61, 54, 47,\n  55, 62,\n  63,\n]);\n\nconst dctCos1 = 4017; // cos(pi/16)\nconst dctSin1 = 799; // sin(pi/16)\nconst dctCos3 = 3406; // cos(3*pi/16)\nconst dctSin3 = 2276; // sin(3*pi/16)\nconst dctCos6 = 1567; // cos(6*pi/16)\nconst dctSin6 = 3784; // sin(6*pi/16)\nconst dctSqrt2 = 5793; // sqrt(2)\nconst dctSqrt1d2 = 2896;// sqrt(2) / 2\n\nfunction buildHuffmanTable(codeLengths, values) {\n  let k = 0;\n  const code = [];\n  let length = 16;\n  while (length > 0 && !codeLengths[length - 1]) {\n    --length;\n  }\n  code.push({ children: [], index: 0 });\n\n  let p = code[0];\n  let q;\n  for (let i = 0; i < length; i++) {\n    for (let j = 0; j < codeLengths[i]; j++) {\n      p = code.pop();\n      p.children[p.index] = values[k];\n      while (p.index > 0) {\n        p = code.pop();\n      }\n      p.index++;\n      code.push(p);\n      while (code.length <= i) {\n        code.push(q = { children: [], index: 0 });\n        p.children[p.index] = q.children;\n        p = q;\n      }\n      k++;\n    }\n    if (i + 1 < length) {\n      // p here points to last code\n      code.push(q = { children: [], index: 0 });\n      p.children[p.index] = q.children;\n      p = q;\n    }\n  }\n  return code[0].children;\n}\n\nfunction decodeScan(data, initialOffset,\n  frame, components, resetInterval,\n  spectralStart, spectralEnd,\n  successivePrev, successive) {\n  const { mcusPerLine, progressive } = frame;\n\n  const startOffset = initialOffset;\n  let offset = initialOffset;\n  let bitsData = 0;\n  let bitsCount = 0;\n  function readBit() {\n    if (bitsCount > 0) {\n      bitsCount--;\n      return (bitsData >> bitsCount) & 1;\n    }\n    bitsData = data[offset++];\n    if (bitsData === 0xFF) {\n      const nextByte = data[offset++];\n      if (nextByte) {\n        throw new Error(`unexpected marker: ${((bitsData << 8) | nextByte).toString(16)}`);\n      }\n      // unstuff 0\n    }\n    bitsCount = 7;\n    return bitsData >>> 7;\n  }\n  function decodeHuffman(tree) {\n    let node = tree;\n    let bit;\n    while ((bit = readBit()) !== null) { // eslint-disable-line no-cond-assign\n      node = node[bit];\n      if (typeof node === 'number') {\n        return node;\n      }\n      if (typeof node !== 'object') {\n        throw new Error('invalid huffman sequence');\n      }\n    }\n    return null;\n  }\n  function receive(initialLength) {\n    let length = initialLength;\n    let n = 0;\n    while (length > 0) {\n      const bit = readBit();\n      if (bit === null) {\n        return undefined;\n      }\n      n = (n << 1) | bit;\n      --length;\n    }\n    return n;\n  }\n  function receiveAndExtend(length) {\n    const n = receive(length);\n    if (n >= 1 << (length - 1)) {\n      return n;\n    }\n    return n + (-1 << length) + 1;\n  }\n  function decodeBaseline(component, zz) {\n    const t = decodeHuffman(component.huffmanTableDC);\n    const diff = t === 0 ? 0 : receiveAndExtend(t);\n    component.pred += diff;\n    zz[0] = component.pred;\n    let k = 1;\n    while (k < 64) {\n      const rs = decodeHuffman(component.huffmanTableAC);\n      const s = rs & 15;\n      const r = rs >> 4;\n      if (s === 0) {\n        if (r < 15) {\n          break;\n        }\n        k += 16;\n      } else {\n        k += r;\n        const z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s);\n        k++;\n      }\n    }\n  }\n  function decodeDCFirst(component, zz) {\n    const t = decodeHuffman(component.huffmanTableDC);\n    const diff = t === 0 ? 0 : (receiveAndExtend(t) << successive);\n    component.pred += diff;\n    zz[0] = component.pred;\n  }\n  function decodeDCSuccessive(component, zz) {\n    zz[0] |= readBit() << successive;\n  }\n  let eobrun = 0;\n  function decodeACFirst(component, zz) {\n    if (eobrun > 0) {\n      eobrun--;\n      return;\n    }\n    let k = spectralStart;\n    const e = spectralEnd;\n    while (k <= e) {\n      const rs = decodeHuffman(component.huffmanTableAC);\n      const s = rs & 15;\n      const r = rs >> 4;\n      if (s === 0) {\n        if (r < 15) {\n          eobrun = receive(r) + (1 << r) - 1;\n          break;\n        }\n        k += 16;\n      } else {\n        k += r;\n        const z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s) * (1 << successive);\n        k++;\n      }\n    }\n  }\n  let successiveACState = 0;\n  let successiveACNextValue;\n  function decodeACSuccessive(component, zz) {\n    let k = spectralStart;\n    const e = spectralEnd;\n    let r = 0;\n    while (k <= e) {\n      const z = dctZigZag[k];\n      const direction = zz[z] < 0 ? -1 : 1;\n      switch (successiveACState) {\n        case 0: { // initial state\n          const rs = decodeHuffman(component.huffmanTableAC);\n          const s = rs & 15;\n          r = rs >> 4;\n          if (s === 0) {\n            if (r < 15) {\n              eobrun = receive(r) + (1 << r);\n              successiveACState = 4;\n            } else {\n              r = 16;\n              successiveACState = 1;\n            }\n          } else {\n            if (s !== 1) {\n              throw new Error('invalid ACn encoding');\n            }\n            successiveACNextValue = receiveAndExtend(s);\n            successiveACState = r ? 2 : 3;\n          }\n          continue; // eslint-disable-line no-continue\n        }\n        case 1: // skipping r zero items\n        case 2:\n          if (zz[z]) {\n            zz[z] += (readBit() << successive) * direction;\n          } else {\n            r--;\n            if (r === 0) {\n              successiveACState = successiveACState === 2 ? 3 : 0;\n            }\n          }\n          break;\n        case 3: // set value for a zero item\n          if (zz[z]) {\n            zz[z] += (readBit() << successive) * direction;\n          } else {\n            zz[z] = successiveACNextValue << successive;\n            successiveACState = 0;\n          }\n          break;\n        case 4: // eob\n          if (zz[z]) {\n            zz[z] += (readBit() << successive) * direction;\n          }\n          break;\n        default:\n          break;\n      }\n      k++;\n    }\n    if (successiveACState === 4) {\n      eobrun--;\n      if (eobrun === 0) {\n        successiveACState = 0;\n      }\n    }\n  }\n  function decodeMcu(component, decodeFunction, mcu, row, col) {\n    const mcuRow = (mcu / mcusPerLine) | 0;\n    const mcuCol = mcu % mcusPerLine;\n    const blockRow = (mcuRow * component.v) + row;\n    const blockCol = (mcuCol * component.h) + col;\n    decodeFunction(component, component.blocks[blockRow][blockCol]);\n  }\n  function decodeBlock(component, decodeFunction, mcu) {\n    const blockRow = (mcu / component.blocksPerLine) | 0;\n    const blockCol = mcu % component.blocksPerLine;\n    decodeFunction(component, component.blocks[blockRow][blockCol]);\n  }\n\n  const componentsLength = components.length;\n  let component;\n  let i;\n  let j;\n  let k;\n  let n;\n  let decodeFn;\n  if (progressive) {\n    if (spectralStart === 0) {\n      decodeFn = successivePrev === 0 ? decodeDCFirst : decodeDCSuccessive;\n    } else {\n      decodeFn = successivePrev === 0 ? decodeACFirst : decodeACSuccessive;\n    }\n  } else {\n    decodeFn = decodeBaseline;\n  }\n\n  let mcu = 0;\n  let marker;\n  let mcuExpected;\n  if (componentsLength === 1) {\n    mcuExpected = components[0].blocksPerLine * components[0].blocksPerColumn;\n  } else {\n    mcuExpected = mcusPerLine * frame.mcusPerColumn;\n  }\n\n  const usedResetInterval = resetInterval || mcuExpected;\n\n  while (mcu < mcuExpected) {\n    // reset interval stuff\n    for (i = 0; i < componentsLength; i++) {\n      components[i].pred = 0;\n    }\n    eobrun = 0;\n\n    if (componentsLength === 1) {\n      component = components[0];\n      for (n = 0; n < usedResetInterval; n++) {\n        decodeBlock(component, decodeFn, mcu);\n        mcu++;\n      }\n    } else {\n      for (n = 0; n < usedResetInterval; n++) {\n        for (i = 0; i < componentsLength; i++) {\n          component = components[i];\n          const { h, v } = component;\n          for (j = 0; j < v; j++) {\n            for (k = 0; k < h; k++) {\n              decodeMcu(component, decodeFn, mcu, j, k);\n            }\n          }\n        }\n        mcu++;\n\n        // If we've reached our expected MCU's, stop decoding\n        if (mcu === mcuExpected) {\n          break;\n        }\n      }\n    }\n\n    // find marker\n    bitsCount = 0;\n    marker = (data[offset] << 8) | data[offset + 1];\n    if (marker < 0xFF00) {\n      throw new Error('marker was not found');\n    }\n\n    if (marker >= 0xFFD0 && marker <= 0xFFD7) { // RSTx\n      offset += 2;\n    } else {\n      break;\n    }\n  }\n\n  return offset - startOffset;\n}\n\nfunction buildComponentData(frame, component) {\n  const lines = [];\n  const { blocksPerLine, blocksPerColumn } = component;\n  const samplesPerLine = blocksPerLine << 3;\n  const R = new Int32Array(64);\n  const r = new Uint8Array(64);\n\n  // A port of poppler's IDCT method which in turn is taken from:\n  //   Christoph Loeffler, Adriaan Ligtenberg, George S. Moschytz,\n  //   \"Practical Fast 1-D DCT Algorithms with 11 Multiplications\",\n  //   IEEE Intl. Conf. on Acoustics, Speech & Signal Processing, 1989,\n  //   988-991.\n  function quantizeAndInverse(zz, dataOut, dataIn) {\n    const qt = component.quantizationTable;\n    let v0;\n    let v1;\n    let v2;\n    let v3;\n    let v4;\n    let v5;\n    let v6;\n    let v7;\n    let t;\n    const p = dataIn;\n    let i;\n\n    // dequant\n    for (i = 0; i < 64; i++) {\n      p[i] = zz[i] * qt[i];\n    }\n\n    // inverse DCT on rows\n    for (i = 0; i < 8; ++i) {\n      const row = 8 * i;\n\n      // check for all-zero AC coefficients\n      if (p[1 + row] === 0 && p[2 + row] === 0 && p[3 + row] === 0\n        && p[4 + row] === 0 && p[5 + row] === 0 && p[6 + row] === 0\n        && p[7 + row] === 0) {\n        t = ((dctSqrt2 * p[0 + row]) + 512) >> 10;\n        p[0 + row] = t;\n        p[1 + row] = t;\n        p[2 + row] = t;\n        p[3 + row] = t;\n        p[4 + row] = t;\n        p[5 + row] = t;\n        p[6 + row] = t;\n        p[7 + row] = t;\n        continue; // eslint-disable-line no-continue\n      }\n\n      // stage 4\n      v0 = ((dctSqrt2 * p[0 + row]) + 128) >> 8;\n      v1 = ((dctSqrt2 * p[4 + row]) + 128) >> 8;\n      v2 = p[2 + row];\n      v3 = p[6 + row];\n      v4 = ((dctSqrt1d2 * (p[1 + row] - p[7 + row])) + 128) >> 8;\n      v7 = ((dctSqrt1d2 * (p[1 + row] + p[7 + row])) + 128) >> 8;\n      v5 = p[3 + row] << 4;\n      v6 = p[5 + row] << 4;\n\n      // stage 3\n      t = (v0 - v1 + 1) >> 1;\n      v0 = (v0 + v1 + 1) >> 1;\n      v1 = t;\n      t = ((v2 * dctSin6) + (v3 * dctCos6) + 128) >> 8;\n      v2 = ((v2 * dctCos6) - (v3 * dctSin6) + 128) >> 8;\n      v3 = t;\n      t = (v4 - v6 + 1) >> 1;\n      v4 = (v4 + v6 + 1) >> 1;\n      v6 = t;\n      t = (v7 + v5 + 1) >> 1;\n      v5 = (v7 - v5 + 1) >> 1;\n      v7 = t;\n\n      // stage 2\n      t = (v0 - v3 + 1) >> 1;\n      v0 = (v0 + v3 + 1) >> 1;\n      v3 = t;\n      t = (v1 - v2 + 1) >> 1;\n      v1 = (v1 + v2 + 1) >> 1;\n      v2 = t;\n      t = ((v4 * dctSin3) + (v7 * dctCos3) + 2048) >> 12;\n      v4 = ((v4 * dctCos3) - (v7 * dctSin3) + 2048) >> 12;\n      v7 = t;\n      t = ((v5 * dctSin1) + (v6 * dctCos1) + 2048) >> 12;\n      v5 = ((v5 * dctCos1) - (v6 * dctSin1) + 2048) >> 12;\n      v6 = t;\n\n      // stage 1\n      p[0 + row] = v0 + v7;\n      p[7 + row] = v0 - v7;\n      p[1 + row] = v1 + v6;\n      p[6 + row] = v1 - v6;\n      p[2 + row] = v2 + v5;\n      p[5 + row] = v2 - v5;\n      p[3 + row] = v3 + v4;\n      p[4 + row] = v3 - v4;\n    }\n\n    // inverse DCT on columns\n    for (i = 0; i < 8; ++i) {\n      const col = i;\n\n      // check for all-zero AC coefficients\n      if (p[(1 * 8) + col] === 0 && p[(2 * 8) + col] === 0 && p[(3 * 8) + col] === 0\n        && p[(4 * 8) + col] === 0 && p[(5 * 8) + col] === 0 && p[(6 * 8) + col] === 0\n        && p[(7 * 8) + col] === 0) {\n        t = ((dctSqrt2 * dataIn[i + 0]) + 8192) >> 14;\n        p[(0 * 8) + col] = t;\n        p[(1 * 8) + col] = t;\n        p[(2 * 8) + col] = t;\n        p[(3 * 8) + col] = t;\n        p[(4 * 8) + col] = t;\n        p[(5 * 8) + col] = t;\n        p[(6 * 8) + col] = t;\n        p[(7 * 8) + col] = t;\n        continue; // eslint-disable-line no-continue\n      }\n\n      // stage 4\n      v0 = ((dctSqrt2 * p[(0 * 8) + col]) + 2048) >> 12;\n      v1 = ((dctSqrt2 * p[(4 * 8) + col]) + 2048) >> 12;\n      v2 = p[(2 * 8) + col];\n      v3 = p[(6 * 8) + col];\n      v4 = ((dctSqrt1d2 * (p[(1 * 8) + col] - p[(7 * 8) + col])) + 2048) >> 12;\n      v7 = ((dctSqrt1d2 * (p[(1 * 8) + col] + p[(7 * 8) + col])) + 2048) >> 12;\n      v5 = p[(3 * 8) + col];\n      v6 = p[(5 * 8) + col];\n\n      // stage 3\n      t = (v0 - v1 + 1) >> 1;\n      v0 = (v0 + v1 + 1) >> 1;\n      v1 = t;\n      t = ((v2 * dctSin6) + (v3 * dctCos6) + 2048) >> 12;\n      v2 = ((v2 * dctCos6) - (v3 * dctSin6) + 2048) >> 12;\n      v3 = t;\n      t = (v4 - v6 + 1) >> 1;\n      v4 = (v4 + v6 + 1) >> 1;\n      v6 = t;\n      t = (v7 + v5 + 1) >> 1;\n      v5 = (v7 - v5 + 1) >> 1;\n      v7 = t;\n\n      // stage 2\n      t = (v0 - v3 + 1) >> 1;\n      v0 = (v0 + v3 + 1) >> 1;\n      v3 = t;\n      t = (v1 - v2 + 1) >> 1;\n      v1 = (v1 + v2 + 1) >> 1;\n      v2 = t;\n      t = ((v4 * dctSin3) + (v7 * dctCos3) + 2048) >> 12;\n      v4 = ((v4 * dctCos3) - (v7 * dctSin3) + 2048) >> 12;\n      v7 = t;\n      t = ((v5 * dctSin1) + (v6 * dctCos1) + 2048) >> 12;\n      v5 = ((v5 * dctCos1) - (v6 * dctSin1) + 2048) >> 12;\n      v6 = t;\n\n      // stage 1\n      p[(0 * 8) + col] = v0 + v7;\n      p[(7 * 8) + col] = v0 - v7;\n      p[(1 * 8) + col] = v1 + v6;\n      p[(6 * 8) + col] = v1 - v6;\n      p[(2 * 8) + col] = v2 + v5;\n      p[(5 * 8) + col] = v2 - v5;\n      p[(3 * 8) + col] = v3 + v4;\n      p[(4 * 8) + col] = v3 - v4;\n    }\n\n    // convert to 8-bit integers\n    for (i = 0; i < 64; ++i) {\n      const sample = 128 + ((p[i] + 8) >> 4);\n      if (sample < 0) {\n        dataOut[i] = 0;\n      } else if (sample > 0XFF) {\n        dataOut[i] = 0xFF;\n      } else {\n        dataOut[i] = sample;\n      }\n    }\n  }\n\n  for (let blockRow = 0; blockRow < blocksPerColumn; blockRow++) {\n    const scanLine = blockRow << 3;\n    for (let i = 0; i < 8; i++) {\n      lines.push(new Uint8Array(samplesPerLine));\n    }\n    for (let blockCol = 0; blockCol < blocksPerLine; blockCol++) {\n      quantizeAndInverse(component.blocks[blockRow][blockCol], r, R);\n\n      let offset = 0;\n      const sample = blockCol << 3;\n      for (let j = 0; j < 8; j++) {\n        const line = lines[scanLine + j];\n        for (let i = 0; i < 8; i++) {\n          line[sample + i] = r[offset++];\n        }\n      }\n    }\n  }\n  return lines;\n}\n\nclass JpegStreamReader {\n  constructor() {\n    this.jfif = null;\n    this.adobe = null;\n\n    this.quantizationTables = [];\n    this.huffmanTablesAC = [];\n    this.huffmanTablesDC = [];\n    this.resetFrames();\n  }\n\n  resetFrames() {\n    this.frames = [];\n  }\n\n  parse(data) {\n    let offset = 0;\n    // const { length } = data;\n    function readUint16() {\n      const value = (data[offset] << 8) | data[offset + 1];\n      offset += 2;\n      return value;\n    }\n    function readDataBlock() {\n      const length = readUint16();\n      const array = data.subarray(offset, offset + length - 2);\n      offset += array.length;\n      return array;\n    }\n    function prepareComponents(frame) {\n      let maxH = 0;\n      let maxV = 0;\n      let component;\n      let componentId;\n      for (componentId in frame.components) {\n        if (frame.components.hasOwnProperty(componentId)) {\n          component = frame.components[componentId];\n          if (maxH < component.h) {\n            maxH = component.h;\n          }\n          if (maxV < component.v) {\n            maxV = component.v;\n          }\n        }\n      }\n      const mcusPerLine = Math.ceil(frame.samplesPerLine / 8 / maxH);\n      const mcusPerColumn = Math.ceil(frame.scanLines / 8 / maxV);\n      for (componentId in frame.components) {\n        if (frame.components.hasOwnProperty(componentId)) {\n          component = frame.components[componentId];\n          const blocksPerLine = Math.ceil(Math.ceil(frame.samplesPerLine / 8) * component.h / maxH);\n          const blocksPerColumn = Math.ceil(Math.ceil(frame.scanLines / 8) * component.v / maxV);\n          const blocksPerLineForMcu = mcusPerLine * component.h;\n          const blocksPerColumnForMcu = mcusPerColumn * component.v;\n          const blocks = [];\n          for (let i = 0; i < blocksPerColumnForMcu; i++) {\n            const row = [];\n            for (let j = 0; j < blocksPerLineForMcu; j++) {\n              row.push(new Int32Array(64));\n            }\n            blocks.push(row);\n          }\n          component.blocksPerLine = blocksPerLine;\n          component.blocksPerColumn = blocksPerColumn;\n          component.blocks = blocks;\n        }\n      }\n      frame.maxH = maxH;\n      frame.maxV = maxV;\n      frame.mcusPerLine = mcusPerLine;\n      frame.mcusPerColumn = mcusPerColumn;\n    }\n\n    let fileMarker = readUint16();\n    if (fileMarker !== 0xFFD8) { // SOI (Start of Image)\n      throw new Error('SOI not found');\n    }\n\n    fileMarker = readUint16();\n    while (fileMarker !== 0xFFD9) { // EOI (End of image)\n      switch (fileMarker) {\n        case 0xFF00: break;\n        case 0xFFE0: // APP0 (Application Specific)\n        case 0xFFE1: // APP1\n        case 0xFFE2: // APP2\n        case 0xFFE3: // APP3\n        case 0xFFE4: // APP4\n        case 0xFFE5: // APP5\n        case 0xFFE6: // APP6\n        case 0xFFE7: // APP7\n        case 0xFFE8: // APP8\n        case 0xFFE9: // APP9\n        case 0xFFEA: // APP10\n        case 0xFFEB: // APP11\n        case 0xFFEC: // APP12\n        case 0xFFED: // APP13\n        case 0xFFEE: // APP14\n        case 0xFFEF: // APP15\n        case 0xFFFE: { // COM (Comment)\n          const appData = readDataBlock();\n\n          if (fileMarker === 0xFFE0) {\n            if (appData[0] === 0x4A && appData[1] === 0x46 && appData[2] === 0x49\n              && appData[3] === 0x46 && appData[4] === 0) { // 'JFIF\\x00'\n              this.jfif = {\n                version: { major: appData[5], minor: appData[6] },\n                densityUnits: appData[7],\n                xDensity: (appData[8] << 8) | appData[9],\n                yDensity: (appData[10] << 8) | appData[11],\n                thumbWidth: appData[12],\n                thumbHeight: appData[13],\n                thumbData: appData.subarray(14, 14 + (3 * appData[12] * appData[13])),\n              };\n            }\n          }\n          // TODO APP1 - Exif\n          if (fileMarker === 0xFFEE) {\n            if (appData[0] === 0x41 && appData[1] === 0x64 && appData[2] === 0x6F\n              && appData[3] === 0x62 && appData[4] === 0x65 && appData[5] === 0) { // 'Adobe\\x00'\n              this.adobe = {\n                version: appData[6],\n                flags0: (appData[7] << 8) | appData[8],\n                flags1: (appData[9] << 8) | appData[10],\n                transformCode: appData[11],\n              };\n            }\n          }\n          break;\n        }\n\n        case 0xFFDB: { // DQT (Define Quantization Tables)\n          const quantizationTablesLength = readUint16();\n          const quantizationTablesEnd = quantizationTablesLength + offset - 2;\n          while (offset < quantizationTablesEnd) {\n            const quantizationTableSpec = data[offset++];\n            const tableData = new Int32Array(64);\n            if ((quantizationTableSpec >> 4) === 0) { // 8 bit values\n              for (let j = 0; j < 64; j++) {\n                const z = dctZigZag[j];\n                tableData[z] = data[offset++];\n              }\n            } else if ((quantizationTableSpec >> 4) === 1) { // 16 bit\n              for (let j = 0; j < 64; j++) {\n                const z = dctZigZag[j];\n                tableData[z] = readUint16();\n              }\n            } else {\n              throw new Error('DQT: invalid table spec');\n            }\n            this.quantizationTables[quantizationTableSpec & 15] = tableData;\n          }\n          break;\n        }\n\n        case 0xFFC0: // SOF0 (Start of Frame, Baseline DCT)\n        case 0xFFC1: // SOF1 (Start of Frame, Extended DCT)\n        case 0xFFC2: { // SOF2 (Start of Frame, Progressive DCT)\n          readUint16(); // skip data length\n          const frame = {\n            extended: (fileMarker === 0xFFC1),\n            progressive: (fileMarker === 0xFFC2),\n            precision: data[offset++],\n            scanLines: readUint16(),\n            samplesPerLine: readUint16(),\n            components: {},\n            componentsOrder: [],\n          };\n\n          const componentsCount = data[offset++];\n          let componentId;\n          // let maxH = 0;\n          // let maxV = 0;\n          for (let i = 0; i < componentsCount; i++) {\n            componentId = data[offset];\n            const h = data[offset + 1] >> 4;\n            const v = data[offset + 1] & 15;\n            const qId = data[offset + 2];\n            frame.componentsOrder.push(componentId);\n            frame.components[componentId] = {\n              h,\n              v,\n              quantizationIdx: qId,\n            };\n            offset += 3;\n          }\n          prepareComponents(frame);\n          this.frames.push(frame);\n          break;\n        }\n\n        case 0xFFC4: { // DHT (Define Huffman Tables)\n          const huffmanLength = readUint16();\n          for (let i = 2; i < huffmanLength;) {\n            const huffmanTableSpec = data[offset++];\n            const codeLengths = new Uint8Array(16);\n            let codeLengthSum = 0;\n            for (let j = 0; j < 16; j++, offset++) {\n              codeLengths[j] = data[offset];\n              codeLengthSum += codeLengths[j];\n            }\n            const huffmanValues = new Uint8Array(codeLengthSum);\n            for (let j = 0; j < codeLengthSum; j++, offset++) {\n              huffmanValues[j] = data[offset];\n            }\n            i += 17 + codeLengthSum;\n\n            if ((huffmanTableSpec >> 4) === 0) {\n              this.huffmanTablesDC[huffmanTableSpec & 15] = buildHuffmanTable(\n                codeLengths, huffmanValues,\n              );\n            } else {\n              this.huffmanTablesAC[huffmanTableSpec & 15] = buildHuffmanTable(\n                codeLengths, huffmanValues,\n              );\n            }\n          }\n          break;\n        }\n\n        case 0xFFDD: // DRI (Define Restart Interval)\n          readUint16(); // skip data length\n          this.resetInterval = readUint16();\n          break;\n\n        case 0xFFDA: { // SOS (Start of Scan)\n          readUint16(); // skip length\n          const selectorsCount = data[offset++];\n          const components = [];\n          const frame = this.frames[0];\n          for (let i = 0; i < selectorsCount; i++) {\n            const component = frame.components[data[offset++]];\n            const tableSpec = data[offset++];\n            component.huffmanTableDC = this.huffmanTablesDC[tableSpec >> 4];\n            component.huffmanTableAC = this.huffmanTablesAC[tableSpec & 15];\n            components.push(component);\n          }\n          const spectralStart = data[offset++];\n          const spectralEnd = data[offset++];\n          const successiveApproximation = data[offset++];\n          const processed = decodeScan(data, offset,\n            frame, components, this.resetInterval,\n            spectralStart, spectralEnd,\n            successiveApproximation >> 4, successiveApproximation & 15);\n          offset += processed;\n          break;\n        }\n\n        case 0xFFFF: // Fill bytes\n          if (data[offset] !== 0xFF) { // Avoid skipping a valid marker.\n            offset--;\n          }\n          break;\n\n        default:\n          if (data[offset - 3] === 0xFF\n            && data[offset - 2] >= 0xC0 && data[offset - 2] <= 0xFE) {\n            // could be incorrect encoding -- last 0xFF byte of the previous\n            // block was eaten by the encoder\n            offset -= 3;\n            break;\n          }\n          throw new Error(`unknown JPEG marker ${fileMarker.toString(16)}`);\n      }\n      fileMarker = readUint16();\n    }\n  }\n\n  getResult() {\n    const { frames } = this;\n    if (this.frames.length === 0) {\n      throw new Error('no frames were decoded');\n    } else if (this.frames.length > 1) {\n      console.warn('more than one frame is not supported');\n    }\n\n    // set each frame's components quantization table\n    for (let i = 0; i < this.frames.length; i++) {\n      const cp = this.frames[i].components;\n      for (const j of Object.keys(cp)) {\n        cp[j].quantizationTable = this.quantizationTables[cp[j].quantizationIdx];\n        delete cp[j].quantizationIdx;\n      }\n    }\n\n    const frame = frames[0];\n    const { components, componentsOrder } = frame;\n    const outComponents = [];\n    const width = frame.samplesPerLine;\n    const height = frame.scanLines;\n\n    for (let i = 0; i < componentsOrder.length; i++) {\n      const component = components[componentsOrder[i]];\n      outComponents.push({\n        lines: buildComponentData(frame, component),\n        scaleX: component.h / frame.maxH,\n        scaleY: component.v / frame.maxV,\n      });\n    }\n\n    const out = new Uint8Array(width * height * outComponents.length);\n    let oi = 0;\n    for (let y = 0; y < height; ++y) {\n      for (let x = 0; x < width; ++x) {\n        for (let i = 0; i < outComponents.length; ++i) {\n          const component = outComponents[i];\n          out[oi] = component.lines[0 | y * component.scaleY][0 | x * component.scaleX];\n          ++oi;\n        }\n      }\n    }\n    return out;\n  }\n}\n\nexport default class JpegDecoder extends BaseDecoder {\n  constructor(fileDirectory) {\n    super();\n    this.reader = new JpegStreamReader();\n    if (fileDirectory.JPEGTables) {\n      this.reader.parse(fileDirectory.JPEGTables);\n    }\n  }\n\n  decodeBlock(buffer) {\n    this.reader.resetFrames();\n    this.reader.parse(new Uint8Array(buffer));\n    return this.reader.getResult().buffer;\n  }\n}\n","import { inflate } from 'pako/lib/inflate';\nimport BaseDecoder from './basedecoder';\n\nexport default class DeflateDecoder extends BaseDecoder {\n  decodeBlock(buffer) {\n    return inflate(new Uint8Array(buffer)).buffer;\n  }\n}\n","import BaseDecoder from './basedecoder';\n\n\nexport default class PackbitsDecoder extends BaseDecoder {\n  decodeBlock(buffer) {\n    const dataView = new DataView(buffer);\n    const out = [];\n\n    for (let i = 0; i < buffer.byteLength; ++i) {\n      let header = dataView.getInt8(i);\n      if (header < 0) {\n        const next = dataView.getUint8(i + 1);\n        header = -header;\n        for (let j = 0; j <= header; ++j) {\n          out.push(next);\n        }\n        i += 1;\n      } else {\n        for (let j = 0; j <= header; ++j) {\n          out.push(dataView.getUint8(i + j + 1));\n        }\n        i += header + 1;\n      }\n    }\n    return new Uint8Array(out).buffer;\n  }\n}\n","/**\n * @module resample\n */\n\nfunction copyNewSize(array, width, height, samplesPerPixel = 1) {\n  return new (Object.getPrototypeOf(array).constructor)(width * height * samplesPerPixel);\n}\n\n/**\n * Resample the input arrays using nearest neighbor value selection.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\nexport function resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  const relX = inWidth / outWidth;\n  const relY = inHeight / outHeight;\n  return valueArrays.map((array) => {\n    const newArray = copyNewSize(array, outWidth, outHeight);\n    for (let y = 0; y < outHeight; ++y) {\n      const cy = Math.min(Math.round(relY * y), inHeight - 1);\n      for (let x = 0; x < outWidth; ++x) {\n        const cx = Math.min(Math.round(relX * x), inWidth - 1);\n        const value = array[(cy * inWidth) + cx];\n        newArray[(y * outWidth) + x] = value;\n      }\n    }\n    return newArray;\n  });\n}\n\n// simple linear interpolation, code from:\n// https://en.wikipedia.org/wiki/Linear_interpolation#Programming_language_support\nfunction lerp(v0, v1, t) {\n  return ((1 - t) * v0) + (t * v1);\n}\n\n/**\n * Resample the input arrays using bilinear interpolation.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\nexport function resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  const relX = inWidth / outWidth;\n  const relY = inHeight / outHeight;\n\n  return valueArrays.map((array) => {\n    const newArray = copyNewSize(array, outWidth, outHeight);\n    for (let y = 0; y < outHeight; ++y) {\n      const rawY = relY * y;\n\n      const yl = Math.floor(rawY);\n      const yh = Math.min(Math.ceil(rawY), (inHeight - 1));\n\n      for (let x = 0; x < outWidth; ++x) {\n        const rawX = relX * x;\n        const tx = rawX % 1;\n\n        const xl = Math.floor(rawX);\n        const xh = Math.min(Math.ceil(rawX), (inWidth - 1));\n\n        const ll = array[(yl * inWidth) + xl];\n        const hl = array[(yl * inWidth) + xh];\n        const lh = array[(yh * inWidth) + xl];\n        const hh = array[(yh * inWidth) + xh];\n\n        const value = lerp(\n          lerp(ll, hl, tx),\n          lerp(lh, hh, tx),\n          rawY % 1,\n        );\n        newArray[(y * outWidth) + x] = value;\n      }\n    }\n    return newArray;\n  });\n}\n\n/**\n * Resample the input arrays using the selected resampling method.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray[]} The resampled rasters\n */\nexport function resample(valueArrays, inWidth, inHeight, outWidth, outHeight, method = 'nearest') {\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight);\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight);\n    default:\n      throw new Error(`Unsupported resampling method: '${method}'`);\n  }\n}\n\n/**\n * Resample the pixel interleaved input array using nearest neighbor value selection.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\nexport function resampleNearestInterleaved(\n  valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  const relX = inWidth / outWidth;\n  const relY = inHeight / outHeight;\n\n  const newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n  for (let y = 0; y < outHeight; ++y) {\n    const cy = Math.min(Math.round(relY * y), inHeight - 1);\n    for (let x = 0; x < outWidth; ++x) {\n      const cx = Math.min(Math.round(relX * x), inWidth - 1);\n      for (let i = 0; i < samples; ++i) {\n        const value = valueArray[(cy * inWidth * samples) + (cx * samples) + i];\n        newArray[(y * outWidth * samples) + (x * samples) + i] = value;\n      }\n    }\n  }\n  return newArray;\n}\n\n/**\n * Resample the pixel interleaved input array using bilinear interpolation.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\nexport function resampleBilinearInterleaved(\n  valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  const relX = inWidth / outWidth;\n  const relY = inHeight / outHeight;\n  const newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n  for (let y = 0; y < outHeight; ++y) {\n    const rawY = relY * y;\n\n    const yl = Math.floor(rawY);\n    const yh = Math.min(Math.ceil(rawY), (inHeight - 1));\n\n    for (let x = 0; x < outWidth; ++x) {\n      const rawX = relX * x;\n      const tx = rawX % 1;\n\n      const xl = Math.floor(rawX);\n      const xh = Math.min(Math.ceil(rawX), (inWidth - 1));\n\n      for (let i = 0; i < samples; ++i) {\n        const ll = valueArray[(yl * inWidth * samples) + (xl * samples) + i];\n        const hl = valueArray[(yl * inWidth * samples) + (xh * samples) + i];\n        const lh = valueArray[(yh * inWidth * samples) + (xl * samples) + i];\n        const hh = valueArray[(yh * inWidth * samples) + (xh * samples) + i];\n\n        const value = lerp(\n          lerp(ll, hl, tx),\n          lerp(lh, hh, tx),\n          rawY % 1,\n        );\n        newArray[(y * outWidth * samples) + (x * samples) + i] = value;\n      }\n    }\n  }\n  return newArray;\n}\n\n/**\n * Resample the pixel interleaved input array using the selected resampling method.\n * @param {TypedArray} valueArray The input array to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                                 interleaved data\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray} The resampled rasters\n */\nexport function resampleInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples, method = 'nearest') {\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearestInterleaved(\n        valueArray, inWidth, inHeight, outWidth, outHeight, samples,\n      );\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinearInterleaved(\n        valueArray, inWidth, inHeight, outWidth, outHeight, samples,\n      );\n    default:\n      throw new Error(`Unsupported resampling method: '${method}'`);\n  }\n}\n","/* eslint max-len: [\"error\", { \"code\": 120 }] */\n\nimport txml from 'txml';\nimport { photometricInterpretations, ExtraSamplesValues } from './globals';\nimport { fromWhiteIsZero, fromBlackIsZero, fromPalette, fromCMYK, fromYCbCr, fromCIELab } from './rgb';\nimport { getDecoder } from './compression';\nimport { resample, resampleInterleaved } from './resample';\n\nfunction sum(array, start, end) {\n  let s = 0;\n  for (let i = start; i < end; ++i) {\n    s += array[i];\n  }\n  return s;\n}\n\nfunction arrayForType(format, bitsPerSample, size) {\n  switch (format) {\n    case 1: // unsigned integer data\n      switch (bitsPerSample) {\n        case 8:\n          return new Uint8Array(size);\n        case 16:\n          return new Uint16Array(size);\n        case 32:\n          return new Uint32Array(size);\n        default:\n          break;\n      }\n      break;\n    case 2: // twos complement signed integer data\n      switch (bitsPerSample) {\n        case 8:\n          return new Int8Array(size);\n        case 16:\n          return new Int16Array(size);\n        case 32:\n          return new Int32Array(size);\n        default:\n          break;\n      }\n      break;\n    case 3: // floating point data\n      switch (bitsPerSample) {\n        case 32:\n          return new Float32Array(size);\n        case 64:\n          return new Float64Array(size);\n        default:\n          break;\n      }\n      break;\n    default:\n      break;\n  }\n  throw Error('Unsupported data format/bitsPerSample');\n}\n\n/**\n * GeoTIFF sub-file image.\n */\nclass GeoTIFFImage {\n  /**\n   * @constructor\n   * @param {Object} fileDirectory The parsed file directory\n   * @param {Object} geoKeys The parsed geo-keys\n   * @param {DataView} dataView The DataView for the underlying file.\n   * @param {Boolean} littleEndian Whether the file is encoded in little or big endian\n   * @param {Boolean} cache Whether or not decoded tiles shall be cached\n   * @param {Source} source The datasource to read from\n   */\n  constructor(fileDirectory, geoKeys, dataView, littleEndian, cache, source) {\n    this.fileDirectory = fileDirectory;\n    this.geoKeys = geoKeys;\n    this.dataView = dataView;\n    this.littleEndian = littleEndian;\n    this.tiles = cache ? {} : null;\n    this.isTiled = !fileDirectory.StripOffsets;\n    const planarConfiguration = fileDirectory.PlanarConfiguration;\n    this.planarConfiguration = (typeof planarConfiguration === 'undefined') ? 1 : planarConfiguration;\n    if (this.planarConfiguration !== 1 && this.planarConfiguration !== 2) {\n      throw new Error('Invalid planar configuration.');\n    }\n\n    this.source = source;\n  }\n\n  /**\n   * Returns the associated parsed file directory.\n   * @returns {Object} the parsed file directory\n   */\n  getFileDirectory() {\n    return this.fileDirectory;\n  }\n\n  /**\n   * Returns the associated parsed geo keys.\n   * @returns {Object} the parsed geo keys\n   */\n  getGeoKeys() {\n    return this.geoKeys;\n  }\n\n  /**\n   * Returns the width of the image.\n   * @returns {Number} the width of the image\n   */\n  getWidth() {\n    return this.fileDirectory.ImageWidth;\n  }\n\n  /**\n   * Returns the height of the image.\n   * @returns {Number} the height of the image\n   */\n  getHeight() {\n    return this.fileDirectory.ImageLength;\n  }\n\n  /**\n   * Returns the number of samples per pixel.\n   * @returns {Number} the number of samples per pixel\n   */\n  getSamplesPerPixel() {\n    return this.fileDirectory.SamplesPerPixel;\n  }\n\n  /**\n   * Returns the width of each tile.\n   * @returns {Number} the width of each tile\n   */\n  getTileWidth() {\n    return this.isTiled ? this.fileDirectory.TileWidth : this.getWidth();\n  }\n\n  /**\n   * Returns the height of each tile.\n   * @returns {Number} the height of each tile\n   */\n  getTileHeight() {\n    if (this.isTiled) {\n      return this.fileDirectory.TileLength;\n    }\n    if (typeof this.fileDirectory.RowsPerStrip !== 'undefined') {\n      return Math.min(this.fileDirectory.RowsPerStrip, this.getHeight());\n    }\n    return this.getHeight();\n  }\n\n  /**\n   * Calculates the number of bytes for each pixel across all samples. Only full\n   * bytes are supported, an exception is thrown when this is not the case.\n   * @returns {Number} the bytes per pixel\n   */\n  getBytesPerPixel() {\n    let bitsPerSample = 0;\n    for (let i = 0; i < this.fileDirectory.BitsPerSample.length; ++i) {\n      const bits = this.fileDirectory.BitsPerSample[i];\n      if ((bits % 8) !== 0) {\n        throw new Error(`Sample bit-width of ${bits} is not supported.`);\n      } else if (bits !== this.fileDirectory.BitsPerSample[0]) {\n        throw new Error('Differing size of samples in a pixel are not supported.');\n      }\n      bitsPerSample += bits;\n    }\n    return bitsPerSample / 8;\n  }\n\n  getSampleByteSize(i) {\n    if (i >= this.fileDirectory.BitsPerSample.length) {\n      throw new RangeError(`Sample index ${i} is out of range.`);\n    }\n    const bits = this.fileDirectory.BitsPerSample[i];\n    if ((bits % 8) !== 0) {\n      throw new Error(`Sample bit-width of ${bits} is not supported.`);\n    }\n    return (bits / 8);\n  }\n\n  getReaderForSample(sampleIndex) {\n    const format = this.fileDirectory.SampleFormat\n      ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n    const bitsPerSample = this.fileDirectory.BitsPerSample[sampleIndex];\n    switch (format) {\n      case 1: // unsigned integer data\n        switch (bitsPerSample) {\n          case 8:\n            return DataView.prototype.getUint8;\n          case 16:\n            return DataView.prototype.getUint16;\n          case 32:\n            return DataView.prototype.getUint32;\n          default:\n            break;\n        }\n        break;\n      case 2: // twos complement signed integer data\n        switch (bitsPerSample) {\n          case 8:\n            return DataView.prototype.getInt8;\n          case 16:\n            return DataView.prototype.getInt16;\n          case 32:\n            return DataView.prototype.getInt32;\n          default:\n            break;\n        }\n        break;\n      case 3:\n        switch (bitsPerSample) {\n          case 32:\n            return DataView.prototype.getFloat32;\n          case 64:\n            return DataView.prototype.getFloat64;\n          default:\n            break;\n        }\n        break;\n      default:\n        break;\n    }\n    throw Error('Unsupported data format/bitsPerSample');\n  }\n\n  getArrayForSample(sampleIndex, size) {\n    const format = this.fileDirectory.SampleFormat\n      ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n    const bitsPerSample = this.fileDirectory.BitsPerSample[sampleIndex];\n    return arrayForType(format, bitsPerSample, size);\n  }\n\n  /**\n   * Returns the decoded strip or tile.\n   * @param {Number} x the strip or tile x-offset\n   * @param {Number} y the tile y-offset (0 for stripped images)\n   * @param {Number} sample the sample to get for separated samples\n   * @param {Pool|AbstractDecoder} poolOrDecoder the decoder or decoder pool\n   * @returns {Promise.<ArrayBuffer>}\n   */\n  async getTileOrStrip(x, y, sample, poolOrDecoder) {\n    const numTilesPerRow = Math.ceil(this.getWidth() / this.getTileWidth());\n    const numTilesPerCol = Math.ceil(this.getHeight() / this.getTileHeight());\n    let index;\n    const { tiles } = this;\n    if (this.planarConfiguration === 1) {\n      index = (y * numTilesPerRow) + x;\n    } else if (this.planarConfiguration === 2) {\n      index = (sample * numTilesPerRow * numTilesPerCol) + (y * numTilesPerRow) + x;\n    }\n\n    let offset;\n    let byteCount;\n    if (this.isTiled) {\n      offset = this.fileDirectory.TileOffsets[index];\n      byteCount = this.fileDirectory.TileByteCounts[index];\n    } else {\n      offset = this.fileDirectory.StripOffsets[index];\n      byteCount = this.fileDirectory.StripByteCounts[index];\n    }\n    const slice = await this.source.fetch(offset, byteCount);\n\n    // either use the provided pool or decoder to decode the data\n    let request;\n    if (tiles === null) {\n      request = poolOrDecoder.decode(this.fileDirectory, slice);\n    } else if (!tiles[index]) {\n      request = poolOrDecoder.decode(this.fileDirectory, slice);\n      tiles[index] = request;\n    }\n    return { x, y, sample, data: await request };\n  }\n\n  /**\n   * Internal read function.\n   * @private\n   * @param {Array} imageWindow The image window in pixel coordinates\n   * @param {Array} samples The selected samples (0-based indices)\n   * @param {TypedArray[]|TypedArray} valueArrays The array(s) to write into\n   * @param {Boolean} interleave Whether or not to write in an interleaved manner\n   * @param {Pool} pool The decoder pool\n   * @returns {Promise<TypedArray[]>|Promise<TypedArray>}\n   */\n  async _readRaster(imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod) {\n    const tileWidth = this.getTileWidth();\n    const tileHeight = this.getTileHeight();\n\n    const minXTile = Math.max(Math.floor(imageWindow[0] / tileWidth), 0);\n    const maxXTile = Math.min(\n      Math.ceil(imageWindow[2] / tileWidth),\n      Math.ceil(this.getWidth() / this.getTileWidth()),\n    );\n    const minYTile = Math.max(Math.floor(imageWindow[1] / tileHeight), 0);\n    const maxYTile = Math.min(\n      Math.ceil(imageWindow[3] / tileHeight),\n      Math.ceil(this.getHeight() / this.getTileHeight()),\n    );\n    const windowWidth = imageWindow[2] - imageWindow[0];\n\n    let bytesPerPixel = this.getBytesPerPixel();\n\n    const srcSampleOffsets = [];\n    const sampleReaders = [];\n    for (let i = 0; i < samples.length; ++i) {\n      if (this.planarConfiguration === 1) {\n        srcSampleOffsets.push(sum(this.fileDirectory.BitsPerSample, 0, samples[i]) / 8);\n      } else {\n        srcSampleOffsets.push(0);\n      }\n      sampleReaders.push(this.getReaderForSample(samples[i]));\n    }\n\n    const promises = [];\n    const { littleEndian } = this;\n\n    for (let yTile = minYTile; yTile < maxYTile; ++yTile) {\n      for (let xTile = minXTile; xTile < maxXTile; ++xTile) {\n        for (let sampleIndex = 0; sampleIndex < samples.length; ++sampleIndex) {\n          const si = sampleIndex;\n          const sample = samples[sampleIndex];\n          if (this.planarConfiguration === 2) {\n            bytesPerPixel = this.getSampleByteSize(sample);\n          }\n          const promise = this.getTileOrStrip(xTile, yTile, sample, poolOrDecoder);\n          promises.push(promise);\n          promise.then((tile) => {\n            const buffer = tile.data;\n            const dataView = new DataView(buffer);\n            const firstLine = tile.y * tileHeight;\n            const firstCol = tile.x * tileWidth;\n            const lastLine = (tile.y + 1) * tileHeight;\n            const lastCol = (tile.x + 1) * tileWidth;\n            const reader = sampleReaders[si];\n\n            const ymax = Math.min(tileHeight, tileHeight - (lastLine - imageWindow[3]));\n            const xmax = Math.min(tileWidth, tileWidth - (lastCol - imageWindow[2]));\n\n            for (let y = Math.max(0, imageWindow[1] - firstLine); y < ymax; ++y) {\n              for (let x = Math.max(0, imageWindow[0] - firstCol); x < xmax; ++x) {\n                const pixelOffset = ((y * tileWidth) + x) * bytesPerPixel;\n                const value = reader.call(\n                  dataView, pixelOffset + srcSampleOffsets[si], littleEndian,\n                );\n                let windowCoordinate;\n                if (interleave) {\n                  windowCoordinate = ((y + firstLine - imageWindow[1]) * windowWidth * samples.length)\n                    + ((x + firstCol - imageWindow[0]) * samples.length)\n                    + si;\n                  valueArrays[windowCoordinate] = value;\n                } else {\n                  windowCoordinate = (\n                    (y + firstLine - imageWindow[1]) * windowWidth\n                  ) + x + firstCol - imageWindow[0];\n                  valueArrays[si][windowCoordinate] = value;\n                }\n              }\n            }\n          });\n        }\n      }\n    }\n    await Promise.all(promises);\n\n    if ((width && (imageWindow[2] - imageWindow[0]) !== width)\n        || (height && (imageWindow[3] - imageWindow[1]) !== height)) {\n      let resampled;\n      if (interleave) {\n        resampled = resampleInterleaved(\n          valueArrays,\n          imageWindow[2] - imageWindow[0],\n          imageWindow[3] - imageWindow[1],\n          width, height,\n          samples.length,\n          resampleMethod,\n        );\n      } else {\n        resampled = resample(\n          valueArrays,\n          imageWindow[2] - imageWindow[0],\n          imageWindow[3] - imageWindow[1],\n          width, height,\n          resampleMethod,\n        );\n      }\n      resampled.width = width;\n      resampled.height = height;\n      return resampled;\n    }\n\n    valueArrays.width = width || imageWindow[2] - imageWindow[0];\n    valueArrays.height = height || imageWindow[3] - imageWindow[1];\n\n    return valueArrays;\n  }\n\n  /**\n   * Reads raster data from the image. This function reads all selected samples\n   * into separate arrays of the correct type for that sample or into a single\n   * combined array when `interleave` is set. When provided, only a subset\n   * of the raster is read for each sample.\n   *\n   * @param {Object} [options={}] optional parameters\n   * @param {Array} [options.window=whole image] the subset to read data from.\n   * @param {Array} [options.samples=all samples] the selection of samples to read from.\n   * @param {Boolean} [options.interleave=false] whether the data shall be read\n   *                                             in one single array or separate\n   *                                             arrays.\n   * @param {Number} [options.pool=null] The optional decoder pool to use.\n   * @param {number} [options.width] The desired width of the output. When the width is\n   *                                 not the same as the images, resampling will be\n   *                                 performed.\n   * @param {number} [options.height] The desired height of the output. When the width\n   *                                  is not the same as the images, resampling will\n   *                                  be performed.\n   * @param {string} [options.resampleMethod='nearest'] The desired resampling method.\n   * @param {number|number[]} [options.fillValue] The value to use for parts of the image\n   *                                              outside of the images extent. When\n   *                                              multiple samples are requested, an\n   *                                              array of fill values can be passed.\n   * @returns {Promise.<(TypedArray|TypedArray[])>} the decoded arrays as a promise\n   */\n  async readRasters({\n    window: wnd, samples = [], interleave, pool = null,\n    width, height, resampleMethod, fillValue,\n  } = {}) {\n    const imageWindow = wnd || [0, 0, this.getWidth(), this.getHeight()];\n\n    // check parameters\n    if (imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3]) {\n      throw new Error('Invalid subsets');\n    }\n\n    const imageWindowWidth = imageWindow[2] - imageWindow[0];\n    const imageWindowHeight = imageWindow[3] - imageWindow[1];\n    const numPixels = imageWindowWidth * imageWindowHeight;\n\n    if (!samples || !samples.length) {\n      for (let i = 0; i < this.fileDirectory.SamplesPerPixel; ++i) {\n        samples.push(i);\n      }\n    } else {\n      for (let i = 0; i < samples.length; ++i) {\n        if (samples[i] >= this.fileDirectory.SamplesPerPixel) {\n          return Promise.reject(new RangeError(`Invalid sample index '${samples[i]}'.`));\n        }\n      }\n    }\n    let valueArrays;\n    if (interleave) {\n      const format = this.fileDirectory.SampleFormat\n        ? Math.max.apply(null, this.fileDirectory.SampleFormat) : 1;\n      const bitsPerSample = Math.max.apply(null, this.fileDirectory.BitsPerSample);\n      valueArrays = arrayForType(format, bitsPerSample, numPixels * samples.length);\n      if (fillValue) {\n        valueArrays.fill(fillValue);\n      }\n    } else {\n      valueArrays = [];\n      for (let i = 0; i < samples.length; ++i) {\n        const valueArray = this.getArrayForSample(samples[i], numPixels);\n        if (Array.isArray(fillValue) && i < fillValue.length) {\n          valueArray.fill(fillValue[i]);\n        } else if (fillValue && !Array.isArray(fillValue)) {\n          valueArray.fill(fillValue);\n        }\n        valueArrays.push(valueArray);\n      }\n    }\n\n    const poolOrDecoder = pool || getDecoder(this.fileDirectory);\n\n    const result = await this._readRaster(\n      imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod,\n    );\n    return result;\n  }\n\n  /**\n   * Reads raster data from the image as RGB. The result is always an\n   * interleaved typed array.\n   * Colorspaces other than RGB will be transformed to RGB, color maps expanded.\n   * When no other method is applicable, the first sample is used to produce a\n   * greayscale image.\n   * When provided, only a subset of the raster is read for each sample.\n   *\n   * @param {Object} [options] optional parameters\n   * @param {Array} [options.window=whole image] the subset to read data from.\n   * @param {Number} [pool=null] The optional decoder pool to use.\n   * @param {number} [width] The desired width of the output. When the width is no the\n   *                         same as the images, resampling will be performed.\n   * @param {number} [height] The desired height of the output. When the width is no the\n   *                          same as the images, resampling will be performed.\n   * @param {string} [resampleMethod='nearest'] The desired resampling method.\n   * @param {bool} [enableAlpha=false] Enable reading alpha channel if present.\n   * @returns {Promise.<TypedArray|TypedArray[]>} the RGB array as a Promise\n   */\n  async readRGB({ window, pool = null, width, height, resampleMethod, enableAlpha = false } = {}) {\n    const imageWindow = window || [0, 0, this.getWidth(), this.getHeight()];\n\n    // check parameters\n    if (imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3]) {\n      throw new Error('Invalid subsets');\n    }\n\n    const pi = this.fileDirectory.PhotometricInterpretation;\n\n    if (pi === photometricInterpretations.RGB) {\n      let s = [0, 1, 2];\n      if ((!(this.fileDirectory.ExtraSamples === ExtraSamplesValues.Unspecified)) && enableAlpha) {\n        s = [];\n        for (let i = 0; i < this.fileDirectory.BitsPerSample.length; i += 1) {\n          s.push(i);\n        }\n      }\n      return this.readRasters({\n        window,\n        interleave: true,\n        samples: s,\n        pool,\n        width,\n        height,\n      });\n    }\n\n    let samples;\n    switch (pi) {\n      case photometricInterpretations.WhiteIsZero:\n      case photometricInterpretations.BlackIsZero:\n      case photometricInterpretations.Palette:\n        samples = [0];\n        break;\n      case photometricInterpretations.CMYK:\n        samples = [0, 1, 2, 3];\n        break;\n      case photometricInterpretations.YCbCr:\n      case photometricInterpretations.CIELab:\n        samples = [0, 1, 2];\n        break;\n      default:\n        throw new Error('Invalid or unsupported photometric interpretation.');\n    }\n\n    const subOptions = {\n      window: imageWindow,\n      interleave: true,\n      samples,\n      pool,\n      width,\n      height,\n      resampleMethod,\n    };\n    const { fileDirectory } = this;\n    const raster = await this.readRasters(subOptions);\n\n    const max = 2 ** this.fileDirectory.BitsPerSample[0];\n    let data;\n    switch (pi) {\n      case photometricInterpretations.WhiteIsZero:\n        data = fromWhiteIsZero(raster, max);\n        break;\n      case photometricInterpretations.BlackIsZero:\n        data = fromBlackIsZero(raster, max);\n        break;\n      case photometricInterpretations.Palette:\n        data = fromPalette(raster, fileDirectory.ColorMap);\n        break;\n      case photometricInterpretations.CMYK:\n        data = fromCMYK(raster);\n        break;\n      case photometricInterpretations.YCbCr:\n        data = fromYCbCr(raster);\n        break;\n      case photometricInterpretations.CIELab:\n        data = fromCIELab(raster);\n        break;\n      default:\n        throw new Error('Unsupported photometric interpretation.');\n    }\n    data.width = raster.width;\n    data.height = raster.height;\n    return data;\n  }\n\n  /**\n   * Returns an array of tiepoints.\n   * @returns {Object[]}\n   */\n  getTiePoints() {\n    if (!this.fileDirectory.ModelTiepoint) {\n      return [];\n    }\n\n    const tiePoints = [];\n    for (let i = 0; i < this.fileDirectory.ModelTiepoint.length; i += 6) {\n      tiePoints.push({\n        i: this.fileDirectory.ModelTiepoint[i],\n        j: this.fileDirectory.ModelTiepoint[i + 1],\n        k: this.fileDirectory.ModelTiepoint[i + 2],\n        x: this.fileDirectory.ModelTiepoint[i + 3],\n        y: this.fileDirectory.ModelTiepoint[i + 4],\n        z: this.fileDirectory.ModelTiepoint[i + 5],\n      });\n    }\n    return tiePoints;\n  }\n\n  /**\n   * Returns the parsed GDAL metadata items.\n   *\n   * If sample is passed to null, dataset-level metadata will be returned.\n   * Otherwise only metadata specific to the provided sample will be returned.\n   *\n   * @param {Number} [sample=null] The sample index.\n   * @returns {Object}\n   */\n  getGDALMetadata(sample = null) {\n    const metadata = {};\n    if (!this.fileDirectory.GDAL_METADATA) {\n      return null;\n    }\n    const string = this.fileDirectory.GDAL_METADATA;\n    const xmlDom = txml(string.substring(0, string.length - 1));\n\n    if (!xmlDom[0].tagName) {\n      throw new Error('Failed to parse GDAL metadata XML.');\n    }\n\n    const root = xmlDom[0];\n    if (root.tagName !== 'GDALMetadata') {\n      throw new Error('Unexpected GDAL metadata XML tag.');\n    }\n\n    let items = root.children\n      .filter((child) => child.tagName === 'Item');\n\n    if (sample) {\n      items = items.filter((item) => Number(item.attributes.sample) === sample);\n    }\n\n    for (let i = 0; i < items.length; ++i) {\n      const item = items[i];\n      metadata[item.attributes.name] = item.children[0];\n    }\n    return metadata;\n  }\n\n  /**\n   * Returns the GDAL nodata value\n   * @returns {Number} or null\n   */\n  getGDALNoData() {\n    if (!this.fileDirectory.GDAL_NODATA) {\n      return null;\n    }\n    const string = this.fileDirectory.GDAL_NODATA;\n    return Number(string.substring(0, string.length - 1));\n  }\n\n  /**\n   * Returns the image origin as a XYZ-vector. When the image has no affine\n   * transformation, then an exception is thrown.\n   * @returns {Array} The origin as a vector\n   */\n  getOrigin() {\n    const tiePoints = this.fileDirectory.ModelTiepoint;\n    const modelTransformation = this.fileDirectory.ModelTransformation;\n    if (tiePoints && tiePoints.length === 6) {\n      return [\n        tiePoints[3],\n        tiePoints[4],\n        tiePoints[5],\n      ];\n    }\n    if (modelTransformation) {\n      return [\n        modelTransformation[3],\n        modelTransformation[7],\n        modelTransformation[11],\n      ];\n    }\n    throw new Error('The image does not have an affine transformation.');\n  }\n\n  /**\n   * Returns the image resolution as a XYZ-vector. When the image has no affine\n   * transformation, then an exception is thrown.\n   * @param {GeoTIFFImage} [referenceImage=null] A reference image to calculate the resolution from\n   *                                             in cases when the current image does not have the\n   *                                             required tags on its own.\n   * @returns {Array} The resolution as a vector\n   */\n  getResolution(referenceImage = null) {\n    const modelPixelScale = this.fileDirectory.ModelPixelScale;\n    const modelTransformation = this.fileDirectory.ModelTransformation;\n\n    if (modelPixelScale) {\n      return [\n        modelPixelScale[0],\n        -modelPixelScale[1],\n        modelPixelScale[2],\n      ];\n    }\n    if (modelTransformation) {\n      return [\n        modelTransformation[0],\n        modelTransformation[5],\n        modelTransformation[10],\n      ];\n    }\n\n    if (referenceImage) {\n      const [refResX, refResY, refResZ] = referenceImage.getResolution();\n      return [\n        refResX * referenceImage.getWidth() / this.getWidth(),\n        refResY * referenceImage.getHeight() / this.getHeight(),\n        refResZ * referenceImage.getWidth() / this.getWidth(),\n      ];\n    }\n\n    throw new Error('The image does not have an affine transformation.');\n  }\n\n  /**\n   * Returns whether or not the pixels of the image depict an area (or point).\n   * @returns {Boolean} Whether the pixels are a point\n   */\n  pixelIsArea() {\n    return this.geoKeys.GTRasterTypeGeoKey === 1;\n  }\n\n  /**\n   * Returns the image bounding box as an array of 4 values: min-x, min-y,\n   * max-x and max-y. When the image has no affine transformation, then an\n   * exception is thrown.\n   * @returns {Array} The bounding box\n   */\n  getBoundingBox() {\n    const origin = this.getOrigin();\n    const resolution = this.getResolution();\n\n    const x1 = origin[0];\n    const y1 = origin[1];\n\n    const x2 = x1 + (resolution[0] * this.getWidth());\n    const y2 = y1 + (resolution[1] * this.getHeight());\n\n    return [\n      Math.min(x1, x2),\n      Math.min(y1, y2),\n      Math.max(x1, x2),\n      Math.max(y1, y2),\n    ];\n  }\n}\n\nexport default GeoTIFFImage;\n","import RawDecoder from './raw';\nimport LZWDecoder from './lzw';\nimport JpegDecoder from './jpeg';\nimport DeflateDecoder from './deflate';\nimport PackbitsDecoder from './packbits';\n\nexport function getDecoder(fileDirectory) {\n  switch (fileDirectory.Compression) {\n    case undefined:\n    case 1: // no compression\n      return new RawDecoder();\n    case 5: // LZW\n      return new LZWDecoder();\n    case 6: // JPEG\n      throw new Error('old style JPEG compression is not supported.');\n    case 7: // JPEG\n      return new JpegDecoder(fileDirectory);\n    case 8: // Deflate as recognized by Adobe\n    case 32946: // Deflate GDAL default\n      return new DeflateDecoder();\n    case 32773: // packbits\n      return new PackbitsDecoder();\n    default:\n      throw new Error(`Unknown compression method identifier: ${fileDirectory.Compression}`);\n  }\n}\n","export function fromWhiteIsZero(raster, max) {\n  const { width, height } = raster;\n  const rgbRaster = new Uint8Array(width * height * 3);\n  let value;\n  for (let i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = 256 - (raster[i] / max * 256);\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n  return rgbRaster;\n}\n\nexport function fromBlackIsZero(raster, max) {\n  const { width, height } = raster;\n  const rgbRaster = new Uint8Array(width * height * 3);\n  let value;\n  for (let i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = raster[i] / max * 256;\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n  return rgbRaster;\n}\n\nexport function fromPalette(raster, colorMap) {\n  const { width, height } = raster;\n  const rgbRaster = new Uint8Array(width * height * 3);\n  const greenOffset = colorMap.length / 3;\n  const blueOffset = colorMap.length / 3 * 2;\n  for (let i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    const mapIndex = raster[i];\n    rgbRaster[j] = colorMap[mapIndex] / 65536 * 256;\n    rgbRaster[j + 1] = colorMap[mapIndex + greenOffset] / 65536 * 256;\n    rgbRaster[j + 2] = colorMap[mapIndex + blueOffset] / 65536 * 256;\n  }\n  return rgbRaster;\n}\n\nexport function fromCMYK(cmykRaster) {\n  const { width, height } = cmykRaster;\n  const rgbRaster = new Uint8Array(width * height * 3);\n  for (let i = 0, j = 0; i < cmykRaster.length; i += 4, j += 3) {\n    const c = cmykRaster[i];\n    const m = cmykRaster[i + 1];\n    const y = cmykRaster[i + 2];\n    const k = cmykRaster[i + 3];\n\n    rgbRaster[j] = 255 * ((255 - c) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 1] = 255 * ((255 - m) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 2] = 255 * ((255 - y) / 256) * ((255 - k) / 256);\n  }\n  return rgbRaster;\n}\n\nexport function fromYCbCr(yCbCrRaster) {\n  const { width, height } = yCbCrRaster;\n  const rgbRaster = new Uint8ClampedArray(width * height * 3);\n  for (let i = 0, j = 0; i < yCbCrRaster.length; i += 3, j += 3) {\n    const y = yCbCrRaster[i];\n    const cb = yCbCrRaster[i + 1];\n    const cr = yCbCrRaster[i + 2];\n\n    rgbRaster[j] = (y + (1.40200 * (cr - 0x80)));\n    rgbRaster[j + 1] = (y - (0.34414 * (cb - 0x80)) - (0.71414 * (cr - 0x80)));\n    rgbRaster[j + 2] = (y + (1.77200 * (cb - 0x80)));\n  }\n  return rgbRaster;\n}\n\nconst Xn = 0.95047;\nconst Yn = 1.00000;\nconst Zn = 1.08883;\n\n// from https://github.com/antimatter15/rgb-lab/blob/master/color.js\n\nexport function fromCIELab(cieLabRaster) {\n  const { width, height } = cieLabRaster;\n  const rgbRaster = new Uint8Array(width * height * 3);\n\n  for (let i = 0, j = 0; i < cieLabRaster.length; i += 3, j += 3) {\n    const L = cieLabRaster[i + 0];\n    const a_ = cieLabRaster[i + 1] << 24 >> 24; // conversion from uint8 to int8\n    const b_ = cieLabRaster[i + 2] << 24 >> 24; // same\n\n    let y = (L + 16) / 116;\n    let x = (a_ / 500) + y;\n    let z = y - (b_ / 200);\n    let r;\n    let g;\n    let b;\n\n    x = Xn * ((x * x * x > 0.008856) ? x * x * x : (x - (16 / 116)) / 7.787);\n    y = Yn * ((y * y * y > 0.008856) ? y * y * y : (y - (16 / 116)) / 7.787);\n    z = Zn * ((z * z * z > 0.008856) ? z * z * z : (z - (16 / 116)) / 7.787);\n\n    r = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n    g = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n    b = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n    r = (r > 0.0031308) ? ((1.055 * (r ** (1 / 2.4))) - 0.055) : 12.92 * r;\n    g = (g > 0.0031308) ? ((1.055 * (g ** (1 / 2.4))) - 0.055) : 12.92 * g;\n    b = (b > 0.0031308) ? ((1.055 * (b ** (1 / 2.4))) - 0.055) : 12.92 * b;\n\n    rgbRaster[j] = Math.max(0, Math.min(1, r)) * 255;\n    rgbRaster[j + 1] = Math.max(0, Math.min(1, g)) * 255;\n    rgbRaster[j + 2] = Math.max(0, Math.min(1, b)) * 255;\n  }\n  return rgbRaster;\n}\n","export default class DataView64 {\n  constructor(arrayBuffer) {\n    this._dataView = new DataView(arrayBuffer);\n  }\n\n  get buffer() {\n    return this._dataView.buffer;\n  }\n\n  getUint64(offset, littleEndian) {\n    const left = this.getUint32(offset, littleEndian);\n    const right = this.getUint32(offset + 4, littleEndian);\n    let combined;\n    if (littleEndian) {\n      combined = left + 2 ** 32 * right;\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\n          `${combined} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`\n        );\n      }\n      return combined;\n    }\n    combined = 2 ** 32 * left + right;\n    if (!Number.isSafeInteger(combined)) {\n      throw new Error(\n        `${combined} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`\n      );\n    }\n\n    return combined;\n  }\n\n  // adapted from https://stackoverflow.com/a/55338384/8060591\n  getInt64(offset, littleEndian) {\n    let value = 0;\n    const isNegative =\n      (this._dataView.getUint8(offset + (littleEndian ? 7 : 0)) & 0x80) > 0;\n    let carrying = true;\n    for (let i = 0; i < 8; i++) {\n      let byte = this._dataView.getUint8(offset + (littleEndian ? i : 7 - i));\n      if (isNegative) {\n        if (carrying) {\n          if (byte !== 0x00) {\n            byte = ~(byte - 1) & 0xff;\n            carrying = false;\n          }\n        } else {\n          byte = ~byte & 0xff;\n        }\n      }\n      value += byte * 256 ** i;\n    }\n    if (isNegative) {\n      value = -value;\n    }\n    return value;\n  }\n\n  getUint8(offset, littleEndian) {\n    return this._dataView.getUint8(offset, littleEndian);\n  }\n\n  getInt8(offset, littleEndian) {\n    return this._dataView.getInt8(offset, littleEndian);\n  }\n\n  getUint16(offset, littleEndian) {\n    return this._dataView.getUint16(offset, littleEndian);\n  }\n\n  getInt16(offset, littleEndian) {\n    return this._dataView.getInt16(offset, littleEndian);\n  }\n\n  getUint32(offset, littleEndian) {\n    return this._dataView.getUint32(offset, littleEndian);\n  }\n\n  getInt32(offset, littleEndian) {\n    return this._dataView.getInt32(offset, littleEndian);\n  }\n\n  getFloat32(offset, littleEndian) {\n    return this._dataView.getFloat32(offset, littleEndian);\n  }\n\n  getFloat64(offset, littleEndian) {\n    return this._dataView.getFloat64(offset, littleEndian);\n  }\n}\n","export default class DataSlice {\n  constructor(arrayBuffer, sliceOffset, littleEndian, bigTiff) {\n    this._dataView = new DataView(arrayBuffer);\n    this._sliceOffset = sliceOffset;\n    this._littleEndian = littleEndian;\n    this._bigTiff = bigTiff;\n  }\n\n  get sliceOffset() {\n    return this._sliceOffset;\n  }\n\n  get sliceTop() {\n    return this._sliceOffset + this.buffer.byteLength;\n  }\n\n  get littleEndian() {\n    return this._littleEndian;\n  }\n\n  get bigTiff() {\n    return this._bigTiff;\n  }\n\n  get buffer() {\n    return this._dataView.buffer;\n  }\n\n  covers(offset, length) {\n    return this.sliceOffset <= offset && this.sliceTop >= offset + length;\n  }\n\n  readUint8(offset) {\n    return this._dataView.getUint8(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readInt8(offset) {\n    return this._dataView.getInt8(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readUint16(offset) {\n    return this._dataView.getUint16(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readInt16(offset) {\n    return this._dataView.getInt16(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readUint32(offset) {\n    return this._dataView.getUint32(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readInt32(offset) {\n    return this._dataView.getInt32(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readFloat32(offset) {\n    return this._dataView.getFloat32(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readFloat64(offset) {\n    return this._dataView.getFloat64(\n      offset - this._sliceOffset, this._littleEndian,\n    );\n  }\n\n  readUint64(offset) {\n    const left = this.readUint32(offset);\n    const right = this.readUint32(offset + 4);\n    let combined;\n    if (this._littleEndian) {\n      combined = left + 2 ** 32 * right;\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\n          `${combined} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`,\n        );\n      }\n      return combined;\n    }\n    combined = 2 ** 32 * left + right;\n    if (!Number.isSafeInteger(combined)) {\n      throw new Error(\n        `${combined} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`,\n      );\n    }\n\n    return combined;\n  }\n\n  // adapted from https://stackoverflow.com/a/55338384/8060591\n  readInt64(offset) {\n    let value = 0;\n    const isNegative =\n      (this._dataView.getUint8(offset + (this._littleEndian ? 7 : 0)) & 0x80) >\n      0;\n    let carrying = true;\n    for (let i = 0; i < 8; i++) {\n      let byte = this._dataView.getUint8(\n        offset + (this._littleEndian ? i : 7 - i)\n      );\n      if (isNegative) {\n        if (carrying) {\n          if (byte !== 0x00) {\n            byte = ~(byte - 1) & 0xff;\n            carrying = false;\n          }\n        } else {\n          byte = ~byte & 0xff;\n        }\n      }\n      value += byte * 256 ** i;\n    }\n    if (isNegative) {\n      value = -value;\n    }\n    return value\n  }\n\n  readOffset(offset) {\n    if (this._bigTiff) {\n      return this.readUint64(offset);\n    }\n    return this.readUint32(offset);\n  }\n}\n","import { Pool as tPool, spawn, Worker } from 'threads';\n\nconst defaultPoolSize = typeof navigator !== 'undefined' ? navigator.hardwareConcurrency : null;\n\n/**\n * @module pool\n */\n\n/**\n * Pool for workers to decode chunks of the images.\n */\nclass Pool {\n  /**\n   * @constructor\n   * @param {Number} size The size of the pool. Defaults to the number of CPUs\n   *                      available. When this parameter is `null` or 0, then the\n   *                      decoding will be done in the main thread.\n   */\n  constructor(size = defaultPoolSize) {\n    const worker = new Worker('./decoder.worker.js');\n    this.pool = tPool(() => spawn(worker), size);\n  }\n\n  /**\n   * Decode the given block of bytes with the set compression method.\n   * @param {ArrayBuffer} buffer the array buffer of bytes to decode.\n   * @returns {Promise.<ArrayBuffer>} the decoded result as a `Promise`\n   */\n  async decode(fileDirectory, buffer) {\n    return new Promise((resolve, reject) => {\n      this.pool.queue(async (decode) => {\n        try {\n          const data = await decode(fileDirectory, buffer);\n          resolve(data);\n        } catch (err) {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  destroy() {\n    this.pool.terminate(true);\n  }\n}\n\nexport default Pool;\n","import { Buffer } from 'buffer';\nimport { open, read, close } from 'fs';\nimport http from 'http';\nimport https from 'https';\nimport urlMod from 'url';\n\n\nfunction readRangeFromBlocks(blocks, rangeOffset, rangeLength) {\n  const rangeTop = rangeOffset + rangeLength;\n  const rangeData = new ArrayBuffer(rangeLength);\n  const rangeView = new Uint8Array(rangeData);\n\n  for (const block of blocks) {\n    const delta = block.offset - rangeOffset;\n    const topDelta = block.top - rangeTop;\n    let blockInnerOffset = 0;\n    let rangeInnerOffset = 0;\n    let usedBlockLength;\n\n    if (delta < 0) {\n      blockInnerOffset = -delta;\n    } else if (delta > 0) {\n      rangeInnerOffset = delta;\n    }\n\n    if (topDelta < 0) {\n      usedBlockLength = block.length - blockInnerOffset;\n    } else if (topDelta > 0) {\n      usedBlockLength = rangeTop - block.offset - blockInnerOffset;\n    }\n\n    const blockView = new Uint8Array(block.data, blockInnerOffset, usedBlockLength);\n    rangeView.set(blockView, rangeInnerOffset);\n  }\n\n  return rangeData;\n}\n\n/**\n * Interface for Source objects.\n * @interface Source\n */\n\n/**\n * @function Source#fetch\n * @summary The main method to retrieve the data from the source.\n * @param {number} offset The offset to read from in the source\n * @param {number} length The requested number of bytes\n */\n\n/**\n * @typedef {object} Block\n * @property {ArrayBuffer} data The actual data of the block.\n * @property {number} offset The actual offset of the block within the file.\n * @property {number} length The actual size of the block in bytes.\n */\n\n/**\n * Callback type for sources to request patches of data.\n * @callback requestCallback\n * @async\n * @param {number} offset The offset within the file.\n * @param {number} length The desired length of data to be read.\n * @returns {Promise<Block>} The block of data.\n */\n\n/**\n * @module source\n */\n\n/*\n * Split a list of identifiers to form groups of coherent ones\n */\nfunction getCoherentBlockGroups(blockIds) {\n  if (blockIds.length === 0) {\n    return [];\n  }\n\n  const groups = [];\n  let current = [];\n  groups.push(current);\n\n  for (let i = 0; i < blockIds.length; ++i) {\n    if (i === 0 || blockIds[i] === blockIds[i - 1] + 1) {\n      current.push(blockIds[i]);\n    } else {\n      current = [blockIds[i]];\n      groups.push(current);\n    }\n  }\n  return groups;\n}\n\n\n/*\n * Promisified wrapper around 'setTimeout' to allow 'await'\n */\nasync function wait(milliseconds) {\n  return new Promise((resolve) => setTimeout(resolve, milliseconds));\n}\n\n/**\n * BlockedSource - an abstraction of (remote) files.\n * @implements Source\n */\nclass BlockedSource {\n  /**\n   * @param {requestCallback} retrievalFunction Callback function to request data\n   * @param {object} options Additional options\n   * @param {object} options.blockSize Size of blocks to be fetched\n   */\n  constructor(retrievalFunction, { blockSize = 65536 } = {}) {\n    this.retrievalFunction = retrievalFunction;\n    this.blockSize = blockSize;\n\n    // currently running block requests\n    this.blockRequests = new Map();\n\n    // already retrieved blocks\n    this.blocks = new Map();\n\n    // block ids waiting for a batched request. Either a Set or null\n    this.blockIdsAwaitingRequest = null;\n  }\n\n  /**\n   * Fetch a subset of the file.\n   * @param {number} offset The offset within the file to read from.\n   * @param {number} length The length in bytes to read from.\n   * @returns {ArrayBuffer} The subset of the file.\n   */\n  async fetch(offset, length, immediate = false) {\n    const top = offset + length;\n\n    // calculate what blocks intersect the specified range (offset + length)\n    // determine what blocks are already stored or beeing requested\n    const firstBlockOffset = Math.floor(offset / this.blockSize) * this.blockSize;\n    const allBlockIds = [];\n    const missingBlockIds = [];\n    const blockRequests = [];\n\n    for (let current = firstBlockOffset; current < top; current += this.blockSize) {\n      const blockId = Math.floor(current / this.blockSize);\n      if (!this.blocks.has(blockId) && !this.blockRequests.has(blockId)) {\n        missingBlockIds.push(blockId);\n      }\n      if (this.blockRequests.has(blockId)) {\n        blockRequests.push(this.blockRequests.get(blockId));\n      }\n      allBlockIds.push(blockId);\n    }\n\n    // determine whether there are already blocks in the queue to be requested\n    // if so, add the missing blocks to this list\n    if (!this.blockIdsAwaitingRequest) {\n      this.blockIdsAwaitingRequest = new Set(missingBlockIds);\n    } else {\n      for (let i = 0; i < missingBlockIds.length; ++i) {\n        const id = missingBlockIds[i];\n        this.blockIdsAwaitingRequest.add(id);\n      }\n    }\n\n    // in immediate mode, we don't want to wait for possible additional requests coming in\n    if (!immediate) {\n      await wait();\n    }\n\n    // determine if we are the thread to start the requests.\n    if (this.blockIdsAwaitingRequest) {\n      // get all coherent blocks as groups to be requested in a single request\n      const groups = getCoherentBlockGroups(\n        Array.from(this.blockIdsAwaitingRequest).sort(),\n      );\n\n      // iterate over all blocks\n      for (const group of groups) {\n        // fetch a group as in a single request\n        const request = this.requestData(\n          group[0] * this.blockSize, group.length * this.blockSize,\n        );\n\n        // for each block in the request, make a small 'splitter',\n        // i.e: wait for the request to finish, then cut out the bytes for\n        // that block and store it there.\n        // we keep that as a promise in 'blockRequests' to allow waiting on\n        // a single block.\n        for (let i = 0; i < group.length; ++i) {\n          const id = group[i];\n          this.blockRequests.set(id, (async () => {\n            const response = await request;\n            const o = i * this.blockSize;\n            const t = Math.min(o + this.blockSize, response.data.byteLength);\n            const data = response.data.slice(o, t);\n            this.blockRequests.delete(id);\n            this.blocks.set(id, {\n              data,\n              offset: response.offset + o,\n              length: data.byteLength,\n              top: response.offset + t,\n            });\n          })());\n        }\n      }\n      this.blockIdsAwaitingRequest = null;\n    }\n\n    // get a list of currently running requests for the blocks still missing\n    const missingRequests = [];\n    for (const blockId of missingBlockIds) {\n      if (this.blockRequests.has(blockId)) {\n        missingRequests.push(this.blockRequests.get(blockId));\n      }\n    }\n\n    // wait for all missing requests to finish\n    await Promise.all(missingRequests);\n    await Promise.all(blockRequests);\n\n    // now get all blocks for the request and return a summary buffer\n    const blocks = allBlockIds.map((id) => this.blocks.get(id));\n    return readRangeFromBlocks(blocks, offset, length);\n  }\n\n  async requestData(requestedOffset, requestedLength) {\n    const response = await this.retrievalFunction(requestedOffset, requestedLength);\n    if (!response.length) {\n      response.length = response.data.byteLength;\n    } else if (response.length !== response.data.byteLength) {\n      response.data = response.data.slice(0, response.length);\n    }\n    response.top = response.offset + response.length;\n    return response;\n  }\n}\n\n/**\n * Create a new source to read from a remote file using the\n * [fetch]{@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API} API.\n * @param {string} url The URL to send requests to.\n * @param {Object} [options] Additional options.\n * @param {Number} [options.blockSize] The block size to use.\n * @param {object} [options.headers] Additional headers to be sent to the server.\n * @returns The constructed source\n */\nexport function makeFetchSource(url, { headers = {}, blockSize } = {}) {\n  return new BlockedSource(async (offset, length) => {\n    const response = await fetch(url, {\n      headers: {\n        ...headers, Range: `bytes=${offset}-${offset + length - 1}`,\n      },\n    });\n\n    // check the response was okay and if the server actually understands range requests\n    if (!response.ok) {\n      throw new Error('Error fetching data.');\n    } else if (response.status === 206) {\n      const data = response.arrayBuffer\n        ? await response.arrayBuffer() : (await response.buffer()).buffer;\n      return {\n        data,\n        offset,\n        length,\n      };\n    } else {\n      const data = response.arrayBuffer\n        ? await response.arrayBuffer() : (await response.buffer()).buffer;\n      return {\n        data,\n        offset: 0,\n        length: data.byteLength,\n      };\n    }\n  }, { blockSize });\n}\n\n/**\n * Create a new source to read from a remote file using the\n * [XHR]{@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest} API.\n * @param {string} url The URL to send requests to.\n * @param {Object} [options] Additional options.\n * @param {Number} [options.blockSize] The block size to use.\n * @param {object} [options.headers] Additional headers to be sent to the server.\n * @returns The constructed source\n */\nexport function makeXHRSource(url, { headers = {}, blockSize } = {}) {\n  return new BlockedSource(async (offset, length) => {\n    return new Promise((resolve, reject) => {\n      const request = new XMLHttpRequest();\n      request.open('GET', url);\n      request.responseType = 'arraybuffer';\n      const requestHeaders = { ...headers, Range: `bytes=${offset}-${offset + length - 1}` };\n      for (const [key, value] of Object.entries(requestHeaders)) {\n        request.setRequestHeader(key, value);\n      }\n\n      request.onload = () => {\n        const data = request.response;\n        if (request.status === 206) {\n          resolve({\n            data,\n            offset,\n            length,\n          });\n        } else {\n          resolve({\n            data,\n            offset: 0,\n            length: data.byteLength,\n          });\n        }\n      };\n      request.onerror = reject;\n      request.send();\n    });\n  }, { blockSize });\n}\n\n/**\n * Create a new source to read from a remote file using the node\n * [http]{@link https://nodejs.org/api/http.html} API.\n * @param {string} url The URL to send requests to.\n * @param {Object} [options] Additional options.\n * @param {Number} [options.blockSize] The block size to use.\n * @param {object} [options.headers] Additional headers to be sent to the server.\n */\nexport function makeHttpSource(url, { headers = {}, blockSize } = {}) {\n  return new BlockedSource(async (offset, length) => new Promise((resolve, reject) => {\n    const parsed = urlMod.parse(url);\n    const request = (parsed.protocol === 'http:' ? http : https).get(\n      { ...parsed,\n        headers: {\n          ...headers, Range: `bytes=${offset}-${offset + length - 1}`,\n        } }, (result) => {\n        const chunks = [];\n        // collect chunks\n        result.on('data', (chunk) => {\n          chunks.push(chunk);\n        });\n\n        // concatenate all chunks and resolve the promise with the resulting buffer\n        result.on('end', () => {\n          const data = Buffer.concat(chunks).buffer;\n          resolve({\n            data,\n            offset,\n            length: data.byteLength,\n          });\n        });\n      },\n    );\n    request.on('error', reject);\n  }), { blockSize });\n}\n\n/**\n * Create a new source to read from a remote file. Uses either XHR, fetch or nodes http API.\n * @param {string} url The URL to send requests to.\n * @param {Object} [options] Additional options.\n * @param {Boolean} [options.forceXHR] Force the usage of XMLHttpRequest.\n * @param {Number} [options.blockSize] The block size to use.\n * @param {object} [options.headers] Additional headers to be sent to the server.\n * @returns The constructed source\n */\nexport function makeRemoteSource(url, options) {\n  const { forceXHR } = options;\n  if (typeof fetch === 'function' && !forceXHR) {\n    return makeFetchSource(url, options);\n  }\n  if (typeof XMLHttpRequest !== 'undefined') {\n    return makeXHRSource(url, options);\n  }\n  if (http.get) {\n    return makeHttpSource(url, options);\n  }\n  throw new Error('No remote source available');\n}\n\n/**\n * Create a new source to read from a local\n * [ArrayBuffer]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer}.\n * @param {ArrayBuffer} arrayBuffer The ArrayBuffer to parse the GeoTIFF from.\n * @returns The constructed source\n */\nexport function makeBufferSource(arrayBuffer) {\n  return {\n    async fetch(offset, length) {\n      return arrayBuffer.slice(offset, offset + length);\n    },\n  };\n}\n\nfunction closeAsync(fd) {\n  return new Promise((resolve, reject) => {\n    close(fd, err => {\n      if (err) {\n        reject(err)\n      } else {\n        resolve()\n      }\n    });\n  });\n}\n\nfunction openAsync(path, flags, mode = undefined) {\n  return new Promise((resolve, reject) => {\n    open(path, flags, mode, (err, fd) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(fd);\n      }\n    });\n  });\n}\n\nfunction readAsync(...args) {\n  return new Promise((resolve, reject) => {\n    read(...args, (err, bytesRead, buffer) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve({ bytesRead, buffer });\n      }\n    });\n  });\n}\n\n/**\n * Creates a new source using the node filesystem API.\n * @param {string} path The path to the file in the local filesystem.\n * @returns The constructed source\n */\nexport function makeFileSource(path) {\n  const fileOpen = openAsync(path, 'r');\n\n  return {\n    async fetch(offset, length) {\n      const fd = await fileOpen;\n      const { buffer } = await readAsync(fd, Buffer.alloc(length), 0, length, offset);\n      return buffer.buffer;\n    },\n    async close() {\n      const fd = await fileOpen;\n      return await closeAsync(fd);\n    },\n  };\n}\n\n/**\n * Create a new source from a given file/blob.\n * @param {Blob} file The file or blob to read from.\n * @returns The constructed source\n */\nexport function makeFileReaderSource(file) {\n  return {\n    async fetch(offset, length) {\n      return new Promise((resolve, reject) => {\n        const blob = file.slice(offset, offset + length);\n        const reader = new FileReader();\n        reader.onload = (event) => resolve(event.target.result);\n        reader.onerror = reject;\n        reader.readAsArrayBuffer(blob);\n      });\n    },\n  };\n}\n","export function assign(target, source) {\n  for (const key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n}\n\nexport function chunk(iterable, length) {\n  const results = [];\n  const lengthOfIterable = iterable.length;\n  for (let i = 0; i < lengthOfIterable; i += length) {\n    const chunked = [];\n    for (let ci = i; ci < i + length; ci++) {\n      chunked.push(iterable[ci]);\n    }\n    results.push(chunked);\n  }\n  return results;\n}\n\nexport function endsWith(string, expectedEnding) {\n  if (string.length < expectedEnding.length) {\n    return false;\n  }\n  const actualEnding = string.substr(string.length - expectedEnding.length);\n  return actualEnding === expectedEnding;\n}\n\nexport function forEach(iterable, func) {\n  const { length } = iterable;\n  for (let i = 0; i < length; i++) {\n    func(iterable[i], i);\n  }\n}\n\nexport function invert(oldObj) {\n  const newObj = {};\n  for (const key in oldObj) {\n    if (oldObj.hasOwnProperty(key)) {\n      const value = oldObj[key];\n      newObj[value] = key;\n    }\n  }\n  return newObj;\n}\n\nexport function range(n) {\n  const results = [];\n  for (let i = 0; i < n; i++) {\n    results.push(i);\n  }\n  return results;\n}\n\nexport function times(numTimes, func) {\n  const results = [];\n  for (let i = 0; i < numTimes; i++) {\n    results.push(func(i));\n  }\n  return results;\n}\n\nexport function toArray(iterable) {\n  const results = [];\n  const { length } = iterable;\n  for (let i = 0; i < length; i++) {\n    results.push(iterable[i]);\n  }\n  return results;\n}\n\nexport function toArrayRecursively(input) {\n  if (input.length) {\n    return toArray(input).map(toArrayRecursively);\n  }\n  return input;\n}\n","/*\n  Some parts of this file are based on UTIF.js,\n  which was released under the MIT License.\n  You can view that here:\n  https://github.com/photopea/UTIF.js/blob/master/LICENSE\n*/\nimport { fieldTagNames, fieldTagTypes, fieldTypeNames, geoKeyNames } from './globals';\nimport { assign, endsWith, forEach, invert, times } from './utils';\n\nconst tagName2Code = invert(fieldTagNames);\nconst geoKeyName2Code = invert(geoKeyNames);\nconst name2code = {};\nassign(name2code, tagName2Code);\nassign(name2code, geoKeyName2Code);\nconst typeName2byte = invert(fieldTypeNames);\n\n// config variables\nconst numBytesInIfd = 1000;\n\nconst _binBE = {\n  nextZero: (data, o) => {\n    let oincr = o;\n    while (data[oincr] !== 0) {\n      oincr++;\n    }\n    return oincr;\n  },\n  readUshort: (buff, p) => {\n    return (buff[p] << 8) | buff[p + 1];\n  },\n  readShort: (buff, p) => {\n    const a = _binBE.ui8;\n    a[0] = buff[p + 1];\n    a[1] = buff[p + 0];\n    return _binBE.i16[0];\n  },\n  readInt: (buff, p) => {\n    const a = _binBE.ui8;\n    a[0] = buff[p + 3];\n    a[1] = buff[p + 2];\n    a[2] = buff[p + 1];\n    a[3] = buff[p + 0];\n    return _binBE.i32[0];\n  },\n  readUint: (buff, p) => {\n    const a = _binBE.ui8;\n    a[0] = buff[p + 3];\n    a[1] = buff[p + 2];\n    a[2] = buff[p + 1];\n    a[3] = buff[p + 0];\n    return _binBE.ui32[0];\n  },\n  readASCII: (buff, p, l) => {\n    return l.map((i) => String.fromCharCode(buff[p + i])).join('');\n  },\n  readFloat: (buff, p) => {\n    const a = _binBE.ui8;\n    times(4, (i) => {\n      a[i] = buff[p + 3 - i];\n    });\n    return _binBE.fl32[0];\n  },\n  readDouble: (buff, p) => {\n    const a = _binBE.ui8;\n    times(8, (i) => {\n      a[i] = buff[p + 7 - i];\n    });\n    return _binBE.fl64[0];\n  },\n  writeUshort: (buff, p, n) => {\n    buff[p] = (n >> 8) & 255;\n    buff[p + 1] = n & 255;\n  },\n  writeUint: (buff, p, n) => {\n    buff[p] = (n >> 24) & 255;\n    buff[p + 1] = (n >> 16) & 255;\n    buff[p + 2] = (n >> 8) & 255;\n    buff[p + 3] = (n >> 0) & 255;\n  },\n  writeASCII: (buff, p, s) => {\n    times(s.length, (i) => {\n      buff[p + i] = s.charCodeAt(i);\n    });\n  },\n  ui8: new Uint8Array(8),\n};\n\n_binBE.fl64 = new Float64Array(_binBE.ui8.buffer);\n\n_binBE.writeDouble = (buff, p, n) => {\n  _binBE.fl64[0] = n;\n  times(8, (i) => {\n    buff[p + i] = _binBE.ui8[7 - i];\n  });\n};\n\n\nconst _writeIFD = (bin, data, _offset, ifd) => {\n  let offset = _offset;\n\n  const keys = Object.keys(ifd).filter((key) => {\n    return key !== undefined && key !== null && key !== 'undefined';\n  });\n\n  bin.writeUshort(data, offset, keys.length);\n  offset += 2;\n\n  let eoff = offset + (12 * keys.length) + 4;\n\n  for (const key of keys) {\n    let tag = null;\n    if (typeof key === 'number') {\n      tag = key;\n    } else if (typeof key === 'string') {\n      tag = parseInt(key, 10);\n    }\n\n    const typeName = fieldTagTypes[tag];\n    const typeNum = typeName2byte[typeName];\n\n    if (typeName == null || typeName === undefined || typeof typeName === 'undefined') {\n      throw new Error(`unknown type of tag: ${tag}`);\n    }\n\n    let val = ifd[key];\n\n    if (typeof val === 'undefined') {\n      throw new Error(`failed to get value for key ${key}`);\n    }\n\n    // ASCIIZ format with trailing 0 character\n    // http://www.fileformat.info/format/tiff/corion.htm\n    // https://stackoverflow.com/questions/7783044/whats-the-difference-between-asciiz-vs-ascii\n    if (typeName === 'ASCII' && typeof val === 'string' && endsWith(val, '\\u0000') === false) {\n      val += '\\u0000';\n    }\n\n    const num = val.length;\n\n    bin.writeUshort(data, offset, tag);\n    offset += 2;\n\n    bin.writeUshort(data, offset, typeNum);\n    offset += 2;\n\n    bin.writeUint(data, offset, num);\n    offset += 4;\n\n    let dlen = [-1, 1, 1, 2, 4, 8, 0, 0, 0, 0, 0, 0, 8][typeNum] * num;\n    let toff = offset;\n\n    if (dlen > 4) {\n      bin.writeUint(data, offset, eoff);\n      toff = eoff;\n    }\n\n    if (typeName === 'ASCII') {\n      bin.writeASCII(data, toff, val);\n    } else if (typeName === 'SHORT') {\n      times(num, (i) => {\n        bin.writeUshort(data, toff + (2 * i), val[i]);\n      });\n    } else if (typeName === 'LONG') {\n      times(num, (i) => {\n        bin.writeUint(data, toff + (4 * i), val[i]);\n      });\n    } else if (typeName === 'RATIONAL') {\n      times(num, (i) => {\n        bin.writeUint(data, toff + (8 * i), Math.round(val[i] * 10000));\n        bin.writeUint(data, toff + (8 * i) + 4, 10000);\n      });\n    } else if (typeName === 'DOUBLE') {\n      times(num, (i) => {\n        bin.writeDouble(data, toff + (8 * i), val[i]);\n      });\n    }\n\n    if (dlen > 4) {\n      dlen += (dlen & 1);\n      eoff += dlen;\n    }\n\n    offset += 4;\n  }\n\n  return [offset, eoff];\n};\n\nconst encodeIfds = (ifds) => {\n  const data = new Uint8Array(numBytesInIfd);\n  let offset = 4;\n  const bin = _binBE;\n\n  // set big-endian byte-order\n  // https://en.wikipedia.org/wiki/TIFF#Byte_order\n  data[0] = 77;\n  data[1] = 77;\n\n  // set format-version number\n  // https://en.wikipedia.org/wiki/TIFF#Byte_order\n  data[3] = 42;\n\n  let ifdo = 8;\n\n  bin.writeUint(data, offset, ifdo);\n\n  offset += 4;\n\n  ifds.forEach((ifd, i) => {\n    const noffs = _writeIFD(bin, data, ifdo, ifd);\n    ifdo = noffs[1];\n    if (i < ifds.length - 1) {\n      bin.writeUint(data, noffs[0], ifdo);\n    }\n  });\n\n  if (data.slice) {\n    return data.slice(0, ifdo).buffer;\n  }\n\n  // node hasn't implemented slice on Uint8Array yet\n  const result = new Uint8Array(ifdo);\n  for (let i = 0; i < ifdo; i++) {\n    result[i] = data[i];\n  }\n  return result.buffer;\n};\n\nconst encodeImage = (values, width, height, metadata) => {\n  if (height === undefined || height === null) {\n    throw new Error(`you passed into encodeImage a width of type ${height}`);\n  }\n\n  if (width === undefined || width === null) {\n    throw new Error(`you passed into encodeImage a width of type ${width}`);\n  }\n\n  const ifd = {\n    256: [width], // ImageWidth\n    257: [height], // ImageLength\n    273: [numBytesInIfd], // strips offset\n    278: [height], // RowsPerStrip\n    305: 'geotiff.js', // no array for ASCII(Z)\n  };\n\n  if (metadata) {\n    for (const i in metadata) {\n      if (metadata.hasOwnProperty(i)) {\n        ifd[i] = metadata[i];\n      }\n    }\n  }\n\n  const prfx = new Uint8Array(encodeIfds([ifd]));\n\n  const img = new Uint8Array(values);\n\n  const samplesPerPixel = ifd[277];\n\n  const data = new Uint8Array(numBytesInIfd + (width * height * samplesPerPixel));\n  times(prfx.length, (i) => {\n    data[i] = prfx[i];\n  });\n  forEach(img, (value, i) => {\n    data[numBytesInIfd + i] = value;\n  });\n\n  return data.buffer;\n};\n\nconst convertToTids = (input) => {\n  const result = {};\n  for (const key in input) {\n    if (key !== 'StripOffsets') {\n      if (!name2code[key]) {\n        console.error(key, 'not in name2code:', Object.keys(name2code));\n      }\n      result[name2code[key]] = input[key];\n    }\n  }\n  return result;\n};\n\nconst toArray = (input) => {\n  if (Array.isArray(input)) {\n    return input;\n  }\n  return [input];\n};\n\nconst metadataDefaults = [\n  ['Compression', 1], // no compression\n  ['PlanarConfiguration', 1],\n  ['XPosition', 0],\n  ['YPosition', 0],\n  ['ResolutionUnit', 1], // Code 1 for actual pixel count or 2 for pixels per inch.\n  ['ExtraSamples', 0], // should this be an array??\n  ['GeoAsciiParams', 'WGS 84\\u0000'],\n  ['ModelTiepoint', [0, 0, 0, -180, 90, 0]], // raster fits whole globe\n  ['GTModelTypeGeoKey', 2],\n  ['GTRasterTypeGeoKey', 1],\n  ['GeographicTypeGeoKey', 4326],\n  ['GeogCitationGeoKey', 'WGS 84'],\n];\n\nexport function writeGeotiff(data, metadata) {\n  const isFlattened = typeof data[0] === 'number';\n\n  let height;\n  let numBands;\n  let width;\n  let flattenedValues;\n\n  if (isFlattened) {\n    height = metadata.height || metadata.ImageLength;\n    width = metadata.width || metadata.ImageWidth;\n    numBands = data.length / (height * width);\n    flattenedValues = data;\n  } else {\n    numBands = data.length;\n    height = data[0].length;\n    width = data[0][0].length;\n    flattenedValues = [];\n    times(height, (rowIndex) => {\n      times(width, (columnIndex) => {\n        times(numBands, (bandIndex) => {\n          flattenedValues.push(data[bandIndex][rowIndex][columnIndex]);\n        });\n      });\n    });\n  }\n\n  metadata.ImageLength = height;\n  delete metadata.height;\n  metadata.ImageWidth = width;\n  delete metadata.width;\n\n  // consult https://www.loc.gov/preservation/digital/formats/content/tiff_tags.shtml\n\n  if (!metadata.BitsPerSample) {\n    metadata.BitsPerSample = times(numBands, () => 8);\n  }\n\n  metadataDefaults.forEach((tag) => {\n    const key = tag[0];\n    if (!metadata[key]) {\n      const value = tag[1];\n      metadata[key] = value;\n    }\n  });\n\n  // The color space of the image data.\n  // 1=black is zero and 2=RGB.\n  if (!metadata.PhotometricInterpretation) {\n    metadata.PhotometricInterpretation = metadata.BitsPerSample.length === 3 ? 2 : 1;\n  }\n\n  // The number of components per pixel.\n  if (!metadata.SamplesPerPixel) {\n    metadata.SamplesPerPixel = [numBands];\n  }\n\n  if (!metadata.StripByteCounts) {\n    // we are only writing one strip\n    metadata.StripByteCounts = [numBands * height * width];\n  }\n\n  if (!metadata.ModelPixelScale) {\n    // assumes raster takes up exactly the whole globe\n    metadata.ModelPixelScale = [360 / width, 180 / height, 0];\n  }\n\n  if (!metadata.SampleFormat) {\n    metadata.SampleFormat = times(numBands, () => 1);\n  }\n\n\n  const geoKeys = Object.keys(metadata)\n    .filter((key) => endsWith(key, 'GeoKey'))\n    .sort((a, b) => name2code[a] - name2code[b]);\n\n  if (!metadata.GeoKeyDirectory) {\n    const NumberOfKeys = geoKeys.length;\n\n    const GeoKeyDirectory = [1, 1, 0, NumberOfKeys];\n    geoKeys.forEach((geoKey) => {\n      const KeyID = Number(name2code[geoKey]);\n      GeoKeyDirectory.push(KeyID);\n\n      let Count;\n      let TIFFTagLocation;\n      let valueOffset;\n      if (fieldTagTypes[KeyID] === 'SHORT') {\n        Count = 1;\n        TIFFTagLocation = 0;\n        valueOffset = metadata[geoKey];\n      } else if (geoKey === 'GeogCitationGeoKey') {\n        Count = metadata.GeoAsciiParams.length;\n        TIFFTagLocation = Number(name2code.GeoAsciiParams);\n        valueOffset = 0;\n      } else {\n        console.log(`[geotiff.js] couldn't get TIFFTagLocation for ${geoKey}`);\n      }\n      GeoKeyDirectory.push(TIFFTagLocation);\n      GeoKeyDirectory.push(Count);\n      GeoKeyDirectory.push(valueOffset);\n    });\n    metadata.GeoKeyDirectory = GeoKeyDirectory;\n  }\n\n  // delete GeoKeys from metadata, because stored in GeoKeyDirectory tag\n  for (const geoKey in geoKeys) {\n    if (geoKeys.hasOwnProperty(geoKey)) {\n      delete metadata[geoKey];\n    }\n  }\n\n  [\n    'Compression',\n    'ExtraSamples',\n    'GeographicTypeGeoKey',\n    'GTModelTypeGeoKey',\n    'GTRasterTypeGeoKey',\n    'ImageLength', // synonym of ImageHeight\n    'ImageWidth',\n    'PhotometricInterpretation',\n    'PlanarConfiguration',\n    'ResolutionUnit',\n    'SamplesPerPixel',\n    'XPosition',\n    'YPosition',\n  ].forEach((name) => {\n    if (metadata[name]) {\n      metadata[name] = toArray(metadata[name]);\n    }\n  });\n\n\n  const encodedMetadata = convertToTids(metadata);\n\n  const outputImage = encodeImage(flattenedValues, width, height, encodedMetadata);\n\n  return outputImage;\n}\n","import GeoTIFFImage from './geotiffimage';\nimport DataView64 from './dataview64';\nimport DataSlice from './dataslice';\nimport Pool from './pool';\nimport { makeRemoteSource, makeBufferSource, makeFileSource, makeFileReaderSource } from './source';\nimport { fieldTypes, fieldTagNames, arrayFields, geoKeyNames } from './globals';\nimport { writeGeotiff } from './geotiffwriter';\nimport * as globals from './globals';\nimport * as rgb from './rgb';\nimport { getDecoder } from './compression';\n\nexport { globals };\nexport { rgb };\nexport { getDecoder };\n\nfunction getFieldTypeLength(fieldType) {\n  switch (fieldType) {\n    case fieldTypes.BYTE: case fieldTypes.ASCII: case fieldTypes.SBYTE: case fieldTypes.UNDEFINED:\n      return 1;\n    case fieldTypes.SHORT: case fieldTypes.SSHORT:\n      return 2;\n    case fieldTypes.LONG: case fieldTypes.SLONG: case fieldTypes.FLOAT: case fieldTypes.IFD:\n      return 4;\n    case fieldTypes.RATIONAL: case fieldTypes.SRATIONAL: case fieldTypes.DOUBLE:\n    case fieldTypes.LONG8: case fieldTypes.SLONG8: case fieldTypes.IFD8:\n      return 8;\n    default:\n      throw new RangeError(`Invalid field type: ${fieldType}`);\n  }\n}\n\nfunction parseGeoKeyDirectory(fileDirectory) {\n  const rawGeoKeyDirectory = fileDirectory.GeoKeyDirectory;\n  if (!rawGeoKeyDirectory) {\n    return null;\n  }\n\n  const geoKeyDirectory = {};\n  for (let i = 4; i <= rawGeoKeyDirectory[3] * 4; i += 4) {\n    const key = geoKeyNames[rawGeoKeyDirectory[i]];\n    const location = (rawGeoKeyDirectory[i + 1])\n      ? (fieldTagNames[rawGeoKeyDirectory[i + 1]]) : null;\n    const count = rawGeoKeyDirectory[i + 2];\n    const offset = rawGeoKeyDirectory[i + 3];\n\n    let value = null;\n    if (!location) {\n      value = offset;\n    } else {\n      value = fileDirectory[location];\n      if (typeof value === 'undefined' || value === null) {\n        throw new Error(`Could not get value of geoKey '${key}'.`);\n      } else if (typeof value === 'string') {\n        value = value.substring(offset, offset + count - 1);\n      } else if (value.subarray) {\n        value = value.subarray(offset, offset + count);\n        if (count === 1) {\n          value = value[0];\n        }\n      }\n    }\n    geoKeyDirectory[key] = value;\n  }\n  return geoKeyDirectory;\n}\n\nfunction getValues(dataSlice, fieldType, count, offset) {\n  let values = null;\n  let readMethod = null;\n  const fieldTypeLength = getFieldTypeLength(fieldType);\n\n  switch (fieldType) {\n    case fieldTypes.BYTE: case fieldTypes.ASCII: case fieldTypes.UNDEFINED:\n      values = new Uint8Array(count); readMethod = dataSlice.readUint8;\n      break;\n    case fieldTypes.SBYTE:\n      values = new Int8Array(count); readMethod = dataSlice.readInt8;\n      break;\n    case fieldTypes.SHORT:\n      values = new Uint16Array(count); readMethod = dataSlice.readUint16;\n      break;\n    case fieldTypes.SSHORT:\n      values = new Int16Array(count); readMethod = dataSlice.readInt16;\n      break;\n    case fieldTypes.LONG: case fieldTypes.IFD:\n      values = new Uint32Array(count); readMethod = dataSlice.readUint32;\n      break;\n    case fieldTypes.SLONG:\n      values = new Int32Array(count); readMethod = dataSlice.readInt32;\n      break;\n    case fieldTypes.LONG8: case fieldTypes.IFD8:\n      values = new Array(count); readMethod = dataSlice.readUint64;\n      break;\n    case fieldTypes.SLONG8:\n      values = new Array(count); readMethod = dataSlice.readInt64;\n      break;\n    case fieldTypes.RATIONAL:\n      values = new Uint32Array(count * 2); readMethod = dataSlice.readUint32;\n      break;\n    case fieldTypes.SRATIONAL:\n      values = new Int32Array(count * 2); readMethod = dataSlice.readInt32;\n      break;\n    case fieldTypes.FLOAT:\n      values = new Float32Array(count); readMethod = dataSlice.readFloat32;\n      break;\n    case fieldTypes.DOUBLE:\n      values = new Float64Array(count); readMethod = dataSlice.readFloat64;\n      break;\n    default:\n      throw new RangeError(`Invalid field type: ${fieldType}`);\n  }\n\n  // normal fields\n  if (!(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n    for (let i = 0; i < count; ++i) {\n      values[i] = readMethod.call(\n        dataSlice, offset + (i * fieldTypeLength),\n      );\n    }\n  } else { // RATIONAL or SRATIONAL\n    for (let i = 0; i < count; i += 2) {\n      values[i] = readMethod.call(\n        dataSlice, offset + (i * fieldTypeLength),\n      );\n      values[i + 1] = readMethod.call(\n        dataSlice, offset + ((i * fieldTypeLength) + 4),\n      );\n    }\n  }\n\n  if (fieldType === fieldTypes.ASCII) {\n    return String.fromCharCode.apply(null, values);\n  }\n  return values;\n}\n\n/**\n * Data class to store the parsed file directory, geo key directory and\n * offset to the next IFD\n */\nclass ImageFileDirectory {\n  constructor(fileDirectory, geoKeyDirectory, nextIFDByteOffset) {\n    this.fileDirectory = fileDirectory;\n    this.geoKeyDirectory = geoKeyDirectory;\n    this.nextIFDByteOffset = nextIFDByteOffset;\n  }\n}\n\n/**\n * Error class for cases when an IFD index was requested, that does not exist\n * in the file.\n */\nclass GeoTIFFImageIndexError extends Error {\n  constructor(index) {\n    super(`No image at index ${index}`);\n    this.index = index;\n  }\n}\n\n\nclass GeoTIFFBase {\n  /**\n   * (experimental) Reads raster data from the best fitting image. This function uses\n   * the image with the lowest resolution that is still a higher resolution than the\n   * requested resolution.\n   * When specified, the `bbox` option is translated to the `window` option and the\n   * `resX` and `resY` to `width` and `height` respectively.\n   * Then, the [readRasters]{@link GeoTIFFImage#readRasters} method of the selected\n   * image is called and the result returned.\n   * @see GeoTIFFImage.readRasters\n   * @param {Object} [options={}] optional parameters\n   * @param {Array} [options.window=whole image] the subset to read data from.\n   * @param {Array} [options.bbox=whole image] the subset to read data from in\n   *                                           geographical coordinates.\n   * @param {Array} [options.samples=all samples] the selection of samples to read from.\n   * @param {Boolean} [options.interleave=false] whether the data shall be read\n   *                                             in one single array or separate\n   *                                             arrays.\n   * @param {Number} [options.pool=null] The optional decoder pool to use.\n   * @param {Number} [options.width] The desired width of the output. When the width is not the\n   *                                 same as the images, resampling will be performed.\n   * @param {Number} [options.height] The desired height of the output. When the width is not the\n   *                                  same as the images, resampling will be performed.\n   * @param {String} [options.resampleMethod='nearest'] The desired resampling method.\n   * @param {Number|Number[]} [options.fillValue] The value to use for parts of the image\n   *                                              outside of the images extent. When multiple\n   *                                              samples are requested, an array of fill values\n   *                                              can be passed.\n   * @returns {Promise.<(TypedArray|TypedArray[])>} the decoded arrays as a promise\n   */\n  async readRasters(options = {}) {\n    const { window: imageWindow, width, height } = options;\n    let { resX, resY, bbox } = options;\n\n    const firstImage = await this.getImage();\n    let usedImage = firstImage;\n    const imageCount = await this.getImageCount();\n    const imgBBox = firstImage.getBoundingBox();\n\n    if (imageWindow && bbox) {\n      throw new Error('Both \"bbox\" and \"window\" passed.');\n    }\n\n    // if width/height is passed, transform it to resolution\n    if (width || height) {\n      // if we have an image window (pixel coordinates), transform it to a BBox\n      // using the origin/resolution of the first image.\n      if (imageWindow) {\n        const [oX, oY] = firstImage.getOrigin();\n        const [rX, rY] = firstImage.getResolution();\n\n        bbox = [\n          oX + (imageWindow[0] * rX),\n          oY + (imageWindow[1] * rY),\n          oX + (imageWindow[2] * rX),\n          oY + (imageWindow[3] * rY),\n        ];\n      }\n\n      // if we have a bbox (or calculated one)\n\n      const usedBBox = bbox || imgBBox;\n\n      if (width) {\n        if (resX) {\n          throw new Error('Both width and resX passed');\n        }\n        resX = (usedBBox[2] - usedBBox[0]) / width;\n      }\n      if (height) {\n        if (resY) {\n          throw new Error('Both width and resY passed');\n        }\n        resY = (usedBBox[3] - usedBBox[1]) / height;\n      }\n    }\n\n    // if resolution is set or calculated, try to get the image with the worst acceptable resolution\n    if (resX || resY) {\n      const allImages = [];\n      for (let i = 0; i < imageCount; ++i) {\n        const image = await this.getImage(i);\n        const { SubfileType: subfileType, NewSubfileType: newSubfileType } = image.fileDirectory;\n        if (i === 0 || subfileType === 2 || newSubfileType & 1) {\n          allImages.push(image);\n        }\n      }\n\n      allImages.sort((a, b) => a.getWidth() - b.getWidth());\n      for (let i = 0; i < allImages.length; ++i) {\n        const image = allImages[i];\n        const imgResX = (imgBBox[2] - imgBBox[0]) / image.getWidth();\n        const imgResY = (imgBBox[3] - imgBBox[1]) / image.getHeight();\n\n        usedImage = image;\n        if ((resX && resX > imgResX) || (resY && resY > imgResY)) {\n          break;\n        }\n      }\n    }\n\n    let wnd = imageWindow;\n    if (bbox) {\n      const [oX, oY] = firstImage.getOrigin();\n      const [imageResX, imageResY] = usedImage.getResolution(firstImage);\n\n      wnd = [\n        Math.round((bbox[0] - oX) / imageResX),\n        Math.round((bbox[1] - oY) / imageResY),\n        Math.round((bbox[2] - oX) / imageResX),\n        Math.round((bbox[3] - oY) / imageResY),\n      ];\n      wnd = [\n        Math.min(wnd[0], wnd[2]),\n        Math.min(wnd[1], wnd[3]),\n        Math.max(wnd[0], wnd[2]),\n        Math.max(wnd[1], wnd[3]),\n      ];\n    }\n\n    return usedImage.readRasters({ ...options, window: wnd });\n  }\n}\n\n\n/**\n * The abstraction for a whole GeoTIFF file.\n * @augments GeoTIFFBase\n */\nclass GeoTIFF extends GeoTIFFBase {\n  /**\n   * @constructor\n   * @param {Source} source The datasource to read from.\n   * @param {Boolean} littleEndian Whether the image uses little endian.\n   * @param {Boolean} bigTiff Whether the image uses bigTIFF conventions.\n   * @param {Number} firstIFDOffset The numeric byte-offset from the start of the image\n   *                                to the first IFD.\n   * @param {Object} [options] further options.\n   * @param {Boolean} [options.cache=false] whether or not decoded tiles shall be cached.\n   */\n  constructor(source, littleEndian, bigTiff, firstIFDOffset, options = {}) {\n    super();\n    this.source = source;\n    this.littleEndian = littleEndian;\n    this.bigTiff = bigTiff;\n    this.firstIFDOffset = firstIFDOffset;\n    this.cache = options.cache || false;\n    this.ifdRequests = [];\n    this.ghostValues = null;\n  }\n\n  async getSlice(offset, size) {\n    const fallbackSize = this.bigTiff ? 4048 : 1024;\n    return new DataSlice(\n      await this.source.fetch(\n        offset, typeof size !== 'undefined' ? size : fallbackSize,\n      ), offset, this.littleEndian, this.bigTiff,\n    );\n  }\n\n  /**\n   * Instructs to parse an image file directory at the given file offset.\n   * As there is no way to ensure that a location is indeed the start of an IFD,\n   * this function must be called with caution (e.g only using the IFD offsets from\n   * the headers or other IFDs).\n   * @param {number} offset the offset to parse the IFD at\n   * @returns {ImageFileDirectory} the parsed IFD\n   */\n  async parseFileDirectoryAt(offset) {\n    const entrySize = this.bigTiff ? 20 : 12;\n    const offsetSize = this.bigTiff ? 8 : 2;\n\n    let dataSlice = await this.getSlice(offset);\n    const numDirEntries = this.bigTiff ?\n      dataSlice.readUint64(offset) :\n      dataSlice.readUint16(offset);\n\n    // if the slice does not cover the whole IFD, request a bigger slice, where the\n    // whole IFD fits: num of entries + n x tag length + offset to next IFD\n    const byteSize = (numDirEntries * entrySize) + (this.bigTiff ? 16 : 6);\n    if (!dataSlice.covers(offset, byteSize)) {\n      dataSlice = await this.getSlice(offset, byteSize);\n    }\n\n    const fileDirectory = {};\n\n    // loop over the IFD and create a file directory object\n    let i = offset + (this.bigTiff ? 8 : 2);\n    for (let entryCount = 0; entryCount < numDirEntries; i += entrySize, ++entryCount) {\n      const fieldTag = dataSlice.readUint16(i);\n      const fieldType = dataSlice.readUint16(i + 2);\n      const typeCount = this.bigTiff ?\n        dataSlice.readUint64(i + 4) :\n        dataSlice.readUint32(i + 4);\n\n      let fieldValues;\n      let value;\n      const fieldTypeLength = getFieldTypeLength(fieldType);\n      const valueOffset = i + (this.bigTiff ? 12 : 8);\n\n      // check whether the value is directly encoded in the tag or refers to a\n      // different external byte range\n      if (fieldTypeLength * typeCount <= (this.bigTiff ? 8 : 4)) {\n        fieldValues = getValues(dataSlice, fieldType, typeCount, valueOffset);\n      } else {\n        // resolve the reference to the actual byte range\n        const actualOffset = dataSlice.readOffset(valueOffset);\n        const length = getFieldTypeLength(fieldType) * typeCount;\n\n        // check, whether we actually cover the referenced byte range; if not,\n        // request a new slice of bytes to read from it\n        if (dataSlice.covers(actualOffset, length)) {\n          fieldValues = getValues(dataSlice, fieldType, typeCount, actualOffset);\n        } else {\n          const fieldDataSlice = await this.getSlice(actualOffset, length);\n          fieldValues = getValues(fieldDataSlice, fieldType, typeCount, actualOffset);\n        }\n      }\n\n      // unpack single values from the array\n      if (typeCount === 1 && arrayFields.indexOf(fieldTag) === -1 &&\n        !(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n        value = fieldValues[0];\n      } else {\n        value = fieldValues;\n      }\n\n      // write the tags value to the file directly\n      fileDirectory[fieldTagNames[fieldTag]] = value;\n    }\n    const geoKeyDirectory = parseGeoKeyDirectory(fileDirectory);\n    const nextIFDByteOffset = dataSlice.readOffset(\n      offset + offsetSize + (entrySize * numDirEntries),\n    );\n\n    return new ImageFileDirectory(\n      fileDirectory,\n      geoKeyDirectory,\n      nextIFDByteOffset,\n    );\n  }\n\n  async requestIFD(index) {\n    // see if we already have that IFD index requested.\n    if (this.ifdRequests[index]) {\n      // attach to an already requested IFD\n      return this.ifdRequests[index];\n    } else if (index === 0) {\n      // special case for index 0\n      this.ifdRequests[index] = this.parseFileDirectoryAt(this.firstIFDOffset);\n      return this.ifdRequests[index];\n    } else if (!this.ifdRequests[index - 1]) {\n      // if the previous IFD was not yet loaded, load that one first\n      // this is the recursive call.\n      try {\n        this.ifdRequests[index - 1] = this.requestIFD(index - 1);\n      } catch (e) {\n        // if the previous one already was an index error, rethrow\n        // with the current index\n        if (e instanceof GeoTIFFImageIndexError) {\n          throw new GeoTIFFImageIndexError(index);\n        }\n        // rethrow anything else\n        throw e;\n      }\n    }\n    // if the previous IFD was loaded, we can finally fetch the one we are interested in.\n    // we need to wrap this in an IIFE, otherwise this.ifdRequests[index] would be delayed\n    this.ifdRequests[index] = (async () => {\n      const previousIfd = await this.ifdRequests[index - 1];\n      if (previousIfd.nextIFDByteOffset === 0) {\n        throw new GeoTIFFImageIndexError(index);\n      }\n      return this.parseFileDirectoryAt(previousIfd.nextIFDByteOffset);\n    })();\n    return this.ifdRequests[index];\n  }\n\n  /**\n   * Get the n-th internal subfile of an image. By default, the first is returned.\n   *\n   * @param {Number} [index=0] the index of the image to return.\n   * @returns {GeoTIFFImage} the image at the given index\n   */\n  async getImage(index = 0) {\n    const ifd = await this.requestIFD(index);\n    return new GeoTIFFImage(\n      ifd.fileDirectory, ifd.geoKeyDirectory,\n      this.dataView, this.littleEndian, this.cache, this.source,\n    );\n  }\n\n  /**\n   * Returns the count of the internal subfiles.\n   *\n   * @returns {Number} the number of internal subfile images\n   */\n  async getImageCount() {\n    let index = 0;\n    if (this.ifdRequests.length > 0) {\n      // optimization: if we already have the last IFD loaded,\n      // we know the final size.\n      const lastIFD = await this.ifdRequests[this.ifdRequests.length - 1];\n      if (lastIFD.nextIFDByteOffset === 0) {\n        return this.ifdRequests.length;\n      }\n      // otherwise we can at least start later in the list.\n      index = this.ifdRequests.length;\n    }\n\n    // loop until we run out of IFDs\n    let hasNext = true;\n    while (hasNext) {\n      try {\n        await this.requestIFD(index);\n        ++index;\n      } catch (e) {\n        if (e instanceof GeoTIFFImageIndexError) {\n          hasNext = false;\n        } else {\n          throw e;\n        }\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Get the values of the COG ghost area as a parsed map.\n   * See https://gdal.org/drivers/raster/cog.html#header-ghost-area for reference\n   * @returns {Object} the parsed ghost area or null, if no such area was found\n   */\n  async getGhostValues() {\n    const offset = this.bigTiff ? 16 : 8;\n    if (this.ghostValues) {\n      return this.ghostValues;\n    }\n    const detectionString = 'GDAL_STRUCTURAL_METADATA_SIZE=';\n    const heuristicAreaSize = detectionString.length + 100;\n    let slice = await this.getSlice(offset, heuristicAreaSize);\n    if (detectionString === getValues(slice, fieldTypes.ASCII, detectionString.length, offset)) {\n      const valuesString = getValues(slice, fieldTypes.ASCII, heuristicAreaSize, offset);\n      const firstLine = valuesString.split('\\n')[0];\n      const metadataSize = Number(firstLine.split('=')[1].split(' ')[0]) + firstLine.length;\n      if (metadataSize > heuristicAreaSize) {\n        slice = await this.getSlice(offset, metadataSize);\n      }\n      const fullString = getValues(slice, fieldTypes.ASCII, metadataSize, offset);\n      this.ghostValues = {};\n      fullString\n        .split('\\n')\n        .filter(line => line.length > 0)\n        .map(line => line.split('='))\n        .forEach(([key, value]) => {\n          this.ghostValues[key] = value;\n        });\n    }\n    return this.ghostValues;\n  }\n\n  /**\n   * Parse a (Geo)TIFF file from the given source.\n   *\n   * @param {source~Source} source The source of data to parse from.\n   * @param {object} options Additional options.\n   */\n  static async fromSource(source, options) {\n    const headerData = await source.fetch(0, 1024);\n    const dataView = new DataView64(headerData);\n\n    const BOM = dataView.getUint16(0, 0);\n    let littleEndian;\n    if (BOM === 0x4949) {\n      littleEndian = true;\n    } else if (BOM === 0x4D4D) {\n      littleEndian = false;\n    } else {\n      throw new TypeError('Invalid byte order value.');\n    }\n\n    const magicNumber = dataView.getUint16(2, littleEndian);\n    let bigTiff;\n    if (magicNumber === 42) {\n      bigTiff = false;\n    } else if (magicNumber === 43) {\n      bigTiff = true;\n      const offsetByteSize = dataView.getUint16(4, littleEndian);\n      if (offsetByteSize !== 8) {\n        throw new Error('Unsupported offset byte-size.');\n      }\n    } else {\n      throw new TypeError('Invalid magic number.');\n    }\n\n    const firstIFDOffset = bigTiff\n      ? dataView.getUint64(8, littleEndian)\n      : dataView.getUint32(4, littleEndian);\n    return new GeoTIFF(source, littleEndian, bigTiff, firstIFDOffset, options);\n  }\n\n  /**\n   * Closes the underlying file buffer\n   * N.B. After the GeoTIFF has been completely processed it needs\n   * to be closed but only if it has been constructed from a file.\n   */\n  close() {\n    if (typeof this.source.close === 'function') {\n      return this.source.close();\n    }\n    return false;\n  }\n}\n\nexport { GeoTIFF };\nexport default GeoTIFF;\n\n/**\n * Wrapper for GeoTIFF files that have external overviews.\n * @augments GeoTIFFBase\n */\nclass MultiGeoTIFF extends GeoTIFFBase {\n  /**\n   * Construct a new MultiGeoTIFF from a main and several overview files.\n   * @param {GeoTIFF} mainFile The main GeoTIFF file.\n   * @param {GeoTIFF[]} overviewFiles An array of overview files.\n   */\n  constructor(mainFile, overviewFiles) {\n    super();\n    this.mainFile = mainFile;\n    this.overviewFiles = overviewFiles;\n    this.imageFiles = [mainFile].concat(overviewFiles);\n\n    this.fileDirectoriesPerFile = null;\n    this.fileDirectoriesPerFileParsing = null;\n    this.imageCount = null;\n  }\n\n  async parseFileDirectoriesPerFile() {\n    const requests = [this.mainFile.parseFileDirectories()]\n      .concat(this.overviewFiles.map((file) => file.parseFileDirectories()));\n\n    this.fileDirectoriesPerFile = await Promise.all(requests);\n    return this.fileDirectoriesPerFile;\n  }\n\n  /**\n   * Get the n-th internal subfile of an image. By default, the first is returned.\n   *\n   * @param {Number} [index=0] the index of the image to return.\n   * @returns {GeoTIFFImage} the image at the given index\n   */\n  async getImage(index = 0) {\n    if (!this.fileDirectoriesPerFile) {\n      if (!this.fileDirectoriesPerFileParsing) {\n        this.fileDirectoriesPerFileParsing = this.parseFileDirectoriesPerFile();\n      }\n      this.fileDirectoriesPerFile = await this.fileDirectoriesPerFileParsing;\n    }\n\n    let relativeIndex = index;\n    for (let i = 0; i < this.fileDirectoriesPerFile.length; ++i) {\n      const fileDirectories = this.fileDirectoriesPerFile[i];\n      if (relativeIndex < fileDirectories.length) {\n        const file = this.imageFiles[i];\n        return new GeoTIFFImage(\n          fileDirectories[relativeIndex][0], fileDirectories[relativeIndex][1],\n          file.dataView, file.littleEndian, file.cache, file.source,\n        );\n      }\n      relativeIndex -= fileDirectories.length;\n    }\n    throw new RangeError('Invalid image index');\n  }\n\n  /**\n   * Returns the count of the internal subfiles.\n   *\n   * @returns {Number} the number of internal subfile images\n   */\n  async getImageCount() {\n    if (!this.fileDirectoriesPerFile) {\n      if (!this.fileDirectoriesPerFileParsing) {\n        this.fileDirectoriesPerFileParsing = this.parseFileDirectoriesPerFile();\n      }\n      this.fileDirectoriesPerFile = await this.fileDirectoriesPerFileParsing;\n    }\n    return this.fileDirectoriesPerFile.reduce((count, ifds) => count + ifds.length, 0);\n  }\n}\n\nexport { MultiGeoTIFF };\n\n/**\n * Creates a new GeoTIFF from a remote URL.\n * @param {string} url The URL to access the image from\n * @param {object} [options] Additional options to pass to the source.\n *                           See {@link makeRemoteSource} for details.\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\nexport async function fromUrl(url, options = {}) {\n  return GeoTIFF.fromSource(makeRemoteSource(url, options));\n}\n\n/**\n * Construct a new GeoTIFF from an\n * [ArrayBuffer]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer}.\n * @param {ArrayBuffer} arrayBuffer The data to read the file from.\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\nexport async function fromArrayBuffer(arrayBuffer) {\n  return GeoTIFF.fromSource(makeBufferSource(arrayBuffer));\n}\n\n/**\n * Construct a GeoTIFF from a local file path. This uses the node\n * [filesystem API]{@link https://nodejs.org/api/fs.html} and is\n * not available on browsers.\n *\n * N.B. After the GeoTIFF has been completely processed it needs\n * to be closed but only if it has been constructed from a file.\n * @param {string} path The file path to read from.\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\nexport async function fromFile(path) {\n  return GeoTIFF.fromSource(makeFileSource(path));\n}\n\n/**\n * Construct a GeoTIFF from an HTML\n * [Blob]{@link https://developer.mozilla.org/en-US/docs/Web/API/Blob} or\n * [File]{@link https://developer.mozilla.org/en-US/docs/Web/API/File}\n * object.\n * @param {Blob|File} blob The Blob or File object to read from.\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\nexport async function fromBlob(blob) {\n  return GeoTIFF.fromSource(makeFileReaderSource(blob));\n}\n\n/**\n * Construct a MultiGeoTIFF from the given URLs.\n * @param {string} mainUrl The URL for the main file.\n * @param {string[]} overviewUrls An array of URLs for the overview images.\n * @param {object} [options] Additional options to pass to the source.\n *                           See [makeRemoteSource]{@link module:source.makeRemoteSource}\n *                           for details.\n * @returns {Promise.<MultiGeoTIFF>} The resulting MultiGeoTIFF file.\n */\nexport async function fromUrls(mainUrl, overviewUrls = [], options = {}) {\n  const mainFile = await GeoTIFF.fromSource(makeRemoteSource(mainUrl, options));\n  const overviewFiles = await Promise.all(\n    overviewUrls.map((url) => GeoTIFF.fromSource(makeRemoteSource(url, options))),\n  );\n\n  return new MultiGeoTIFF(mainFile, overviewFiles);\n}\n\n/**\n * Main creating function for GeoTIFF files.\n * @param {(Array)} array of pixel values\n * @returns {metadata} metadata\n */\nexport async function writeArrayBuffer(values, metadata) {\n  return writeGeotiff(values, metadata);\n}\n\nexport { Pool };\n","// eslint-disable-next-line import/no-webpack-loader-syntax\nimport Worker from './viv.worker';\n\nconst defaultPoolSize =\n  typeof navigator !== 'undefined' ? navigator.hardwareConcurrency : null;\n\n/**\n * Pool for workers to decode chunks of the images.\n * This is a line-for-line copy of GeoTIFFs old implementation: https://github.com/geotiffjs/geotiff.js/blob/v1.0.0-beta.6/src/pool.js\n */\nexport default class Pool {\n  /**\n   * @constructor\n   * @param {Number} size The size of the pool. Defaults to the number of CPUs\n   *                      available. When this parameter is `null` or 0, then the\n   *                      decoding will be done in the main thread.\n   */\n  constructor(size = defaultPoolSize) {\n    this.workers = [];\n    this.idleWorkers = [];\n    this.waitQueue = [];\n    this.decoder = null;\n\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < size; ++i) {\n      const w = new Worker();\n      this.workers.push(w);\n      this.idleWorkers.push(w);\n    }\n  }\n\n  /**\n   * Decode the given block of bytes with the set compression method.\n   * @param {ArrayBuffer} buffer the array buffer of bytes to decode.\n   * @returns {Promise.<ArrayBuffer>} the decoded result as a `Promise`\n   */\n  async decode(fileDirectory, buffer) {\n    const currentWorker = await this.waitForWorker();\n    return new Promise((resolve, reject) => {\n      currentWorker.onmessage = event => {\n        // this.workers.push(currentWorker);\n        this.finishTask(currentWorker);\n        resolve(event.data[0]);\n      };\n      currentWorker.onerror = error => {\n        // this.workers.push(currentWorker);\n        this.finishTask(currentWorker);\n        reject(error);\n      };\n      currentWorker.postMessage(['decode', fileDirectory, buffer], [buffer]);\n    });\n  }\n\n  async waitForWorker() {\n    const idleWorker = this.idleWorkers.pop();\n    if (idleWorker) {\n      return idleWorker;\n    }\n    const waiter = {};\n    const promise = new Promise(resolve => {\n      waiter.resolve = resolve;\n    });\n\n    this.waitQueue.push(waiter);\n    return promise;\n  }\n\n  async finishTask(currentWorker) {\n    const waiter = this.waitQueue.pop();\n    if (waiter) {\n      waiter.resolve(currentWorker);\n    } else {\n      this.idleWorkers.push(currentWorker);\n    }\n  }\n\n  destroy() {\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < this.workers.length; ++i) {\n      this.workers[i].terminate();\n    }\n  }\n}\n","import { BoundsCheckError } from 'zarr';\nimport { guessRgb, padTileWithZeros } from './utils';\n\n/**\n * This class serves as a wrapper for fetching zarr data from a file server.\n * */\nexport default class ZarrLoader {\n  constructor({\n    data,\n    dimensions,\n    isRgb,\n    scale = 1,\n    translate = { x: 0, y: 0 }\n  }) {\n    let base;\n    if (Array.isArray(data)) {\n      [base] = data;\n      this.numLevels = data.length;\n    } else {\n      base = data;\n      this.numLevels = 1;\n    }\n    this.type = 'zarr';\n    this.scale = scale;\n    this.translate = translate;\n    this.isRgb = isRgb || guessRgb(base.shape);\n    this.dimensions = dimensions;\n\n    this._data = data;\n    this._dimIndices = new Map();\n    dimensions.forEach(({ field }, i) => this._dimIndices.set(field, i));\n\n    const { dtype, chunks } = base;\n    /* TODO: Use better dtype convention in DTYPE_LOOKUP.\n     *\n     * This convension should probably _not_ describe endianness,\n     * since endianness is resolved when decoding the source arrayBuffers\n     * into TypedArrays. The dtype of the zarr array describes the dtype of the\n     * source but this is different from how the bytes end up being represented in\n     * memory client-side.\n     */\n    this.dtype = dtype.includes('>') ? `<${dtype.slice(1)}` : dtype;\n    this.tileSize = chunks[this._dimIndices.get('x')];\n  }\n\n  get isPyramid() {\n    return Array.isArray(this._data);\n  }\n\n  get base() {\n    return this.isPyramid ? this._data[0] : this._data;\n  }\n\n  /**\n   * Returns image tiles at tile-position (x, y) at pyramidal level z.\n   * @param {number} x positive integer\n   * @param {number} y positive integer\n   * @param {number} z positive integer (0 === highest zoom level)\n   * @param {Array} loaderSelection, Array of valid dimension selections\n   * @returns {Object} data: TypedArray[], width: number (tileSize), height: number (tileSize)\n   */\n  async getTile({ x, y, z, loaderSelection = [] }) {\n    const source = this._getSource(z);\n    const [xIndex, yIndex] = ['x', 'y'].map(k => this._dimIndices.get(k));\n\n    const dataRequests = loaderSelection.map(async sel => {\n      const chunkKey = this._serializeSelection(sel);\n      chunkKey[yIndex] = y;\n      chunkKey[xIndex] = x;\n      const {\n        data,\n        shape: [height, width]\n      } = await source.getRawChunk(chunkKey);\n      if (height < this.tileSize || width < this.tileSize) {\n        return padTileWithZeros(\n          { data, width, height },\n          this.tileSize,\n          this.tileSize\n        );\n      }\n      return data;\n    });\n\n    const data = await Promise.all(dataRequests);\n    return { data, width: this.tileSize, height: this.tileSize };\n  }\n\n  /**\n   * Returns full image panes (at level z if pyramid)\n   * @param {number} z positive integer (0 === highest zoom level)\n   * @param {Array} loaderSelection, Array of valid dimension selections\n   * @returns {Object} data: TypedArray[], width: number, height: number\n   */\n  async getRaster({ z, loaderSelection = [] }) {\n    const source = this._getSource(z);\n    const [xIndex, yIndex] = ['x', 'y'].map(k => this._dimIndices.get(k));\n\n    const dataRequests = loaderSelection.map(async sel => {\n      const chunkKey = this._serializeSelection(sel);\n      chunkKey[yIndex] = null;\n      chunkKey[xIndex] = null;\n      if (this.isRgb) {\n        chunkKey[chunkKey.length - 1] = null;\n      }\n      const { data } = await source.getRaw(chunkKey);\n      return data;\n    });\n\n    const data = await Promise.all(dataRequests);\n    const { shape } = source;\n    return { data, width: shape[xIndex], height: shape[yIndex] };\n  }\n\n  /**\n   * Handles `onTileError` within deck.gl\n   * @param {Error} err Error thrown in tile layer\n   */\n  // eslint-disable-next-line class-methods-use-this\n  onTileError(err) {\n    if (!(err instanceof BoundsCheckError)) {\n      // Rethrow error if something other than tile being requested is out of bounds.\n      throw err;\n    }\n  }\n\n  /**\n   * Returns image width and height (at pyramid level z) without fetching data\n   * @param {number} z positive integer (0 === highest zoom level)\n   * @returns {Object} width: number, height: number\n   */\n  getRasterSize({ z }) {\n    const { shape } = this._getSource(z);\n    const [height, width] = ['y', 'x'].map(k => shape[this._dimIndices.get(k)]);\n    return { height, width };\n  }\n\n  /**\n   * Get the metadata associated with a Zarr image layer, in a human-readable format.\n   * @returns {Object} Metadata keys mapped to values.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getMetadata() {\n    return {};\n  }\n\n  _getSource(z) {\n    return typeof z === 'number' && this.isPyramid ? this._data[z] : this._data;\n  }\n\n  /**\n   * Returns valid zarr.js selection for ZarrArray.getRaw or ZarrArray.getRawChunk\n   * @param {Object} selection valid dimension selection\n   * @returns {Array} Array of indicies\n   *\n   * Valid dimension selections include:\n   *   - Direct zarr.js selection: [1, 0, 0, 0]\n   *   - Named selection object: { channel: 0, time: 2 } or { channel: \"DAPI\", time: 2 }\n   */\n  _serializeSelection(selection) {\n    // Just return copy if array-like zarr.js selection\n    if (Array.isArray(selection)) return [...selection];\n\n    const serialized = Array(this.dimensions.length).fill(0);\n    Object.entries(selection).forEach(([dimName, value]) => {\n      if (!this._dimIndices.has(dimName)) {\n        throw Error(\n          `Dimension \"${dimName}\" does not exist on loader.\n           Must be one of \"${this.dimensions.map(d => d.field)}.\"`\n        );\n      }\n      const dimIndex = this._dimIndices.get(dimName);\n      switch (typeof value) {\n        case 'number': {\n          // ex. { channel: 0 }\n          serialized[dimIndex] = value;\n          break;\n        }\n        case 'string': {\n          const { values, type } = this.dimensions[dimIndex];\n          if (type === 'nominal' || type === 'ordinal') {\n            // ex. { channel: 'DAPI' }\n            serialized[dimIndex] = values.indexOf(value);\n            break;\n          } else {\n            // { z: 'DAPI' }\n            throw Error(\n              `Cannot use selection \"${value}\" for dimension \"${dimName}\" with type \"${type}\".`\n            );\n          }\n        }\n        default: {\n          throw Error(\n            `Named selection must be a string or number. Got ${value} for ${dimName}.`\n          );\n        }\n      }\n    });\n    return serialized;\n  }\n}\n","/* eslint-disable radix */\nimport parser from 'fast-xml-parser';\n\nexport default class OMEXML {\n  constructor(omexmlString) {\n    const options = {\n      ignoreAttributes: false,\n      attributeNamePrefix: '@_',\n      trimValues: true,\n      allowBooleanAttributes: true\n    };\n    this.metadataOMEXML = parser.parse(omexmlString, options).OME;\n    const { Pixels } = this.metadataOMEXML.Image.length\n      ? this.metadataOMEXML.Image[0]\n      : this.metadataOMEXML.Image;\n    this._Pixels = Pixels;\n    this.SizeZ = Number.parseInt(Pixels['@_SizeZ']);\n    this.SizeT = Number.parseInt(Pixels['@_SizeT']);\n    this.SizeC = Number.parseInt(Pixels['@_SizeC']);\n    this.SizeX = Number.parseInt(Pixels['@_SizeX']);\n    this.SizeY = Number.parseInt(Pixels['@_SizeY']);\n    this.DimensionOrder = Pixels['@_DimensionOrder'];\n    this.Type = Pixels['@_Type'];\n    const PhysicalSizeYUnit = Pixels['@_PhysicalSizeYUnit'];\n    // This µ character is not well handled - I got odd behavior but this solves it.\n    // There was a prepended character so now I just look for µm to be included\n    // and use only µm if it is found.\n    this.PhysicalSizeYUnit =\n      PhysicalSizeYUnit && PhysicalSizeYUnit.includes('µm')\n        ? 'µm'\n        : PhysicalSizeYUnit;\n    const PhysicalSizeXUnit = Pixels['@_PhysicalSizeXUnit'];\n    this.PhysicalSizeXUnit =\n      PhysicalSizeXUnit && PhysicalSizeXUnit.includes('µm')\n        ? 'µm'\n        : PhysicalSizeXUnit;\n    this.PhysicalSizeY = Pixels['@_PhysicalSizeY'];\n    this.PhysicalSizeX = Pixels['@_PhysicalSizeX'];\n  }\n\n  getChannelNames() {\n    const { Channel } = this._Pixels;\n    return Array.isArray(Channel)\n      ? Channel.map(channel => channel['@_Name'])\n      : [Channel['@_Name']];\n  }\n\n  getNumberOfImages() {\n    return this.metadataOMEXML.Image.length || 0;\n  }\n}\n","import OMEXML from './omeXML';\nimport { isInTileBounds, padTileWithZeros, byteSwapInplace } from './utils';\nimport { DTYPE_VALUES } from '../constants';\nimport { range } from '../layers/utils';\n\nconst DTYPE_LOOKUP = {\n  uint8: '<u1',\n  uint16: '<u2',\n  uint32: '<u4',\n  float32: '<f4'\n};\n\n/**\n * This class serves as a wrapper for fetching tiff data from a file server.\n * @param {Object} args\n * @param {Object} args.tiff geotiffjs tiff object.\n * @param {Object} args.pool Pool that implements a `decode` function.\n * @param {Object} args.firstImage First image (geotiff Image object) in the tiff (containing base-resolution data).\n * @param {String} args.omexmlString Raw OMEXML as a string.\n * @param {Array} args.offsets The offsets of each IFD in the tiff.\n * */\nexport default class OMETiffLoader {\n  constructor({ tiff, pool, firstImage, omexmlString, offsets }) {\n    this.pool = pool;\n    this.tiff = tiff;\n    this.type = 'ome-tiff';\n    // get first image's description, which contains OMEXML\n    this.omexml = new OMEXML(omexmlString);\n    this.physicalSizes = {\n      x: {\n        value: this.omexml.PhysicalSizeX,\n        unit: this.omexml.PhysicalSizeXUnit\n      },\n      y: {\n        value: this.omexml.PhysicalSizeY,\n        unit: this.omexml.PhysicalSizeYUnit\n      }\n    };\n    this.software = firstImage.fileDirectory.Software;\n    this.offsets = offsets || [];\n    this.channelNames = this.omexml.getChannelNames();\n    this.width = this.omexml.SizeX;\n    this.height = this.omexml.SizeY;\n    this.tileSize = firstImage.getTileWidth();\n    const { SubIFDs } = firstImage.fileDirectory;\n    // These subIFDs are going to take some tuning to get right.\n    // This works with the current bioformats6 pipeline.\n    // Related to: https://github.com/hubmapconsortium/vitessce-image-viewer/issues/144\n    this.numLevels =\n      this.omexml.getNumberOfImages() || (SubIFDs && SubIFDs.length - 1);\n    this.isBioFormats6Pyramid = SubIFDs;\n    this.isPyramid = this.numLevels > 1;\n    // The omexml specification only allows for these - zarr is more flexible so this\n    // is for unifying the two loaders in upstream applications.\n    this.dimensions = [\n      {\n        field: 'channel',\n        type: 'nominal',\n        values: this.channelNames\n      },\n      {\n        field: 'z',\n        type: 'ordinal',\n        values: range(this.omexml.SizeZ)\n      },\n      {\n        field: 'time',\n        type: 'ordinal',\n        values: range(this.omexml.SizeT)\n      },\n      { field: 'x', type: 'quantitative', values: null },\n      { field: 'y', type: 'quantitative', values: null }\n    ];\n    // We use zarr's internal format.  It encodes endiannes, but we leave it little for now\n    // since javascript is little endian.\n    this.dtype = DTYPE_LOOKUP[this.omexml.Type];\n  }\n\n  /**\n   * Returns an IFD index for a given loader selection.\n   * @param {number} z Z axis selection.\n   * @param {number} time Time axis selection.\n   * @param {String} channel Channel axis selection.\n   * @returns {number} IFD index.\n   */\n  _getIFDIndex({ z = 0, channel, time = 0 }) {\n    let channelIndex;\n    // Without names, enforce a numeric channel indexing scheme\n    if (this.channelNames.every(v => !v)) {\n      console.warn(\n        'No channel names found in OMEXML.  Please be sure to use numeric indexing.'\n      );\n      channelIndex = channel;\n    } else if (typeof channel === 'string') {\n      channelIndex = this.channelNames.indexOf(channel);\n    } else if (typeof channel === 'number') {\n      channelIndex = channel;\n    } else {\n      throw new Error('Channel selection must be numeric index or string');\n    }\n    const { SizeZ, SizeT, SizeC, DimensionOrder } = this.omexml;\n    switch (DimensionOrder) {\n      case 'XYZCT': {\n        return time * SizeZ * SizeC + channelIndex * SizeZ + z;\n      }\n      case 'XYZTC': {\n        return channelIndex * SizeZ * SizeT + time * SizeZ + z;\n      }\n      case 'XYCTZ': {\n        return z * SizeC * SizeT + time * SizeC + channelIndex;\n      }\n      case 'XYCZT': {\n        return time * SizeC * SizeZ + z * SizeC + channelIndex;\n      }\n      case 'XYTCZ': {\n        return z * SizeT * SizeC + channelIndex * SizeT + time;\n      }\n      case 'XYTZC': {\n        return channelIndex * SizeT * SizeZ + z * SizeT + time;\n      }\n      default: {\n        throw new Error('Dimension order is required for OMETIFF');\n      }\n    }\n  }\n\n  /**\n   * Handles `onTileError` within deck.gl\n   * @param {Error} err Error thrown in tile layer\n   */\n  // eslint-disable-next-line class-methods-use-this\n  onTileError(err) {\n    console.error(err);\n  }\n\n  /**\n   * Returns image tiles at tile-position (x, y) at pyramidal level z.\n   * @param {number} x positive integer\n   * @param {number} y positive integer\n   * @param {number} z positive integer (0 === highest zoom level)\n   * @param {Array} loaderSelection, Array of number Arrays specifying channel selections\n   * @returns {Object} data: TypedArray[], width: number (tileSize), height: number (tileSize).\n   * Default is `{data: [], width: tileSize, height: tileSize}`.\n   */\n  async getTile({ x, y, z, loaderSelection = [] }) {\n    if (!this._tileInBounds({ x, y, z })) {\n      return null;\n    }\n    const { tiff, isBioFormats6Pyramid, omexml, tileSize } = this;\n    const { SizeZ, SizeT, SizeC } = omexml;\n    const pyramidOffset = z * SizeZ * SizeT * SizeC;\n    let image;\n    const tileRequests = loaderSelection.map(async sel => {\n      const index = this._getIFDIndex(sel);\n      const pyramidIndex = pyramidOffset + index;\n      // We need to put the request for parsing the file directory into this array.\n      // This allows us to get tiff pages directly based on offset without parsing everything.\n      if (!isBioFormats6Pyramid) {\n        this._parseIFD(pyramidIndex);\n      } else {\n        // Pyramids with large z-stacks + large numbers of channels could get slow\n        // so we allow for offsets for the lowest-resolution images (\"parentImage\").\n        this._parseIFD(index);\n        const parentImage = await tiff.getImage(index);\n        if (z !== 0) {\n          tiff.ifdRequests[pyramidIndex] = tiff.parseFileDirectoryAt(\n            parentImage.fileDirectory.SubIFDs[z - 1]\n          );\n        }\n      }\n      image = await tiff.getImage(pyramidIndex);\n      return this._getChannel({ image, x, y });\n    });\n\n    const tiles = await Promise.all(tileRequests);\n    return {\n      data: tiles,\n      width: tileSize,\n      height: tileSize\n    };\n  }\n\n  /**\n   * Returns full image panes (at level z if pyramid)\n   * @param {number} z positive integer (0 === highest zoom level)\n   * @param {Array} loaderSelection, Array of number Arrays specifying channel selections\n   * @returns {Object} data: TypedArray[], width: number, height: number\n    * Default is `{data: [], width, height}`.\n\n   */\n  async getRaster({ z, loaderSelection }) {\n    const { tiff, omexml, isBioFormats6Pyramid, pool } = this;\n    const { SizeZ, SizeT, SizeC } = omexml;\n    const rasters = await Promise.all(\n      loaderSelection.map(async sel => {\n        const index = this._getIFDIndex(sel);\n        const pyramidIndex = z * SizeZ * SizeT * SizeC + index;\n        // We need to put the request for parsing the file directory into this array.\n        // This allows us to get tiff pages directly based on offset without parsing everything.\n        if (!isBioFormats6Pyramid) {\n          this._parseIFD(pyramidIndex);\n        } else {\n          // Pyramids with large z-stacks + large numbers of channels could get slow\n          // so we allow for offsets for the initial images (\"parentImage\").\n          this._parseIFD(index);\n          const parentImage = await tiff.getImage(index);\n          if (z !== 0) {\n            tiff.ifdRequests[pyramidIndex] = tiff.parseFileDirectoryAt(\n              parentImage.fileDirectory.SubIFDs[z - 1]\n            );\n          }\n        }\n        const image = await tiff.getImage(pyramidIndex);\n        // Flips bits for us for endianness.\n        const raster = await image.readRasters({ pool });\n        return raster[0];\n      })\n    );\n    // Get first selection * SizeZ * SizeT * SizeC + loaderSelection[0] size as proxy for image size.\n    if (!loaderSelection || loaderSelection.length === 0) {\n      return { data: [], ...this.getRasterSize({ z }) };\n    }\n    const image = await tiff.getImage(\n      z * SizeZ * SizeT * SizeC + this._getIFDIndex(loaderSelection[0])\n    );\n    const width = image.getWidth();\n    const height = image.getHeight();\n    return { data: rasters, width, height };\n  }\n\n  /**\n   * Returns image width and height (at pyramid level z) without fetching data.\n   * This information is inferrable from the provided omexml.\n   * This is only used by the OverviewLayer for inferring the box size.\n   * It is NOT the actual pixel-size but rather the image size\n   * without any padding.\n   * @param {number} z positive integer (0 === highest zoom level)\n   * @returns {Object} width: number, height: number\n   */\n  getRasterSize({ z }) {\n    const { width, height } = this;\n    /* eslint-disable no-bitwise */\n    return {\n      height: height >> z,\n      width: width >> z\n    };\n    /* eslint-disable no-bitwise */\n  }\n\n  /**\n   * Get the metadata associated with an OMETiff image layer, in a human-readable format.\n   * @returns {Object} Metadata keys mapped to values.\n   */\n  getMetadata() {\n    const { omexml } = this;\n    const {\n      metadataOMEXML: {\n        Image: { AcquisitionDate },\n        StructuredAnnotations\n      },\n      SizeX,\n      SizeY,\n      SizeZ,\n      SizeT,\n      SizeC,\n      Type,\n      PhysicalSizeX,\n      PhysicalSizeXUnit,\n      PhysicalSizeY,\n      PhysicalSizeYUnit,\n      PhysicalSizeZ,\n      PhysicalSizeZUnit\n    } = omexml;\n\n    const physicalSizeAndUnitX =\n      PhysicalSizeX && PhysicalSizeXUnit\n        ? `${PhysicalSizeX} (${PhysicalSizeXUnit})`\n        : '-';\n    const physicalSizeAndUnitY =\n      PhysicalSizeY && PhysicalSizeYUnit\n        ? `${PhysicalSizeY} (${PhysicalSizeYUnit})`\n        : '-';\n    const physicalSizeAndUnitZ =\n      PhysicalSizeZ && PhysicalSizeZUnit\n        ? `${PhysicalSizeZ} (${PhysicalSizeZUnit})`\n        : '-';\n    let roiCount;\n    if (StructuredAnnotations) {\n      const { MapAnnotation } = StructuredAnnotations;\n      roiCount =\n        MapAnnotation && MapAnnotation.Value\n          ? Object.entries(MapAnnotation.Value).length\n          : 0;\n    }\n    return {\n      'Acquisition Date': AcquisitionDate,\n      'Dimensions (XY)': `${SizeX} x ${SizeY}`,\n      'Pixels Type': Type,\n      'Pixels Size (XYZ)': `${physicalSizeAndUnitX} x ${physicalSizeAndUnitY} x ${physicalSizeAndUnitZ}`,\n      'Z-sections/Timepoints': `${SizeZ} x ${SizeT}`,\n      Channels: SizeC,\n      'ROI Count': roiCount\n    };\n  }\n\n  async _getChannel({ image, x, y }) {\n    const { dtype } = this;\n    const { TypedArray } = DTYPE_VALUES[dtype];\n    const tile = await image.getTileOrStrip(x, y, 0, this.pool);\n    const data = new TypedArray(tile.data);\n    /*\n     * The endianness of JavaScript TypedArrays are determined by the endianness\n     * of the end-users' hardware. Nearly all desktop computers are x86 (little endian),\n     * so we flip bytes in place for big-endian buffers. This is substantially faster than using\n     * the DataView API.\n     */\n    if (!image.littleEndian) {\n      byteSwapInplace(data);\n    }\n\n    // If the tile data is not (tileSize x tileSize), pad the data with zeros\n    if (data.length < this.tileSize * this.tileSize) {\n      const width = Math.min(\n        this.tileSize,\n        image.getWidth() - x * this.tileSize\n      );\n      const height = data.length / width;\n      return padTileWithZeros(\n        { data, width, height },\n        this.tileSize,\n        this.tileSize\n      );\n    }\n\n    return data;\n  }\n\n  _tileInBounds({ x, y, z }) {\n    const { width, height, tileSize, numLevels } = this;\n    return isInTileBounds({\n      x,\n      y,\n      z,\n      width,\n      height,\n      tileSize,\n      numLevels\n    });\n  }\n\n  _parseIFD(index) {\n    const { tiff, offsets } = this;\n    if (offsets.length > 0) {\n      tiff.ifdRequests[index] = tiff.parseFileDirectoryAt(offsets[index]);\n    }\n  }\n}\n","import { openArray } from 'zarr';\nimport ZarrLoader from './zarrLoader';\n\nasync function getJson(path, key) {\n  const res = await fetch(`${path}${key}`);\n  if (res.status === 404) {\n    throw Error(`Key '${key}' does not exist on zarr store.`);\n  }\n  const json = await res.json();\n  return json;\n}\n\n/**\n * This class attempts to be a javascript implementation of ome-zarr-py\n * https://github.com/ome/ome-zarr-py/blob/master/ome_zarr.py\n * @param {String} zarrPath url to root zarr store\n * @param {Object} rootAttrs metadata for zarr array\n * */\nclass OMEZarrReader {\n  constructor(zarrPath, rootAttrs) {\n    this.zarrPath = zarrPath;\n    this.rootAttrs = rootAttrs;\n    if (!('omero' in rootAttrs)) {\n      throw Error('Remote zarr is not ome-zarr format.');\n    }\n    this.imageData = rootAttrs.omero;\n  }\n\n  /**\n   * Returns OMEZarrReader instance.\n   * @param {String} url root zarr store\n   * @returns {OMEZarrReader} OME reader for zarr store\n   */\n  static async fromUrl(url) {\n    let zarrPath\n    let rootAttrs;\n    if(typeof url === 'string'){\n      zarrPath = url.endsWith('/') ? url : `${url}/`;\n      rootAttrs = await getJson(zarrPath, '.zattrs');\n    }\n    else{\n      zarrPath = url;\n      const meta = await url.getItem('.zattrs')\n      const enc = new TextDecoder(\"utf-8\");\n      rootAttrs = JSON.parse(enc.decode(new Uint8Array(meta)));\n    }\n\n    return new OMEZarrReader(zarrPath, rootAttrs);\n  }\n\n  /**\n   * Returns ZarrLoader as well as omero image metadata object.\n   * @returns {Object} { loader: ZarrLoader, metadata: Object }\n   */\n  async loadOMEZarr() {\n    let resolutions = ['0']; // TODO: could be first alphanumeric dataset on err\n    if ('multiscales' in this.rootAttrs) {\n      const { datasets } = this.rootAttrs.multiscales[0];\n      resolutions = datasets.map(d => d.path);\n    }\n    const promises = resolutions.map(r =>\n      openArray({ store: this.zarrPath, path: r })\n    );\n    const pyramid = await Promise.all(promises);\n    const data = pyramid.length > 1 ? pyramid : pyramid[0];\n    const dimensions = ['t', 'c', 'z', 'y', 'x'].map(field => ({ field }));\n    return {\n      loader: new ZarrLoader({ data, dimensions }),\n      metadata: this.imageData\n    };\n  }\n}\n\nexport default OMEZarrReader;\n","import { openArray } from 'zarr';\nimport { fromUrl } from 'geotiff';\nimport Pool from './Pool';\nimport ZarrLoader from './zarrLoader';\nimport OMETiffLoader from './OMETiffLoader';\nimport { getChannelStats } from './utils';\nimport OMEZarrReader from './omeZarrReader';\n\nexport async function createZarrLoader({\n  url,\n  dimensions,\n  isPyramid,\n  isRgb,\n  scale,\n  translate\n}) {\n  let data;\n  if (isPyramid) {\n    let metadata;\n    if(typeof url === 'string'){\n      const metadataUrl = `${url}${url.slice(-1) === '/' ? '' : '/'}.zmetadata`;\n      const response = await fetch(metadataUrl);\n      const md = await response.json();\n      metadata = md.metadata;\n    }\n    else{\n      const meta = await url.getItem('.zmetadata')\n      const enc = new TextDecoder(\"utf-8\");\n      const md = JSON.parse(enc.decode(new Uint8Array(meta)));\n      metadata = md.metadata;\n    }\n    const paths = Object.keys(metadata)\n      .filter(metaKey => metaKey.includes('.zarray'))\n      .map(arrMetaKeys => arrMetaKeys.slice(0, -7));\n    data = await Promise.all(paths.map(path => openArray({ store: url, path })));\n  } else {\n    data = await openArray({ store: url });\n  }\n  return new ZarrLoader({\n    data,\n    dimensions,\n    scale,\n    translate,\n    isRgb\n  });\n}\n\n/**\n * This function wraps creating a ome-tiff loader.\n * @param {Object} args\n * @param {String} args.url URL from which to fetch the tiff.\n * @param {Array} args.offsets List of IFD offsets.\n * @param {Object} args.headers Object containing headers to be passed to all fetch requests.\n */\nexport async function createOMETiffLoader({ url, offsets = [], headers = {} }) {\n  const tiff = await fromUrl(url, headers);\n  const firstImage = await tiff.getImage(0);\n  const pool = new Pool();\n  const omexmlString = firstImage.fileDirectory.ImageDescription;\n  return new OMETiffLoader({\n    tiff,\n    pool,\n    firstImage,\n    omexmlString,\n    offsets\n  });\n}\n\nexport { ZarrLoader, OMETiffLoader, OMEZarrReader, getChannelStats };\n"],"sourceRoot":""}